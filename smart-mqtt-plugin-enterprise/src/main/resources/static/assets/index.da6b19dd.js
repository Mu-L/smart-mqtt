import{M as Z,N as J,ac as Q,ad as H,ae as ee,q as P,O as c,m as oe,d as M,R as te,p as R,a as z,$ as ne,b as T,c as le}from"./index.044b2d75.js";import{f as re,a as ae,b as ie}from"./event.68ff4fe6.js";import{f as k,l as m,u as W,E as j,F as G,s as g,x as I,K as V,q as _,D as E,z as C,A as O,b as L,w as v,H as X,T as Y}from"./vue.fad201d8.js";const se=({constants:e,props:o})=>()=>o.rightSlide?e.DIALOG_SLIDER_RIGHT:e.DIALOG_FADE,D=e=>isNaN(Number(e))?e:e+"px",de=({props:e,state:o})=>()=>{const t={};let{width:n,top:l,rightSlide:r,maxHeight:a}=e;return l===void 0&&(l=r?"0":"15vh"),n=D(n),l=D(l),a=D(a),o.isFull||(t.width=n,t.top=o.top||l,t.maxHeight=a,r?(t.right=0,t.height="calc(100vh - "+t.top+")"):t.left=o.left||"calc((100vw - "+n+") / 2)"),t},ue=({props:e})=>()=>{const o={maxHeight:""};let{maxHeight:t}=e;return t&&(o.maxHeight="none"),o},fe=({api:e,constants:o,emit:t,nextTick:n,parent:l,props:r,vm:a,state:i})=>s=>{const d=l.$el;if(r.lockScroll&&(s?e.showScrollbar():e.hideScrollbar()),i.move=!1,i.isFull=r.fullscreen,t("update:visible",s),s)i.closed=!1,t("open"),Z(d,"scroll",e.updatePopper),n(()=>{a.$refs.dialog.scrollTop=0}),r.appendToBody&&document.body.appendChild(d);else if(J(d,"scroll",e.updatePopper),i.closed||(i.emitter.emit("boxclose",r.isFormReset),t("close")),r.destroyOnClose&&n(()=>i.key++),r.rightSlide){const u=d.querySelector(o.DIALOG_BOX_CLASS)||d;u.style.left=""}},ce=({api:e,parent:o,props:t})=>()=>{if(t.lockScroll&&t.visible&&e.showScrollbar(),t.visible){const n=o.$el;e.open(),t.appendToBody&&document.body.appendChild(n)}},pe=({api:e,parent:o,props:t})=>()=>{const n=o.$el;e.hideScrollbar(),t.appendToBody&&n&&n.parentNode&&n.parentNode.removeChild(n)},ye=({api:e,props:o})=>()=>{!o.closeOnClickModal||e.handleClose("mask")},me=({api:e,constants:o,emit:t,parent:n,props:l})=>(r="close")=>{if(typeof l.beforeClose=="function"&&l.beforeClose(r)===!1)return;const a=n.$el;if(l.rightSlide){const i=a.querySelector(o.DIALOG_BOX_CLASS)||a;i.style.left=""}!re(t,"before-close",e.hide)||e.hide()},be=({api:e,emit:o,state:t,props:n})=>l=>{l!==!1&&(t.emitter.emit("boxclose",n.isFormReset),o("update:visible",!1),o("change",!1),o("close"),t.closed=!0,e.hideScrollbar())},ge=({api:e,emit:o})=>()=>{o("confirm"),e.handleClose()},he=({api:e,emit:o})=>()=>{o("cancel"),e.handleClose()},_e=({api:e,constants:o})=>()=>{e.broadcast(o.SELECT_DROPDOWN,"updatePopper"),e.broadcast(o.DROPDOWN_MENU,"updatePopper")},ve=e=>()=>{e("opened")},Ce=e=>()=>{e("closed")},q=({vm:e,componentList:o})=>{const t=e.$children;return!t||t.length===0?[]:(t.forEach(n=>{n.$options.componentName==="Select"&&o.push(n),q({vm:n,componentList:o})}),o)},Se=e=>{q({vm:e,componentList:[]}).forEach(o=>{o.state.visible=!1})},Oe=({parent:e,props:o,state:t,emit:n})=>l=>{if(!o.draggable)return;let r=e.$el.querySelector(".tiny-dialog-box");l.preventDefault();let a=document.onmousemove,i=document.onmouseup,s=l.clientX-r.offsetLeft,d=l.clientY-r.offsetTop,{visibleHeight:u,visibleWidth:h}=Q();document.onmousemove=f=>{f.preventDefault(),t.move||(n("drag-start",f),Se(e),t.move=!0);let B=r.offsetWidth,A=r.offsetHeight,y=Math.max(h-B,0),S=Math.max(u-A,0),p=f.clientX-s,b=f.clientY-d;p=p<0?0:p>y?y:p,b=b<0?0:b>S?S:b,r.style.left=`${p}px`,r.style.top=`${b}px`,t.left=`${p}px`,t.top=`${b}px`,t.emitter.emit("boxdrag"),n("drag-move",f)},document.onmouseup=()=>{document.onmousemove=a,document.onmouseup=i,t.move=!1,o.draggable&&n("drag-end",l)}},$e=e=>()=>{H(document.body,e)},Be=e=>()=>{ee(document.body,e)};let Ae=1;const ke=typeof window=="undefined",Le=({onMounted:e,onBeforeUnmount:o,watch:t,vm:n,api:l,props:r,state:a,nextTick:i})=>{e(()=>{n._popupId=`popup-${Ae++}`,c.register(n._popupId,n)}),o(()=>{c.deregister(n._popupId),c.closeModal(n._popupId)}),t(()=>r.visible,s=>{if(s){if(n._opening)return;a.rendered?l.open():(a.rendered=!0,i(()=>{l.open()}))}else l.close()})},De=({state:e,vm:o})=>t=>{e.rendered||(e.rendered=!0);const n=oe({},o.$props||o,t);o._closeTimer&&(clearTimeout(o._closeTimer),o._closeTimer=null),clearTimeout(o._openTimer);const l=()=>{if(ke||e.opened)return;o._opening=!0;const a=o.$el,i=n.modal,s=n.zIndex;s&&(c.zIndex=s),i&&(o._closing&&(c.closeModal(o._popupId),o._closing=!1),c.openModal(o._popupId,c.nextZIndex(),n.modalAppendToBody?void 0:a,n.modalClass,n.modalFade),n.lockScroll&&(c.fixBodyBorder(),H(document.body,c.popLockClass))),getComputedStyle(a).position==="static"&&(a.style.position="absolute"),a.style.zIndex=c.nextZIndex().toString(),e.opened=!0,o._opening=!1},r=Number(n.openDelay);r>0?o._openTimer=setTimeout(()=>{o._openTimer=null,l()},r):l()},Te=({state:e,vm:o})=>()=>{o._openTimer!==null&&(clearTimeout(o._openTimer),o._openTimer=null),clearTimeout(o._closeTimer);const t=()=>{o._closing=!0,e.opened=!1,c.closeModal(o._popupId),o._closing=!1},n=Number(o.closeDelay);n>0?o._closeTimer=setTimeout(()=>{o._closeTimer=null,t()},n):t()};var Ie=e=>{const{api:o,nextTick:t,onBeforeUnmount:n,onMounted:l,props:r,reactive:a,toRefs:i,vm:s,watch:d}=e,u=a({opened:!1,rendered:!1});Le({onMounted:l,onBeforeUnmount:n,watch:d,vm:s,api:o,props:r,state:u,nextTick:t});const h=De({state:u,vm:s}),f=Te({state:u,vm:s});return P({open:h,close:f,PopupManager:c},i(u))};const K=["afterEnter","afterLeave","handleClose","handleWrapperClick","handleCancel","handleConfirm","handleDrag","state"],we=({reactive:e,computed:o,api:t,emitter:n,props:l})=>e({emitter:n(),key:0,x:null,y:null,top:null,left:null,max:null,move:!1,closed:!1,dragable:!1,isFull:l.fullscreen,style:o(()=>t.computedStyle()),bodyStyle:o(()=>t.computedBodyStyle()),animationName:o(()=>t.computedAnimationName())}),Me=({reactive:e,state:o,toRefs:t,usePopups:n})=>{const{opened:l,rendered:r}=n;return e(P({opened:l,rendered:r},t(o)))},Ee=({emit:e,api:o,state:t,parent:n,props:l,lockScrollClass:r,constants:a,usePopups:i,nextTick:s,broadcast:d,vm:u})=>{const{open:h,close:f}=i;Object.assign(o,{state:t,open:h,close:f,broadcast:d,handleCancel:he({api:o,emit:e}),handleConfirm:ge({api:o,emit:e}),updatePopper:_e({api:o,constants:a}),handleWrapperClick:ye({api:o,props:l}),hide:be({api:o,emit:e,state:t,props:l}),handleClose:me({api:o,constants:a,emit:e,parent:n,props:l}),watchVisible:fe({api:o,constants:a,emit:e,nextTick:s,parent:n,props:l,vm:u,state:t}),computedStyle:de({state:t,props:l}),computedBodyStyle:ue({props:l}),mounted:ce({api:o,parent:n,props:l}),unMounted:pe({api:o,parent:n,props:l}),computedAnimationName:se({constants:a,props:l}),afterEnter:ve(e),afterLeave:Ce(e),hideScrollbar:Be(r),showScrollbar:$e(r),handleDrag:Oe({parent:n,props:l,state:t,emit:e})})},xe=({watch:e,state:o,api:t,props:n})=>{e(()=>n.visible,t.watchVisible),e(()=>n.fullscreen,l=>{o.isFull=l})},U=(e,{computed:o,onBeforeUnmount:t,onMounted:n,toRefs:l,reactive:r,watch:a},{vm:i,emitter:s,parent:d,emit:u,constants:h,nextTick:f,mode:B,broadcast:A})=>{const y={},S=h.scrollLockClass(B);let p=we({reactive:r,computed:o,api:y,emitter:s,props:e});const b=Ie({api:y,nextTick:f,onBeforeUnmount:t,onMounted:n,props:e,reactive:r,toRefs:l,vm:i,watch:a});return Ee({api:y,state:p,parent:d,props:e,emit:u,constants:h,usePopups:b,lockScrollClass:S,nextTick:f,vm:i,broadcast:A}),p=Me({reactive:r,state:p,toRefs:l,usePopups:b}),xe({watch:a,state:p,api:y,props:e}),n(y.mounted),t(y.unMounted),y};function Ne(e,o){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=Fe(e))||o&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(e,o){if(!!e){if(typeof e=="string")return x(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,o)}}function x(e,o){(o==null||o>e.length)&&(o=e.length);for(var t=0,n=new Array(o);t<o;t++)n[t]=e[t];return n}var He=function(o,t){for(var n=o.__vccOpts||o,l=Ne(t),r;!(r=l()).done;){var a=r.value,i=a[0],s=a[1];n[i]=s}return n},Pe=M({components:{IconClose:te(),IconFullscreen:ae(),IconMinscreen:ie()},emits:["update:visible","change","before-close","open","close","opened","confirm","cancel","closed","drag-start","drag-move","drag-end"],props:[].concat(R,["resize","isFormReset","visible","title","modal","modalAppendToBody","appendToBody","lockScroll","closeOnClickModal","closeOnPressEscape","showClose","width","fullscreen","top","center","draggable","showHeader","rightSlide","destroyOnClose","dialogClass","beforeClose","maxHeight"]),model:{prop:"visible",event:"update:visible"},provide:function(){return{dialog:this}},setup:function(o,t){return z({props:o,context:t,renderless:U,api:K})}}),Re={class:"tiny-dialog-box__title"},ze={key:1,class:"tiny-dialog-box__footer"};function We(e,o,t,n,l,r){var a=k("icon-close"),i=k("icon-fullscreen"),s=k("icon-minscreen");return m(),W(Y,{name:e.state.animationName,onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,persisted:""},{default:j(function(){return[G(g("div",{class:I(["tiny-dialog-box__wrapper",e.dialogClass]),onClick:o[4]||(o[4]=V(function(){return e.handleWrapperClick&&e.handleWrapperClick.apply(e,arguments)},["self"]))},[!e.destroyOnClose||e.visible?(m(),_("div",{ref:"dialog",class:I([[{"is-fullscreen":e.state.isFull,"is-center":e.center,"is-right-slide":e.rightSlide}],"tiny-dialog-box"]),style:E(e.state.style),key:e.state.key},[e.showHeader?(m(),_("div",{key:0,class:"tiny-dialog-box__header",onMousedown:o[3]||(o[3]=function(){return e.handleDrag&&e.handleDrag.apply(e,arguments)})},[C(e.$slots,"title",{},function(){return[g("span",Re,O(e.title),1)]}),e.showClose?(m(),_("button",{key:0,type:"button",class:"tiny-dialog-box__headerbtn","aria-label":"Close",onClick:o[0]||(o[0]=function(d){return e.handleClose("close",d)})},[L(a,{class:"tiny-svg-size tiny-dialog-box__close"})])):v("v-if",!0),e.resize&&!e.state.isFull?(m(),_("button",{key:1,type:"button",class:"tiny-dialog-box__headerbtn","aria-label":"Resize",onClick:o[1]||(o[1]=function(d){return e.state.isFull=!0})},[L(i,{class:"tiny-svg-size tiny-dialog-box__close"})])):v("v-if",!0),e.resize&&e.state.isFull?(m(),_("button",{key:2,type:"button",class:"tiny-dialog-box__headerbtn","aria-label":"Resize",onClick:o[2]||(o[2]=function(d){return e.state.isFull=!1})},[L(s,{class:"tiny-svg-size tiny-dialog-box__close"})])):v("v-if",!0)],32)):v("v-if",!0),g("div",{class:"tiny-dialog-box__body",style:E(e.state.bodyStyle)},[C(e.$slots,"default")],4),e.slots.footer?(m(),_("div",ze,[C(e.$slots,"footer",{beforeClose:e.beforeClose})])):v("v-if",!0)],6)):v("v-if",!0)],2),[[X,e.visible]])]}),_:3},8,["name","onAfterEnter","onAfterLeave"])}var N=He(Pe,[["render",We]]);function je(e,o){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=Ge(e))||o&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ge(e,o){if(!!e){if(typeof e=="string")return F(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F(e,o)}}function F(e,o){(o==null||o>e.length)&&(o=e.length);for(var t=0,n=new Array(o);t<o;t++)n[t]=e[t];return n}var Ve=function(o,t){for(var n=o.__vccOpts||o,l=je(t),r;!(r=l()).done;){var a=r.value,i=a[0],s=a[1];n[i]=s}return n},Xe=M({emits:["update:visible","change","before-close","open","close","opened","confirm","cancel","closed"],props:[].concat(R,["visible","title","modal","closeOnClickModal","modalAppendToBody","appendToBody","width","top","showHeader","destroyOnClose"]),model:{prop:"visible",event:"update:visible"},setup:function(o,t){return z({props:o,context:t,renderless:U,api:K})}}),Ye={key:0,class:"tiny-mobile-dialog-box__header"},qe={class:"tiny-mobile-dialog-box__title"},Ke={class:"tiny-mobile-dialog-box__body"},Ue={class:"tiny-mobile-dialog-box__footer"};function Ze(e,o,t,n,l,r){return m(),W(Y,{name:"dialog-fade",persisted:""},{default:j(function(){return[G(g("div",{class:"tiny-mobile-dialog-box__wrapper",onClick:o[2]||(o[2]=V(function(){return e.handleWrapperClick&&e.handleWrapperClick.apply(e,arguments)},["self"]))},[(m(),_("div",{ref:"dialog",class:I([{"is-hide-header":!e.showHeader},"tiny-mobile-dialog-box"]),key:e.state.key},[e.showHeader?(m(),_("div",Ye,[C(e.$slots,"title",{},function(){return[g("span",qe,O(e.title),1)]})])):v("v-if",!0),g("div",Ke,[C(e.$slots,"default")]),g("div",Ue,[C(e.$slots,"footer",{},function(){return[g("button",{type:"button",onClick:o[0]||(o[0]=function(){return e.handleCancel&&e.handleCancel.apply(e,arguments)}),class:"tiny-mobile-dialog-box__button cancel-button"},O(e.t("ui.dialogBox.cancel")),1),g("button",{type:"button",onClick:o[1]||(o[1]=function(){return e.handleConfirm&&e.handleConfirm.apply(e,arguments)}),class:"tiny-mobile-dialog-box__button confirm-button"},O(e.t("ui.dialogBox.confirm")),1)]})])],2))],512),[[X,e.visible]])]}),_:3})}var Je=Ve(Xe,[["render",Ze]]);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},w.apply(this,arguments)}var Qe=function(o){return({}.TINY_MODE||o)==="pc"?N:({}.TINY_MODE||o)==="mobile"?Je:N},eo={DIALOG_SLIDER_RIGHT:"dialog-slideRight",DIALOG_FADE:"dialog-fade",SELECT_DROPDOWN:T+"SelectDropdown",DROPDOWN_MENU:T+"DropdownMenu",DIALOG_BOX_CLASS:"div.tiny-dialog-box",PC_SCROLL_LOCK_CLASS:"dialog-box__scroll-lock",MOBILE_SCROLL_LOCK_CLASS:"mobile-dialog-box__scroll-lock",Mode:"pc",scrollLockClass:function(o){return o===this.Mode?this.PC_SCROLL_LOCK_CLASS:this.MOBILE_SCROLL_LOCK_CLASS}},oo=w({},ne,{_constants:{type:Object,default:function(){return eo}},appendToBody:{type:Boolean,default:function(){return!1}},beforeClose:Function,center:{type:Boolean,default:function(){return!1}},closeOnClickModal:{type:Boolean,default:function(){return!0}},closeOnPressEscape:{type:Boolean,default:function(){return!0}},destroyOnClose:{Boolean,default:function(){return!1}},dialogClass:{type:String,default:function(){return""}},draggable:{type:Boolean,default:function(){return!1}},fullscreen:{type:Boolean,default:function(){return!1}},isFormReset:{type:Boolean,default:function(){return!0}},lockScroll:{type:Boolean,default:function(){return!0}},modal:{type:Boolean,default:function(){return!0}},modalAppendToBody:{type:Boolean,default:function(){return!0}},resize:{type:Boolean,default:function(){return!1}},rightSlide:{type:Boolean,default:function(){return!1}},showClose:{type:Boolean,default:function(){return!0}},showHeader:{type:Boolean,default:function(){return!0}},title:{type:String,default:function(){return""}},top:String,visible:{type:Boolean,default:function(){return!1}},width:{type:String,default:function(){return"500px"}},maxHeight:{type:String,default:function(){return""}}}),$=M({name:T+"DialogBox",model:{prop:"visible",event:"update:visible"},props:oo,setup:function(o,t){return le({props:o,context:t,template:Qe})}}),to="3.12.0";$.install=function(e){e.component($.name,$)};$.version=to;export{$ as D};
