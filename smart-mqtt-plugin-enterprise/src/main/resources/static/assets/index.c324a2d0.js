import{d as E,ac as U,g as p,l as k,q as D,u as v,w as c,x as f,e,G as t,Y as a,N as A,z as V,J as _}from"./vue.637c7bf1.js";import{_ as F,u as I,ds as N,a7 as q,I as g,bF as w,B as G,dt as L,du as T,T as z,dv as R}from"./index.01e0f4a7.js";import{R as S,C as M}from"./index.aae336f4.js";import{a as P,F as r}from"./index.d82dffa8.js";import{L as Y,G as h,C as d}from"./index.5221b630.js";import"./index.f71e6baa.js";import{G as j}from"./index.4e336d97.js";import"./ellipsis.80721cee.js";import"./index.56fbef74.js";import"./index.d4fa53db.js";import"./index.70f676ee.js";import"./plus.3880c905.js";const J={class:"container"},H={key:0},K={key:1},O=E({__name:"index",setup(Q){const b=U({loading:null});I();const n=p(!1),u=p({}),y=p([]),i=async()=>{b.loading=Y.service({text:"loading...",target:document.getElementById("container"),background:"rgba(0, 0, 0, 0.7)"});try{const{data:s}=await N({});return console.log("bridge",s),y.value=s.list,new Promise(l=>{l({result:s.list,page:{total:s.total}})})}finally{b.loading.close()}},x=({code:s,$grid:l})=>{switch(console.log("code",s,l),s){case"showAddForm":n.value=!0;break;case"delete":C(l.getSelectRecords().map(m=>m.username));break}},B=async()=>{console.log("user",u),await T(u.value),i(),n.value=!1},C=async s=>{s.length===0&&z.message({message:"\u65E0\u9009\u4E2D\u7528\u6237",status:"error"}),console.log("user",s),await R(s),i()};return k(()=>{i()}),(s,l)=>{const m=D("Breadcrumb");return v(),c(A,null,[f("div",J,[e(m,{items:["menu.system","menu.system.users"]},null,8,["items"]),e(a(q),{class:"content"},{default:t(()=>[e(a(S),null,{default:t(()=>[e(a(M),null,{default:t(()=>[f("div",null,[e(a(h),{data:y.value,"seq-serial":"",pager:{attrs:{currentPage:1,pageSize:5,pageSizes:[5,10],total:0,layout:"total, prev, pager, next, jumper, sizes"}},onToolbarButtonClick:x},{toolbar:t(()=>[e(a(j),{buttons:[{code:"showAddForm",name:"\u65B0\u589E\u7528\u6237"},{code:"delete",name:"\u5220\u9664"}]})]),default:t(()=>[e(a(d),{type:"index",width:"60"}),e(a(d),{type:"selection",width:"50"}),e(a(d),{field:"username",title:"\u7528\u6237\u540D"}),e(a(d),{field:"role",title:"\u89D2\u8272"},{default:t(o=>[o.row.role=="admin"?(v(),c("div",H,"\u7BA1\u7406\u5458")):V("",!0),o.row.role=="user"?(v(),c("div",K,"\u666E\u901A\u7528\u6237")):V("",!0)]),_:1}),e(a(d),{field:"desc",title:"\u5907\u6CE8"})]),_:1},8,["data"])])]),_:1})]),_:1})]),_:1})]),e(a(L),{title:"\u65B0\u589E\u8D26\u6237",visible:n.value,"onUpdate:visible":l[6]||(l[6]=o=>n.value=o)},{default:t(()=>[f("div",null,[e(a(P),{disabled:!1,"label-position":"right","label-width":"100px"},{default:t(()=>[e(a(r),{label:"\u7528\u6237\u540D",required:""},{default:t(()=>[e(a(g),{modelValue:u.value.username,"onUpdate:modelValue":l[0]||(l[0]=o=>u.value.username=o)},null,8,["modelValue"])]),_:1}),e(a(r),{label:"\u5BC6\u7801",required:""},{default:t(()=>[e(a(g),{modelValue:u.value.password,"onUpdate:modelValue":l[1]||(l[1]=o=>u.value.password=o),maxlength:"15"},null,8,["modelValue"])]),_:1}),e(a(r),{label:"\u89D2\u8272",required:""},{default:t(()=>[e(a(w),{modelValue:u.value.role,"onUpdate:modelValue":l[2]||(l[2]=o=>u.value.role=o),label:"admin"},{default:t(()=>[_(" \u7BA1\u7406\u5458")]),_:1},8,["modelValue"]),e(a(w),{modelValue:u.value.role,"onUpdate:modelValue":l[3]||(l[3]=o=>u.value.role=o),label:"user"},{default:t(()=>[_("\u666E\u901A\u7528\u6237")]),_:1},8,["modelValue"])]),_:1}),e(a(r),{label:"\u5907\u6CE8"},{default:t(()=>[e(a(g),{modelValue:u.value.desc,"onUpdate:modelValue":l[4]||(l[4]=o=>u.value.desc=o),type:"textarea"},null,8,["modelValue"])]),_:1}),e(a(r),null,{default:t(()=>[e(a(G),{type:"primary",onClick:l[5]||(l[5]=o=>B())},{default:t(()=>[_(" \u63D0\u4EA4")]),_:1})]),_:1})]),_:1})])]),_:1},8,["visible"])],64)}}});var de=F(O,[["__scopeId","data-v-5f355407"]]);export{de as default};
