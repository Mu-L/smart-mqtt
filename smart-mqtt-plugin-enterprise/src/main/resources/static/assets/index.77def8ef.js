import{s as R,A as ae,x as yo,y as wo,z as Dt,C as mn,D as gn,E as de,H as ot,J as lt,K as xt,M as Yt,U as vn,S as To,d as Q,b as se,i as at,B as Ce,O as Bt,P as jt,Q as yn,R as bo,n as Lt,W as wn,X as So,Y as Tn,p as ue,a as pe,T as Ie,Z as bn,c as He,$ as Ve,a0 as ko,a1 as Kt,m as B,w as Sn,a2 as kn,a3 as Eo,I as En,a4 as _n}from"./index.56824139.js";import{u as f,w,x as g,ad as _o,q as D,N as ge,O as Le,A as P,D as K,I as me,z as U,y as z,B as rt,e as v,E as F,P as G,G as le,S as Cn,J as Ae,s as Co,H as qt,L as Gt,f as st,F as In}from"./vue.637c7bf1.js";import{P as dt}from"./index.95ca9732.js";import{i as Un}from"./ellipsis.9c5c7440.js";import{i as Fn}from"./plus.4bf6d58e.js";var Io={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Uo=g("path",{class:"attachment_svg__st0",d:"M21.2 6c-1.2-1.1-2.7-1.8-4.4-1.8-.8 0-1.6.1-2.3.4-.8.3-1.4.7-2 1.3l-5.7 5.7c-.7.7-1 1.5-1 2.5 0 .9.4 1.8 1 2.5.7.7 1.5 1 2.5 1 .9 0 1.8-.4 2.5-1l5-5c.2-.2.3-.4.3-.6 0-.2-.1-.5-.3-.6-.2-.2-.4-.3-.6-.3-.2 0-.5.1-.6.3l-5 5c-.3.3-.8.5-1.2.5-.5 0-.9-.2-1.3-.5-.3-.3-.5-.8-.5-1.2 0-.5.2-.9.5-1.2l5.7-5.7c.8-.8 1.9-1.3 3.1-1.3 1.2 0 2.3.5 3.1 1.3.8.8 1.3 1.9 1.3 3.1s-.4 2.3-1.3 3.1l-6.1 6a6.42 6.42 0 0 1-4.6 1.9c-1.7 0-3.4-.7-4.6-1.9s-1.9-2.8-1.9-4.6c0-1.7.7-3.3 1.9-4.5l7.9-7.8c.2-.2.3-.4.3-.6 0-.2-.1-.5-.3-.6-.3-.3-.5-.4-.7-.4s-.5.1-.6.3L3.4 9c-.8.8-1.4 1.7-1.8 2.7-.4 1-.6 2-.6 3.1s.2 2.1.6 3.1c.4 1 1 1.9 1.8 2.7.8.8 1.7 1.4 2.7 1.8 1 .4 2 .6 3.1.6s2.1-.2 3.1-.6c1-.4 1.9-1 2.7-1.8l6.1-6c.6-.6 1-1.3 1.3-2 .3-.7.4-1.5.4-2.3.2-1.6-.4-3.2-1.6-4.3z"},null,-1),Fo=[Uo];function $o(e,t){return f(),w("svg",Io,[].concat(Fo))}var Do={render:$o},$n=function(){return R({name:"IconAttachment",component:Do})()},Lo={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ao=g("path",{d:"M670.344 369.644c-6.248-6.249-16.371-6.249-22.62 0L511.992 505.376 376.258 369.644c-6.247-6.249-16.386-6.249-22.62 0-6.248 6.247-6.248 16.37 0 22.619l135.733 135.732L353.64 663.73c-6.249 6.248-6.249 16.37 0 22.619 6.233 6.248 16.37 6.248 22.619 0l135.733-135.734 135.734 135.734c6.248 6.248 16.37 6.248 22.619 0s6.248-16.371 0-22.62L534.61 527.996l135.734-135.732c6.248-6.248 6.248-16.372-.001-22.62zM511.99 128.092c-212.026 0-383.906 171.881-383.906 383.907 0 212.027 171.88 383.908 383.906 383.908 212.027 0 383.923-171.881 383.923-383.908 0-212.026-171.896-383.907-383.923-383.907zm0 735.823c-194.36 0-351.914-157.556-351.914-351.915s157.556-351.914 351.914-351.914c194.345 0 351.915 157.555 351.915 351.914s-157.57 351.915-351.915 351.915z"},null,-1),Po=[Ao];function Oo(e,t){return f(),w("svg",Lo,[].concat(Po))}var Ro={render:Oo},Mo=function(){return R({name:"IconCloseCircle",component:Ro})()},No={viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},zo=g("path",{d:"M8.54 2.6c0-.28-.22-.5-.5-.5s-.5.22-.5.5v8.359l-2.02-2.01c-.19-.199-.51-.199-.71 0-.19.19-.19.51 0 .701l2.83 2.83c.2.2.51.2.71 0l2.83-2.83a.502.502 0 0 0 0-.7l-.07-.061a.492.492 0 0 0-.64.06l-1.93 1.93v-8.28ZM14 10.5c.27 0 .5.219.5.5v1.28c0 1.22-1 2.22-2.22 2.22H3.71c-1.22 0-2.21-1-2.21-2.22V11a.501.501 0 0 1 1 0v1.28c0 .67.54 1.22 1.21 1.22h8.57c.67 0 1.22-.55 1.22-1.22V11c0-.281.22-.5.5-.5Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1),xo=[zo];function Bo(e,t){return f(),w("svg",No,[].concat(xo))}var jo={render:Bo},ct=function(){return R({name:"IconDownload",component:jo})()},Ho={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Vo=g("path",{class:"file-cloudupload_svg__st0",d:"M22.3 5.1H11.5l-.6-1.9C10.7 2.5 10 2 9.3 2H1.7C.8 2 0 2.8 0 3.7v16.5c0 1 .8 1.7 1.7 1.7H13c.5 0 1-.5 1-1s-.5-.9-1-.9H2V7h20v3c0 .5.5 1 1 1s1-.5 1-1V6.8c0-.9-.8-1.7-1.7-1.7zM2 4h6.6L9 5H2V4zm13.9 12.5c.2 0 .4-.1.6-.2l1.7-1.5v6.5c0 .4.4.8.9.8s.9-.4.9-.8v-6.5l1.7 1.5c.2.2.4.2.6.2s.4-.1.6-.2c.3-.3.3-.8 0-1.1l-3.1-2.9c-.4-.2-.6-.3-.8-.3-.2 0-.4.1-.6.2l-3.1 2.9c-.3.3-.3.8 0 1.1.1.2.3.3.6.3z"},null,-1),Wo=[Vo];function Zo(e,t){return f(),w("svg",Ho,[].concat(Wo))}var Yo={render:Zo},Ht=function(){return R({name:"IconFileCloudupload",component:Yo})()},Ko={viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},qo=g("path",{d:"M8 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8Zm4.86 12.86a6.84 6.84 0 0 1-2.185 1.474c-.847.36-1.747.541-2.675.541a6.835 6.835 0 0 1-4.86-2.012 6.84 6.84 0 0 1-1.474-2.186A6.822 6.822 0 0 1 1.125 8a6.835 6.835 0 0 1 2.013-4.86 6.84 6.84 0 0 1 2.185-1.474A6.822 6.822 0 0 1 8 1.125a6.835 6.835 0 0 1 4.86 2.013 6.84 6.84 0 0 1 1.474 2.185c.36.849.541 1.749.541 2.677a6.835 6.835 0 0 1-2.014 4.86ZM7.92 10.374a.563.563 0 0 1-.56-.619c.075-.779.647-1.409 1.277-2.038C9.644 6.708 9.66 6.387 9.678 6.048a1.447 1.447 0 0 0-.412-1.08 1.756 1.756 0 0 0-1.27-.54h-.002a1.682 1.682 0 0 0-1.677 1.68.562.562 0 1 1-1.125 0c0-.749.29-1.452.819-1.981a2.785 2.785 0 0 1 1.98-.824 2.887 2.887 0 0 1 2.09.89c.502.529.758 1.209.72 1.915-.039.723-.26 1.294-1.37 2.403-.562.562-.917.984-.953 1.355a.563.563 0 0 1-.56.507Zm-.697 1.646a.677.677 0 1 0 1.353 0 .677.677 0 0 0-1.353 0Z","fill-rule":"nonzero"},null,-1),Go=[qo];function Qo(e,t){return f(),w("svg",Ko,[].concat(Go))}var Xo={render:Qo},Jo=function(){return R({name:"IconHelpQuery",component:Xo})()},er={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},tr=g("path",{class:"pause_svg__st0",d:"M17 4c-.6 0-1 .5-1 1v14c0 .5.5 1 1 1s1-.5 1-1V5c0-.5-.4-1-1-1zM7 4c-.6 0-1 .5-1 1v14c0 .5.5 1 1 1s1-.5 1-1V5c0-.5-.4-1-1-1z"},null,-1),nr=[tr];function or(e,t){return f(),w("svg",er,[].concat(nr))}var rr={render:or},Dn=function(){return R({name:"IconPause",component:rr})()},ir={viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},lr=g("path",{d:"M12 1.5c1.38 0 2.5 1.11 2.5 2.5v8a2.5 2.5 0 0 1-2.5 2.5H4c-1.39 0-2.5-1.12-2.5-2.5V4c0-1.39 1.11-2.5 2.5-2.5h8Zm-8 1h8.1c.78.05 1.4.7 1.4 1.5v7.01l-2.18-2.1c-.42-.41-1.1-.4-1.52.02l-.75.76c-.04.03-.08.03-.12 0l-2.7-2.66a1.08 1.08 0 0 0-1.51 0L2.5 9.19V4c0-.83.67-1.5 1.5-1.5ZM10.02 4c.83 0 1.5.67 1.5 1.5 0 .82-.67 1.5-1.5 1.5s-1.5-.68-1.5-1.5c0-.83.67-1.5 1.5-1.5Zm-.5 1.5c0-.28.23-.5.5-.5.28 0 .5.22.5.5 0 .27-.22.5-.5.5-.27 0-.5-.23-.5-.5Zm-4.1 2.25-2.91 2.81L2.5 12c0 .79.61 1.44 1.39 1.49l.11.01h8a1.5 1.5 0 0 0 1.44-1.11l-2.81-2.76c-.04-.03-.09-.03-.12 0l-.75.77c-.42.42-1.1.42-1.53.01l-2.7-2.66a.08.08 0 0 0-.11 0Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1),ar=[lr];function sr(e,t){return f(),w("svg",ir,[].concat(ar))}var dr={render:sr},cr=function(){return R({name:"IconPicture",component:dr})()},ur={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},pr=g("path",{class:"plus-circle_svg__st0",d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm7.1 19.1c-.9.9-2 1.6-3.2 2.1-1.2.5-2.5.8-3.9.8s-2.7-.3-3.9-.8c-1.2-.5-2.3-1.2-3.2-2.1-.9-.9-1.6-2-2.1-3.2-.5-1.2-.8-2.5-.8-3.9s.3-2.7.8-3.9C3.3 6.9 4 5.8 4.9 4.9c.9-.9 2-1.6 3.2-2.1C9.3 2.3 10.6 2 12 2s2.7.3 3.9.8c1.2.5 2.3 1.2 3.2 2.1.9.9 1.6 2 2.1 3.2.5 1.2.8 2.5.8 3.9s-.3 2.7-.8 3.9c-.5 1.2-1.2 2.3-2.1 3.2zM17 11h-4V7c0-.5-.5-1-1-1s-1 .5-1 1v4H7c-.5 0-1 .5-1 1s.6 1 1 1h4v4c0 .5.5 1 1 1s1-.5 1-1v-4h4c.5 0 1-.5 1-1s-.5-1-1-1z"},null,-1),hr=[pr];function fr(e,t){return f(),w("svg",ur,[].concat(hr))}var mr={render:fr},gr=function(){return R({name:"IconPlusCircle",component:mr})()},vr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},yr=g("path",{class:"refres_svg__st0",d:"M12.2 22.9c.5-.1.8-.5.7-1-.1-.5-.5-.8-1-.7-.4.1-.9.1-1.4.1-2.4 0-4.6-1-6.2-2.7S1.7 14.5 1.7 12s.9-4.8 2.6-6.5 3.9-2.7 6.2-2.7 4.6 1 6.2 2.7 2.6 4.1 2.6 6.5v.3l-1.9-2c-.3-.3-.9-.3-1.2 0-.3.3-.3.9 0 1.2l3.2 3.3c.3.3.9.3 1.2 0l3.2-3.3c.3-.3.3-.9 0-1.2-.3-.3-.9-.3-1.2 0L21 11.9c0-1.5-.3-2.9-.8-4.2-.5-1.3-1.3-2.5-2.2-3.5s-2.1-1.8-3.3-2.4c-1.4-.5-2.8-.8-4.2-.8s-2.8.3-4.1.9C5.2 2.4 4 3.2 3.1 4.2c-1 1-1.7 2.2-2.2 3.5C.3 9.1 0 10.5 0 12s.3 2.9.8 4.3c.5 1.3 1.3 2.5 2.2 3.5 1 1 2.1 1.8 3.3 2.4 1.3.6 2.7.9 4.1.9.7-.1 1.2-.1 1.8-.2z"},null,-1),wr=[yr];function Tr(e,t){return f(),w("svg",vr,[].concat(wr))}var br={render:Tr},Sr=function(){return R({name:"IconRefres",component:br})()},kr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{"enable-background":"new 0 0 16 16"},"xml:space":"preserve"},Er=g("rect",{style:{fill:"none"}},null,-1),_r=g("path",{class:"refresh_svg__st1",d:"M11.81 2.75a6.433 6.433 0 0 1 1.75 8.55l1.7-.45c.23-.06.46.05.56.25l.02.08c.07.25-.08.52-.34.58l-2.9.78a.467.467 0 0 1-.58-.34l-.78-2.9a.482.482 0 0 1 .93-.25l.5 1.84c1.56-2.42.97-5.67-1.41-7.38-2.47-1.78-5.91-1.23-7.71 1.22s-1.24 5.88 1.22 7.66c1.66 1.2 3.53 1.45 5.64.78.25-.08.52.06.61.3.08.25-.06.52-.3.61-2.4.78-4.58.47-6.48-.91C1.32 11.09.66 7.06 2.77 4.18 4.86 1.3 8.91.67 11.81 2.75z"},null,-1),Cr=[Er,_r];function Ir(e,t){return f(),w("svg",kr,[].concat(Cr))}var Ur={render:Ir},Fr=function(){return R({name:"IconRefresh",component:Ur})()},$r={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Dr=g("path",{class:"right_svg__st0",d:"M6 2v20l13-10z"},null,-1),Lr=[Dr];function Ar(e,t){return f(),w("svg",$r,[].concat(Lr))}var Pr={render:Ar},Ln=function(){return R({name:"IconRight",component:Pr})()},Or={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Rr=g("path",{class:"start-circle_svg__st0",d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm7.1 19.1c-.9.9-2 1.6-3.2 2.1-1.2.5-2.5.8-3.9.8s-2.7-.3-3.9-.8c-1.2-.5-2.3-1.2-3.2-2.1-.9-.9-1.6-2-2.1-3.2-.5-1.2-.8-2.5-.8-3.9s.3-2.7.8-3.9C3.3 6.9 4 5.8 4.9 4.9c.9-.9 2-1.6 3.2-2.1C9.3 2.3 10.6 2 12 2s2.7.3 3.9.8c1.2.5 2.3 1.2 3.2 2.1.9.9 1.6 2 2.1 3.2.5 1.2.8 2.5.8 3.9s-.3 2.7-.8 3.9c-.5 1.2-1.2 2.3-2.1 3.2zm-2.3-7.4-7-5.6c0-.1-.1-.1-.3-.1-.2 0-.5.2-.5.4v11.1c0 .3.3.5.5.5.1 0 .2 0 .3-.1l7-5.6c.3-.2.3-.4 0-.6z"},null,-1),Mr=[Rr];function Nr(e,t){return f(),w("svg",Or,[].concat(Mr))}var zr={render:Nr},xr=function(){return R({name:"IconStartCircle",component:zr})()},Br={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},jr=g("path",{class:"view_svg__st0",d:"M11.7 9.3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1s-1-.4-1-1v-3h-3c-.6 0-1-.4-1-1s.4-1 1-1h3v-3c0-.6.4-1 1-1s1 .4 1 1v3z"},null,-1),Hr=g("path",{class:"view_svg__st0",d:"M22.4 20.8 17.6 16c1.3-1.6 2.1-3.6 2.1-5.7 0-5-4-9-9-9s-9 4-9 9 4 9 9 9c2.2 0 4.2-.8 5.7-2.1l4.8 4.8c.2.2.4.2.6.2s.4-.1.6-.2c.3-.3.3-.8 0-1.2zm-9-4.1c-.9.4-1.8.5-2.7.5S8.8 17 8 16.7c-.8-.4-1.6-.9-2.2-1.5-.6-.6-1.1-1.4-1.5-2.2-.4-.9-.5-1.8-.5-2.7s.2-1.9.5-2.7c.3-.9.8-1.6 1.4-2.3s1.4-1.1 2.2-1.5c.9-.4 1.8-.5 2.7-.5s1.9.2 2.7.5c.8.4 1.6.9 2.2 1.5.6.6 1.1 1.4 1.5 2.2.4.9.5 1.8.5 2.7s-.2 1.9-.5 2.7c-.4.8-.9 1.6-1.5 2.2-.5.8-1.3 1.3-2.1 1.6z"},null,-1),Vr=[jr,Hr];function Wr(e,t){return f(),w("svg",Br,[].concat(Vr))}var Zr={render:Wr},Yr=function(){return R({name:"IconView",component:Zr})()},Kr={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},qr=g("path",{d:"M2.857 10.25a.75.75 0 0 1 .744.648l.006.102v2a.75.75 0 0 1-1.493.102L2.108 13v-2a.75.75 0 0 1 .75-.75Zm3.857-2.5a.75.75 0 0 1 .743.648l.007.102v7a.75.75 0 0 1-1.493.102l-.007-.102v-7a.75.75 0 0 1 .75-.75Zm11.571 1a.75.75 0 0 1 .743.648l.007.102v5a.75.75 0 0 1-1.493.102l-.007-.102v-5a.75.75 0 0 1 .75-.75Zm2.858 2a.75.75 0 0 1 .743.648l.007.102v1a.75.75 0 0 1-1.494.102l-.006-.102v-1a.75.75 0 0 1 .75-.75Zm-6.714-4a.75.75 0 0 1 .743.648l.007.102v9a.75.75 0 0 1-1.493.102l-.007-.102v-9a.75.75 0 0 1 .75-.75Zm-3.858-3a.75.75 0 0 1 .744.648l.006.102v15a.75.75 0 0 1-1.493.102l-.007-.102v-15a.75.75 0 0 1 .75-.75Z"},null,-1),Gr=[qr];function Qr(e,t){return f(),w("svg",Kr,[].concat(Gr))}var Xr={render:Qr},An=function(){return R({name:"IconAudio",component:Xr})()},Jr={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ei=g("path",{d:"M18.006 11.41a.75.75 0 0 1 .75.75 6.757 6.757 0 0 1-6.005 6.715V20.5h1.248a.75.75 0 0 1 .101 1.494L14 22h-3.997a.75.75 0 0 1-.102-1.493l.102-.007h1.248v-1.625a6.758 6.758 0 0 1-6.006-6.715.75.75 0 1 1 1.5 0 5.257 5.257 0 0 0 10.512 0 .75.75 0 0 1 .75-.75ZM12.002 2a3.833 3.833 0 0 1 3.833 3.833V12a3.833 3.833 0 0 1-7.667 0V5.833A3.833 3.833 0 0 1 12 2Zm0 1.5a2.333 2.333 0 0 0-2.334 2.333V12a2.333 2.333 0 0 0 4.667 0V5.833A2.333 2.333 0 0 0 12 3.5Z"},null,-1),ti=[ei];function ni(e,t){return f(),w("svg",Jr,[].concat(ti))}var oi={render:ni},Pn=function(){return R({name:"IconMic",component:oi})()},ri={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},ii=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{fill:"#FFF",d:"M18.805 22 19 19.989h-5.674v-4.274h5.079V13.85h-5.08V9.992h5.387L18.935 8H11v14z"})],-1),li=[ii];function ai(e,t){return f(),w("svg",ri,[].concat(li))}var si={render:ai},On=function(){return R({name:"IconExcelType",component:si})()},di={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},ci=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M19.583 10.21c.575 0 1.042.467 1.042 1.04v.417h-5.28a.827.827 0 0 1-.59-.243l-1.213-1.215h6.041Zm2.292 1.477v-.436a2.294 2.294 0 0 0-2.292-2.292h-7.291l-.381-.381a.827.827 0 0 0-.59-.245H8.334c-.51 0-.962.238-1.269.602A1.65 1.65 0 0 0 6.667 10v9.167c0 1.375 1.126 2.5 2.5 2.5h11.666c.766 0 1.445-.356 1.905-.902a2.47 2.47 0 0 0 .595-1.598v-5.834c0-.845-.64-1.541-1.458-1.646Z",fill:"#FFF"})],-1),ui=[ci];function pi(e,t){return f(),w("svg",di,[].concat(ui))}var hi={render:pi},Rn=function(){return R({name:"IconFileType",component:hi})()},fi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},mi=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M20.774 18.946a5.662 5.662 0 0 1-3.288-1.337c-1.821.4-3.554.98-5.287 1.693C10.82 21.752 9.533 23 8.422 23c-.222 0-.489-.045-.667-.178A1.313 1.313 0 0 1 7 21.619c0-.401.089-1.515 4.31-3.342.978-1.782 1.733-3.609 2.355-5.525-.533-1.069-1.688-3.698-.889-5.034.267-.49.8-.758 1.378-.713.444 0 .888.223 1.155.579.578.802.533 2.495-.222 4.99a13.434 13.434 0 0 0 2.755 3.565c.933-.179 1.866-.312 2.8-.312 2.088.044 2.399 1.024 2.354 1.604 0 1.515-1.466 1.515-2.222 1.515ZM8.333 21.708l.133-.045c.622-.222 1.111-.668 1.467-1.247-.667.267-1.2.713-1.6 1.292Zm5.91-13.367h-.134c-.044 0-.133 0-.177.045-.178.757-.045 1.56.266 2.272.267-.757.267-1.56.045-2.317Zm.31 6.46-.044.09-.044-.045c-.4 1.025-.844 2.05-1.333 3.03l.089-.044v.089a25.823 25.823 0 0 1 3.021-.891l-.044-.045h.133a13.645 13.645 0 0 1-1.777-2.183Zm6.044 2.362c-.4 0-.756 0-1.156.09.445.222.89.311 1.333.356.311.044.623 0 .89-.09 0-.133-.179-.356-1.067-.356Z",fill:"#FFF"})],-1),gi=[mi];function vi(e,t){return f(),w("svg",fi,[].concat(gi))}var yi={render:vi},Mn=function(){return R({name:"IconPdfType",component:yi})()},wi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Ti=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M7 10v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2Zm14.165 2.632a1 1 0 0 1 .335.747v6.616a.5.5 0 0 1-.5.5H10.468a.5.5 0 0 1-.407-.79l2.37-3.338a1 1 0 0 1 1.449-.195l1.249 1.02a.5.5 0 0 0 .69-.055l3.934-4.423a1 1 0 0 1 1.412-.082ZM10.5 10a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#FFF"})],-1),bi=[Ti];function Si(e,t){return f(),w("svg",wi,[].concat(bi))}var ki={render:Si},Nn=function(){return R({name:"IconPictureType",component:ki})()},Ei={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},_i=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M13.851 22v-5.395c.67.129 1.267.193 1.787.193.953 0 1.796-.185 2.53-.556a4.1 4.1 0 0 0 1.716-1.595c.41-.693.616-1.503.616-2.432 0-1.366-.458-2.41-1.373-3.132S16.892 8 15.167 8H11.5v14h2.351Zm1.354-7.048c-.313 0-.765-.049-1.354-.145v-4.97h1.28c.99 0 1.74.19 2.251.57.511.38.767 1.003.767 1.866 0 .851-.25 1.51-.752 1.978-.502.467-1.232.7-2.192.7Z",fill:"#FFF"})],-1),Ci=[_i];function Ii(e,t){return f(),w("svg",Ei,[].concat(Ci))}var Ui={render:Ii},zn=function(){return R({name:"IconPptType",component:Ui})()},Fi={class:"text-type_svg__tiny-icon-text-type",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},$i=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{fill:"#FFF",d:"M16.3 22.5V9.665h4.46L21 7.5H9.23L9 9.665h4.69V22.5z"})],-1),Di=[$i];function Li(e,t){return f(),w("svg",Fi,[].concat(Di))}var Ai={render:Li},xn=function(){return R({name:"IconTextType",component:Ai})()},Pi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Oi=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M23.257 10.647a1.519 1.519 0 0 0-1.507-.042l-2.035 1.079v-.668a2.516 2.516 0 0 0-2.51-2.516H8.51A2.516 2.516 0 0 0 6 11.016v7.968A2.516 2.516 0 0 0 8.51 21.5h8.695a2.516 2.516 0 0 0 2.51-2.516v-.65l2.035 1.06c.479.255 1.041.24 1.507-.041.465-.281.743-.773.743-1.318v-6.07c0-.545-.278-1.037-.743-1.318m-7.66 4.986-3.388 1.769a.87.87 0 0 1-.806 0A.711.711 0 0 1 11 16.77v-3.54c0-.263.15-.499.403-.63a.863.863 0 0 1 .806 0l3.388 1.769A.713.713 0 0 1 16 15c0 .264-.15.5-.403.633",fill:"#FFF"})],-1),Ri=[Oi];function Mi(e,t){return f(),w("svg",Pi,[].concat(Ri))}var Ni={render:Mi},Bn=function(){return R({name:"IconVideoType",component:Ni})()},zi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},xi=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"m12.077 21.5 2.174-7.532c.155-.527.287-1.009.397-1.446.11-.437.224-.937.343-1.5a27.753 27.753 0 0 0 .74 3l2.21 7.478h2.299L24 8.5h-2.237l-2.076 8.044a34.23 34.23 0 0 0-.561 2.29c-.095-.653-.291-1.46-.588-2.424L16.185 8.5h-2.317l-2.236 7.82c-.19.634-.404 1.472-.642 2.514a22.638 22.638 0 0 0-.517-2.37L8.353 8.5H6l3.805 13h2.272Z",fill:"#FFF"})],-1),Bi=[xi];function ji(e,t){return f(),w("svg",zi,[].concat(Bi))}var Hi={render:ji},jn=function(){return R({name:"IconWordType",component:Hi})()},Vi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Wi=_o('<g><rect width="30" height="30" rx="2"></rect><g transform="translate(11 4)" fill="#FFF"><rect width="4" height="4" rx=".5"></rect><rect x="4" y="4" width="4" height="4" rx=".5"></rect><rect y="8" width="4" height="4" rx=".5"></rect><path d="M7 14a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h6Zm-.5 4h-5a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Z"></path></g></g>',1),Zi=[Wi];function Yi(e,t){return f(),w("svg",Vi,[].concat(Zi))}var Ki={render:Yi},Hn=function(){return R({name:"IconZipType",component:Ki})()},qi={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Gi=g("path",{d:"M512.331 932c-8.559.045-16.764-3.216-22.674-9.014-6.09-5.495-9.448-13.126-9.284-21.047a28.477 28.477 0 0 1 2.53-11.383c1.663-3.626 3.896-6.95 6.754-9.865 12.78-11.116 32.526-11.116 45.308 0a34.928 34.928 0 0 1 6.784 9.865 28.953 28.953 0 0 1 2.562 11.383c-.134 16.531-14.367 29.907-31.98 30.06m255.64-150.056c-11.424 0-21.979-5.726-27.688-15.01-5.706-9.279-5.706-20.718 0-30.005 5.709-9.288 16.264-15.002 27.687-15.002 105.928 0 191.797-80.604 191.797-180.035 0-99.432-85.87-180.034-191.797-180.034h-28.192l-5.639-26.128c-13.803-105.132-108.95-184.11-221.794-184.11-112.853 0-207.989 78.978-221.792 184.11l-3.648 27.417-29.426-1.15h-.18c-105.873-.169-191.853 80.258-192.03 179.638-.18 99.388 85.501 180.085 191.382 180.254 17.232.542 30.91 13.822 30.91 30.012s-13.678 29.462-30.91 30.004C119.913 782.412 6.968 681.829.308 553.63c-6.66-128.197 95.332-238.62 231.467-250.604C261.125 179.697 377.717 92 512.345 92c134.63 0 251.222 87.697 280.57 211.027 67.49 6.105 129.625 37.128 172.747 86.247 43.115 49.111 63.673 112.292 57.153 175.644-12.633 123.191-122.995 217.17-254.845 217.025"},null,-1),Qi=g("path",{d:"M511.99 822c-7.954.007-15.584-3.034-21.2-8.448-5.624-5.421-8.78-12.778-8.773-20.436V475.888c-.366-10.553 5.265-20.463 14.696-25.848 9.424-5.387 21.148-5.387 30.58 0 9.424 5.385 15.063 15.295 14.69 25.848v317.228c-.038 15.946-13.452 28.864-29.994 28.884"},null,-1),Xi=g("path",{d:"M631.81 603a30.144 30.144 0 0 1-21.274-8.715l-99.075-98.432-99.105 98.468c-11.893 10.721-30.166 10.282-41.53-.99-11.356-11.276-11.813-29.43-1.029-41.255l105.33-104.612c20.332-19.285 52.336-19.285 72.67 0l105.292 104.612c8.673 8.508 11.298 21.39 6.622 32.578-4.674 11.189-15.707 18.439-27.902 18.345"},null,-1),Ji=[Gi,Qi,Xi];function el(e,t){return f(),w("svg",qi,[].concat(Ji))}var tl={render:el},Vn=function(){return R({name:"IconFileuploadPro",component:tl})()},nl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{"enable-background":"new 0 0 16 16"},"xml:space":"preserve"},ol=g("rect",{style:{fill:"none"}},null,-1),rl=g("path",{class:"document_svg__st1",d:"m13.4 5.6-4-4c-.1 0-.3-.1-.4-.1H5C3.6 1.5 2.5 2.6 2.5 4v8c0 1.4 1.1 2.5 2.5 2.5h6c1.4 0 2.5-1.1 2.5-2.5V6c0-.1-.1-.3-.1-.4zm-.9 6.4c0 .8-.7 1.5-1.5 1.5H5c-.8 0-1.5-.7-1.5-1.5V4c0-.8.7-1.5 1.5-1.5h3.8l3.7 3.7V12zm-7-4.5h5c.3 0 .5.2.5.5s-.2.5-.5.5h-5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5zM11 11c0 .3-.2.5-.5.5h-5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h5c.3 0 .5.2.5.5z"},null,-1),il=[ol,rl];function ll(e,t){return f(),w("svg",nl,[].concat(il))}var al={render:ll},sl=function(){return R({name:"IconDocument",component:al})()};const dl=()=>e=>parseInt(e,10),cl=({props:e,api:t,parent:n})=>(o,r)=>{if(o.preventDefault(),n.state.isEdm){const{downloadFile:l}=t.getApi();e.openDownloadFile&&l&&l(r)}else e.openDownloadFile&&t.downloadFile(r);return e.handlePreview&&e.handlePreview(r)},Wn=e=>t=>{const n=t&&t.response&&t.response.data;let o;if(Array.isArray(n))o=n[0];else if(n&&typeof n=="object")for(let r in n){o=n[r];break}if(o)e.getFileDownloadUrl().then(r=>{window.open(ae.filterUrl(r+"&id="+o.attachmentId+"&type=AttachmentDemo")).opener=null});else if(t.url)window.open(ae.filterUrl(t.url)).opener=null;else throw new Error("[TINY Error][FileUpload]file.url must not be empty")},ul=e=>t=>{e.startPostion=t,e.shows=!0},pl=e=>t=>{e("remove",t)},hl=({state:e})=>({file:t})=>{e.currentFile=t,e.showPanel=!0},fl=({emit:e,props:t,parent:n})=>o=>{n.state.isEdm?e("start",[o&&o.raw],"",!0):t.handleReUpload&&t.handleReUpload(o)},ml=({type:e,el:t},n)=>t&&t.addEventListener(e,n),it=({type:e,el:t},n)=>t&&t.removeEventListener(e,n),gl=({vm:e,api:t,props:n})=>({file:o,index:r,type:l})=>{if(n.isHwh5)return n.triggerPlay(o,l,"play");const i=e.$refs[l+(o.uid||r)]&&e.$refs[l+(o.uid||r)][0];if(o.isPlay)return t.pause({file:o,index:r,type:l});i&&i.play&&(o.playEvent=()=>{o&&(o.isPlay=!1,it({type:"ended",el:i},o.playEvent))},o.el=i,it({type:"ended",el:i},o.playEvent),ml({type:"ended",el:i},o.playEvent),e.$set(o,"isPlay",!0),i.play())},vl=({vm:e,props:t})=>({file:n,index:o,type:r})=>{if(t.isHwh5)return t.triggerPlay(n,r,"pause");const l=e.$refs[r+(n.uid||o)]&&e.$refs[r+(n.uid||o)][0];l&&l.pause&&(it({type:"ended",el:l},n.playEvent),n.isPlay=!1,l.pause())},yl=({vm:e})=>({e:t,file:n})=>{var o,r;e.$set(n,"totalSecond",parseInt((o=t.target)==null?void 0:o.duration)),e.$set(n,"currentSecond",parseInt((r=t.target)==null?void 0:r.currentTime))},wl=()=>({e,file:t})=>{var n;t.currentSecond=parseInt((n=e.target)==null?void 0:n.currentTime)},Tl=()=>({file:e})=>e.name&&e.name.split(".")[e.name.split(".").length-1].toLowerCase(),bl=({constants:e})=>({type:t})=>{const{EXCEL:n,FILE:o,PDF:r,PICTURE:l,PPT:i,TEXT:a,WORD:s,ZIP:c,VIDEO:u,AUDIO:p}=e.FILE_TYPE;let h={[n]:{name:"icon-excel-type",color:"#09AA71"},[o]:{name:"icon-file-type",color:"#09AA71"},[r]:{name:"icon-pdf-type",color:"#E02128"},[l]:{name:"icon-picture-type",color:"#5531EB"},[i]:{name:"icon-ppt-type",color:"#E02128"},[a]:{name:"icon-text-type",color:"#2CB8C9"},[s]:{name:"icon-word-type",color:"#0067D1"},[c]:{name:"icon-zip-type",color:"#2CB8C9"},[u]:{name:"icon-video-type",color:"#0067D1"},[p]:{name:"icon-audio",color:"#5531EB"},default:{name:"icon-other-type",color:"#9185F0"}};for(const T in h)if(Object.hasOwnProperty.call(h,T)){const m=h[T];delete h[T],T.split("/").forEach(y=>h[y]=m)}return h[t]||h.default},Sl=({emit:e})=>({file:t})=>e("remove",t),kl=({vm:e,nextTick:t,props:n,constants:o})=>()=>{const{listType:r}=n,{LIST_TYPE:l}=o;t(()=>{const i=e.$refs.uploadList,a=i&&i.querySelectorAll('[data-tag="tiny-upload-list-item"]');if(!(!i||!(a&&a[0]))&&(r===l.TEXT||r===l.SAAS)){const{minWidth:s}=window.getComputedStyle(a&&a[0]),c=8,u=Math.floor(i.offsetWidth/(parseFloat(s)+c));Array.from(a).forEach((p,h)=>{!((h+1)%u)||u===1?(p.style.marginRight=0,p.style.width=`${100/u}%`):(p.style.marginRight=`${c}px`,p.style.width=`calc(${100/u}% - ${c}px)`)})}})},El=({props:e,constants:t,emit:n})=>()=>{const{SUCESS:o}=t.FILE_STATUS,r=e.files.every(({status:l})=>l===o||!l);n("update:visible",!r)},_l=({props:e,constants:t})=>()=>{const{SUCESS:n}=t.FILE_STATUS;let o=e.files;return e.mode===t.MODE.BUBBLE&&e.listType===t.LIST_TYPE.TEXT&&(o=e.files.filter(({status:r})=>r!==n)),o},Cl=({state:e,constants:t})=>n=>{const{SOURCE_AUDIO:o}=t.SOURCE_TYPE;n===o?e.showAudioPanel=!0:e.showTriggerPanel=!0,e.triggerClickType=n},Il=({state:e,props:t})=>(n,o)=>new Promise(r=>{let l=t.triggerClick(n,e.triggerClickType,o);l&&l.then?l.then(()=>{e.showTriggerPanel=!1,r()}).catch(()=>{e.showTriggerPanel=!1,e.showAudioPanel=!1}):(e.showTriggerPanel=!1,r())}),Ul=({api:e,vm:t})=>()=>{const n=t.$refs.uploadList;n&&(yo(n,e.calcUploadListLiWidth),t._removeResizeListener=()=>wo(n,e.calcUploadListLiWidth))},Fl=({props:e,vm:t})=>()=>{t._removeResizeListener&&(t._removeResizeListener(),t._removeResizeListener=null),e.files.forEach(n=>{it({type:"ended",el:n.el},n.playEvent),delete n.playEvent,delete n.isPlay,delete n.el})};let $t=null;const H=(e,t)=>e||(()=>t?Promise.reject(new Error(`[TINY Error][FileUpload] Prop ${t} is mandatory when the framework service is not used`)):Promise.reject(new Error("[TINY Error][FileUpload] Prop action is mandatory when the framework service is not used"))),Zn=({props:e,service:t})=>{const{network:n={},common:o={}}=t||{},{request:r,get:l,post:i,all:a,spread:s,CancelToken:c={}}=n;let u;if(Dt(e.hwh5))r?u=e.httpRequest||r:u=e.httpRequest||mn;else{const{HWH5:p}=e.hwh5,{uploadToEDM:h}=p();u=e.httpRequest||h}return{get:H(l),post:H(i),request:H(r),all:H(a),spread:H(s),cancelToken:H(c.source),getSingleUploadUrl:H(o.getSingleUploadUrl),getFileUploadUrl:H(o.getFileUploadUrl),getFileDownloadUrl:H(o.getFileDownloadUrl),getSingleDownloadUrl:H(o.getSingleDownloadUrl),getPackageDownloadUrl:H(o.getPackageDownloadUrl),getAsyncPackageDownload:H(o.getAsyncPackageDownload),getLargeFileInitUrl:H(o.getLargeFileInitUrl),getChunkUploadUrl:H(o.getChunkUploadUrl),getPreviewUrl:H(o.getPreviewUrl),getDocumentInfoUrl:H(o.getDocumentInfoUrl),getPreviewUrlBatch:H(o.getPreviewUrlBatch),httpRequest:H(u,"httpRequest")}},$l=({props:e,state:t})=>()=>e.disabled||(t.form||{}).disabled,Dl=({state:e,constants:t})=>()=>e.uploadingFiles.reduce((n,o)=>n+o.status!==t.FILE_STATUS.FAIL?o.size:0,0),Ll=({constants:e,state:t,api:n})=>o=>{[e.LIST_TYPE.PICTURE_CARD,e.LIST_TYPE.PICTURE,e.LIST_TYPE.PICTURE_SINGLE,e.LIST_TYPE.DRAG_SINGLE].includes(o)&&(t.uploadFiles=t.uploadFiles.map(r=>{if(r.type=n.getFileSourceType({file:r}),!r.url&&r.raw)try{r.url=URL.createObjectURL(r.raw)}catch{return null}return r}))},Al=({constants:e,state:t,props:n,api:o})=>r=>{let l=r&&r.map(i=>(i.uid=i.uid||Date.now()+t.tempIndex++,i.status=i.status||e.FILE_STATUS.SUCESS,i));[e.LIST_TYPE.PICTURE_SINGLE,e.LIST_TYPE.DRAG_SINGLE].includes(n.listType)&&(l=l.slice(0,1)),t.uploadFiles=l},Pl=({flag:e,doUpload:t,file:n})=>!e&&t(n),Ol=({before:e,rawFile:t,file:n,doUpload:o,autoRemove:r,api:l})=>{e.then(i=>{const a=Object.prototype.toString.call(i);if(a==="[object File]"||a==="[object Blob]"){a==="[object Blob]"&&(i=new File([i],t.name,{type:t.type}));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);n.raw=i}o(n)},()=>{r&&(Array.isArray(t)?t.forEach(i=>l.handleRemove(null,i)):l.handleRemove(null,t))})},Yn=({file:e})=>{const{name:t,url:n}=e;let o="";return t&&/\.[^.]+$/.test(t)?o=t.split(".")[t.split(".").length-1].toLowerCase():n&&/\.[.]+$/.test(n)&&(o=n.split(".")[n.split(".").length-1].toLowerCase()),o},Qt=({api:e,file:t,autoRemove:n})=>{if(n){const o=t.raw;Array.isArray(o)?o.forEach(r=>e.handleRemove(null,r)):e.handleRemove(null,o)}},Rl=({props:e,api:t,Modal:n,constants:o,t:r,state:l})=>(i,a,s)=>{if(l.isEdm&&i.name.length>255)return Qt({api:t,file:i,autoRemove:a}),n.message({message:`${r(o.EDM.THEFILENAME)}"${i.name}"${r(o.EDM.FILENAMEEXCEEDS)}`,status:"warning"});if(i){let u=!0;const p=l.isEdm?l.accept:e.accept,h=o.FILE_TYPE[l.triggerClickType.toUpperCase()],T=Yn({file:i});if(p&&!p.split(",").some(y=>y.toLowerCase()===o.IMAGE_TYPE?o.FILE_TYPE.PICTURE.split("/").includes(T):new RegExp(`(${y.trim()})$`,"i").test(i.name))&&(u=!1),l.triggerClickType&&h&&!h.split("/").includes(T)&&(u=!1),!u)return Qt({api:t,file:i,autoRemove:a}),n.message({message:T?r(o.EDM.notSupport,{format:T}):r(o.EDM.NOT_SUPPORT_NO_SUFFIX),status:"warning"})}let c=typeof e.beforeUpload=="function";if(Pl({flag:c,doUpload:s,file:i}),c){const{rawFile:u=i.raw,before:p=e.beforeUpload(u)}={};p&&p.then?Ol({before:p,rawFile:u,file:i,doUpload:s,autoRemove:a,api:t}):p!==!1?s(i):a&&(Array.isArray(u)?u.forEach(h=>t.handleRemove(null,h)):t.handleRemove(null,u))}},Ml=({state:e,constants:t,vm:n,Modal:o,api:r,t:l})=>(i,a)=>{if(e.isHwh5){n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(i.raw);return}i.size>e.docSize&&i.size>e.chunkSize?(i.isLargeFile=!0,a&&e.uploadFiles.forEach(s=>{s.cacheSign===i.cacheSign&&(s.percentage=0)}),r.largeDocumentUpload(i),o.message({message:`${i.name}${l(t.EDM.LARGEFILEKEY)}`,status:"warning"})):n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(i.raw)},Nl=(e,t)=>{const n=e.name.lastIndexOf("."),o=e.name.length;t.fileType=e.name.substring(n+1,o);const r=e.size/1024;if(r<1024)t.size=Math.round(r*10**1)/10**1+"KB";else{const l=r/1024;t.size=Math.round(l*10**1)/10**1+"MB"}},zl=({props:e,state:t,api:n,constants:o,Modal:r,t:l})=>i=>{if([void 0,null].includes(i.size))return!0;let a=0;if(Array.isArray(e.fileSize)&&e.fileSize[1]?a=t.isEdm?Math.min(t.singleMaxSize,e.fileSize[1]/1024):Math.max(e.fileSize[0]/1024,e.fileSize[1]/1024):a=t.isEdm?Math.min(t.singleMaxSize):e.fileSize/1024,(t.isEdm||Array.isArray(e.fileSize)&&e.fileSize[1])&&!isNaN(Number(a))&&i.size>a*1024*1024)return r.message({message:l(o.EDM.EXCEED,{fileName:i.name,maxSize:n.formatFileSize(Number(a*1024*1024))}),status:"warning"}),!1;if(i.size<=0)return r.message({message:l(o.EDM.FILEEMPTY),status:"warning"}),!1;const s=e.fileSize&&(e.fileSize[0]||e.fileSize)||0;return i.size<=s*1024?(r.message({message:`${l(o.EDM.SIZE,{fileName:i.name,minSize:n.formatFileSize(Number(s),"KB"),sizeUnit:""})}`,status:"warning"}),!1):!0},xl=({api:e,constants:t,emit:n,props:o,state:r,mode:l})=>(i,a,s)=>{!s&&(i.uid=Date.now()+r.tempIndex++);let c={status:t.FILE_STATUS.READY,name:i.name,size:i.size};if(Object.assign(c,{percentage:0,uid:i.uid,raw:i,response:{}}),c.type=e.getFileSourceType({file:c}),r.isEdm){let u={serverName:"",docRelativePath:"",docId:"",docVersion:"",cacheSign:i.uid};c=Object.assign(c,u),o.edm.upload.isFolder&&i.webkitRelativePath&&(c.path=i.webkitRelativePath.match(/.*\//g)[0])}if(r.cacheDocuments[c.uid]=c,l==="mobile"&&Nl(i,c),[t.LIST_TYPE.PICTURE_CARD,t.LIST_TYPE.PICTURE,t.LIST_TYPE.PICTURE_SINGLE,t.LIST_TYPE.DRAG_SINGLE].includes(o.listType))try{r.isHwh5?c.url=i.filePath:c.url=URL.createObjectURL(i)}catch{return}if(r.isEdm&&r.isSuccess){if(!e.properFileSize(c))return;if(r.updateId=a||o.edm.updateId||"",s){const p=r.uploadFiles.findIndex(h=>h.uid===c.uid);r.uploadFiles.splice(p,1)}else if(r.updateId){const p=r.uploadFiles.findIndex(h=>h.docId===a);r.uploadFiles.splice(p,1,c),n("change",c,r.uploadFiles);return}}!r.isEdm&&!e.properFileSize(c)||(r.uploadFiles.push(c),r.currentUploadingFileUids.push(c.uid),n("change",c,r.uploadFiles))},Bl=({emit:e,Modal:t,constants:n,t:o,state:r})=>({file:l,showTips:i})=>(i&&t.message({message:`${o(n.EDM.CALCHASH)}`,status:"warning"}),new Promise(a=>{const s=new FileReader;s.readAsArrayBuffer(l.raw),s.onload=async c=>{if(l.status===n.FILE_STATUS.FAIL)return;const u=gn(c.target&&c.target.result);l.hash=l.raw.hash=u,a(u),e("hash-progress",100)},s.onerror=c=>{l.status=n.FILE_STATUS.FAIL,e("error",c,l,r.uploadFiles)}})),jl=(e,t)=>{const n=t&&t.fileMap;return e.map(o=>{if(o instanceof File)return o;let r,l={};lt(o)?(r=o.url,l=o):r=o;const[i,a]=r.match(/[^/]*$/),[s]=r.match(/\.[^.]*$/),c=r.substring(0,a),u=xt(de({},l),{type:s,name:i,filePath:c,webkitRelativePath:c});return typeof n=="function"?n(u):u})},Hl=({api:e,constants:t,props:n,state:o,vm:r})=>(l,i,a=!1)=>{o.isHwh5&&(l=jl(l,n.hwh5)),o.currentUploadingFileUids=[],l.forEach(u=>e.addFileToList(u,i,a));const{UPLOADING:s,READY:c}=t.FILE_STATUS;if(o.uploadingFiles=o.uploadFiles.filter(u=>[s,c].includes(u.status)),o.isEdm&&o.isSuccess&&l.forEach(u=>{const p=e.getFile(u);!p||e.beforeUpload(p,!0,h=>{typeof n.edm.upload.loading=="function"&&n.edm.upload.loading(h),new Promise(T=>{if(o.isHwh5)return T();let m=!1;if(n.edm.isCheckCode!==!0)return T();if(h.size>o.docSize&&h.size>o.chunkSize)if(o.isEntireCheckCode)m=!0;else return T();e.getFileHash({file:h,showTips:m}).then(y=>T(y))}).then(()=>{if(n.autoUpload){const T={token:n.edm.upload.token,file:h,type:"upload"};e.getToken(T).then(m=>{m&&(h.status=t.FILE_STATUS.UPLOADING,e.startUpload(h,!0))})}})})}),!o.isEdm&&n.autoUpload)if(n.multiple&&n.mergeService){const u=p=>r.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(p.raw);l.length&&e.beforeUpload({raw:l},!0,u)}else l.forEach(u=>{const p=e.getFile(u);if(!p)return;const h=T=>r.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(T.raw);e.beforeUpload(p,!0,h)})},Vl=({state:e,constants:t})=>()=>{let n;if(e.isHwh5){const r=e.uploadingFiles.reduce((l,i)=>{const a=i.status!==t.FILE_STATUS.FAIL?i.percentage/100:0;return l+a},0);n=Math.floor(r/e.uploadingFiles.length*100)}else{const r=e.uploadingFiles.reduce((l,i)=>{const a=i.status!==t.FILE_STATUS.FAIL?i.size*i.percentage/100:0;return l+a},0);n=Math.floor(r/e.uploadingSize*100)}n=Math.min(n,100);const o=e.uploadingFiles.filter(r=>r.percentage===100);return{percentage:n,uploadList:e.uploadingFiles,uploadedCount:o.length}},Wl=({api:e,constants:t,emit:n,state:o})=>(r,l)=>{if(Array.isArray(l))o.uploadFiles.forEach(i=>{l.some(a=>i.uid===a.uid)&&(i.status=t.FILE_STATUS.UPLOADING,r.lengthComputable&&(i.percentage=Math.floor(r.loaded*100/r.total)||0),n("progress",i,o.uploadFiles,e.calcUploadingFilesInfo()))});else{const i=e.getFile(l);if(i)if(i.status=t.FILE_STATUS.UPLOADING,o.isHwh5){const{progress:a}=JSON.parse(r);i.percentage=a,i.percentage>=100&&(i.isFinished=!0),n("progress",i,o.uploadFiles,e.calcUploadingFilesInfo())}else r.lengthComputable&&!i.isLargeFile&&(i.percentage=Math.floor(r.loaded*100/r.total)||0,i.percentage>=100&&(i.isFinished=!0),n("progress",i,o.uploadFiles,e.calcUploadingFilesInfo()))}},Zl=({api:e,constants:t,emit:n,state:o,props:r,Modal:l,t:i})=>(a,s)=>{var c;const u=o.uploadFiles.filter(p=>o.currentUploadingFileUids.includes(p.uid));if(Array.isArray(s))o.uploadFiles.forEach(p=>{s.some(h=>p.uid===h.uid)&&(p.status=t.FILE_STATUS.SUCESS,p.percentage=100,p.response=a,n("success",a,p,u),n("change",p,o.uploadFiles),delete p.cancelToken)});else{const p=e.getFile(s),h=(c=a==null?void 0:a.data)==null?void 0:c.status,{STATUS_SPECIAL_CHARACTERS:T,NOT_SUPPORT_SPECIAL_CHARACTERS:m}=t.EDM;if(p&&delete p.cancelToken,r.edm.upload&&p&&a.data&&h!==200){h===T&&l.message({message:`${i(m)}`,status:"warning"}),p.status=t.FILE_STATUS.FAIL,n("error",a,p,o.uploadFiles);return}if(p){if(p.status=t.FILE_STATUS.SUCESS,p.percentage=100,p.isFinished||n("progress",p,o.uploadFiles,e.calcUploadingFilesInfo()),p.isLargeFile&&delete a.config,p.response=a,o.isEdm){const y=o.isHwh5?a:a.data.result;if(!y)return;p.serverName=y.serverName,p.docRelativePath=y.docRelativePath,p.docId=y.docId,p.docVersion=y.version,p.docSize=y.docSize,p.isLargeFile&&delete p.raw,Object.assign(p,y)}n("success",a,p,u),n("change",p,o.uploadFiles)}}e.clearUploadingFiles()},Yl=({api:e,constants:t,emit:n,state:o,props:r})=>(l,i)=>{const a=e.getFile(i);!a||(a.status=t.FILE_STATUS.FAIL,a.percentage=100,!o.isEdm&&!r.reUploadable&&o.uploadFiles.splice(o.uploadFiles.indexOf(a),1),e.clearUploadingFiles(),n("error",l,a,o.uploadFiles),n("change",a,o.uploadFiles))},Kl=({api:e,emit:t,props:n,state:o,constants:r})=>(l,i)=>{i&&(l=e.getFile(i));let a=()=>{e.abort(l);let s=o.uploadFiles;s.splice(s.indexOf(l),1),t("remove",xt(de({},l),{status:r.FILE_STATUS.FAIL}),s)};if(!n.beforeRemove)a();else if(typeof n.beforeRemove=="function"){const s=n.beforeRemove(l,o.uploadFiles);s&&s.then?s.then(()=>{a()},()=>{}):s!==!1&&a()}},ql=({vm:e,constants:t})=>n=>{const{READY:o}=t.FILE_STATUS;n.status=o,n.percentage=0,e.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(n.raw)},Gl=e=>t=>{t.forEach(n=>{n.status==="fail"&&e.handleReUpload(n)})},Ql=({constants:e,state:t})=>()=>{const{SUCESS:n,FAIL:o}=e.FILE_STATUS;t.uploadingFiles.every(l=>[n,o].includes(l.status))&&(t.uploadingFiles=[])},Xl=e=>t=>{let n=e.uploadFiles,o;return n.every(r=>(o=t.uid===r.uid?r:null,!o)),o},Jl=({constants:e,vm:t,state:n})=>o=>{const{READY:r,UPLOADING:l,FAIL:i}=e.FILE_STATUS;o?n.uploadingFiles.forEach(a=>{const s=o.uid||o;a.uid===s&&[r,l].includes(a.status)&&(a.status=i)}):n.uploadingFiles.forEach(a=>{[r,l].includes(a.status)&&(a.status=i)}),t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].abort(o)},ea=({state:e})=>(t,n=!1)=>{const o=r=>{if(!r)return;const l=e.downloadCancelToken[r];l&&l.forEach(a=>a()),delete e.downloadCancelToken[r];const i=e.downloadCancelData[r];i&&i(r)};Array.isArray(t)?n?o(t.map(r=>r.docId||r).sort().join(",")):t.forEach(r=>r&&o(t.docId||t)):t?o(t.docId||t):Object.keys(e.downloadCancelToken).forEach(r=>{o(r)})},ta=e=>()=>{e.uploadFiles=[]},na=({api:e,constants:t,vm:n,state:o,props:r})=>()=>{const l=o.uploadFiles.filter(i=>i.status===t.FILE_STATUS.READY);if(o.isEdm&&o.isSuccess)l.forEach(i=>{e.getToken({token:r.edm.upload.token,file:i,type:"upload"}).then(a=>{a&&e.beforeUpload(i,!1,s=>{e.startUpload(s)})})});else if(r.multiple&&r.mergeService){const i=l.map(a=>a.raw);i.length&&e.beforeUpload({raw:i},!1,a=>{n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(a.raw)})}else l.forEach(i=>{e.beforeUpload(i,!1,a=>{n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(a.raw)})})},oa=({constants:e,vm:t})=>()=>t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].handleClick(),ra=e=>()=>e.getFileUploadUrl(),ia=({api:e,props:t,state:n})=>()=>{t.action?n.url=t.action:e.getFileUploadUrl().then(o=>n.url=o)},la=({props:e,emit:t})=>n=>{t("preview",n),e.preview&&e.preview(n)},Kn=({api:e,isChunk:t,isLessThan17G:n,file:o,state:r})=>(l,i,a)=>{if(t)a===0&&(r.downloadCancelData[o.docId]=e.setWriterFile({data:l,index:a,isLessThan17G:n,file:o}));else{const s=l.headers["content-disposition"],c=s?s.match(/fileName.?=(.*)/)[1]||s.match(/fileName=(.*)/)[1]:"";let u="application/zip";c.includes(".")?u!=="zip"&&(u="application / x - xls"):u=l.headers["content-type"];const p=new Blob([l.data],{type:u});qn({blob:p,name:c})}},qn=({blob:e,name:t})=>{if(window&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(e,decodeURIComponent(t));return}const n=window.URL||window.webkitURL||window.moxURL,o=ae.filterUrl(n.createObjectURL(e));let r=document.createElement("a");r.href=o,r.download=decodeURIComponent(t),r.click(),n.revokeObjectURL&&n.revokeObjectURL(o)},Gn=({state:e,downloadOps:t,file:n,translateFile:o,isChunk:r,isLessThan17G:l})=>(i,a,s)=>{if(r){const c=l?i.data:new Uint8Array(i.data);let u=e.downloadChunkFile[n.docId];u||(u={}),u[s]=c,o(i,a,s)}else typeof t.loading=="function"&&t.loading(n),o(i,a);return!0},Qn=()=>e=>{let t;e.target&&e.target.getResponseHeader?t=Number(e.target.getResponseHeader("Content-Size")):t=Number(e.total),t=Math.max(t,e.loaded);let n=Math.ceil(e.loaded/t*100)||0;return n=Math.max(n,0),n=Math.min(n,100),n},aa=({state:e,props:t,constants:n})=>({file:o,serviceUrl:r,range:l})=>{if(typeof o=="object"){const i=t.edm.download||{},a=Array.isArray(i.paramsWhitelist)?i.paramsWhitelist:[],s=e.downloadParamsWhitelist.concat(a);let c={};s.forEach(u=>c[u]=o[u]),c=Object.assign(c,l),delete c.docId,delete c.docVersion,delete c["x-download-sign"];for(let u in c){const p=c[u],h=typeof p;~["undefined","object","function"].indexOf(h)||(r+=`&${u}=${p}`)}o.status=n.FILE_STATUS.DOWNLOADING,o.percentage=0}return r},sa=({Modal:e,constants:t,t:n})=>({data:o})=>{if(o.status===t.EDM.KIASTATUS)return e.message({message:`${n(t.EDM.KIASCANTIP)}`,status:"warning"})},da=({state:e,Modal:t})=>({downloadOps:n,file:o,isLessThan17G:r,data:l})=>{const i=({state:a,file:s,errRes:c,Modal:u,downloadOps:p})=>{a.currentDownloadFiles&&a.currentDownloadFiles.docId===s.docId||(c&&c.message&&u.message({message:c.message,status:"warning"}),a.currentDownloadFiles=s,typeof p.fail=="function"&&p.fail(c,s))};if(l.data&&l.data.type&&l.data.type.includes("application/json")){const a=new FileReader;return a.onload=s=>{const c=JSON.parse(s.target.result);i({state:e,file:o,errRes:c,Modal:t,downloadOps:n})},a.readAsText(l.data),!0}if(!r&&l.headers["content-type"].includes("application/json")){const a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(l.data)));return i({state:e,file:o,errRes:a,Modal:t,downloadOps:n}),!0}},ca=({state:e,service:t})=>n=>{let o;Array.isArray(n)?o=n.map(i=>i.docId||i).sort().join(","):o=n.docId||n,e.downloadCancelToken[o]||(e.downloadCancelToken[o]=[]);const{cancel:r,token:l}=t.cancelToken();return e.downloadCancelToken[o].push(r),l},ua=({service:e,constants:t,props:n,state:o,api:r,emit:l})=>i=>{let{file:a,batchIndex:s,isChunk:c,calcProgress:u,handleSuccess:p,range:h={},isBatch:T,isLessThan17G:m,url:y}=i,k;y?k=Promise.resolve(y):k=e.getSingleDownloadUrl().then(b=>{let _=b.replace(/{docId}/,a.docId||a)+`${~b.indexOf("?")?"&":"?"}x-download-sign=true&docVersion=${a.docVersion||""}${a.decryptKey?"&decryptKey="+a.decryptKey:""}`;return _=r.modifyServiceUrlSingle({file:a,serviceUrl:_,range:h}),_}),k.then(b=>{b=ae.filterUrl(b);let _={withCredentials:n.withCredentials,headers:Object.assign(n.headers,o.headers),responseType:c&&!m?"arraybuffer":"blob",hideErr:!0,cancelToken:r.createDownloadCancelToken(a),onDownloadProgress(S){let d=u(S,c);d!==100&&!c&&l("download",d,S,{},a),typeof a=="object"&&(a.percentage=d)}};e.get(b,_).then(S=>{if(r.getKiaScanTip({data:S})||r.validateDownloadStatus({downloadOps:n.edm.download||{},file:a,isLessThan17G:m,data:S}))return;p(S,"",h.index);const{checkcode:d,"content-size":C}=S.headers;!c&&l("download",100,"",{checkcode:d,fileSize:C},a),typeof a=="object"&&(a.percentage=100,setTimeout(()=>a.status=t.FILE_STATUS.SUCESS,1e3)),r.afterDownload({batchIndex:s,data:S,file:a})}).catch(S=>{if(S.response&&o.errorStatusCodes.includes(S.response.status)){const C={token:(n.edm.download||{}).token,file:a,type:"download"};r.getToken(C).then(E=>{r.afterDownload({batchIndex:s,data:E,file:a,range:h,isChunk:c,isBatch:T,isLessThan17G:m})})}})})},pa=({api:e,service:t,props:n,state:o,emit:r})=>l=>{let{downloadOps:i,file:a,calcProgress:s,handleSuccess:c,range:u={},isLessThan17G:p}=l,h={token:i.packageToken,file:a,type:"download"};const{asyncPackages:T}=i||{};e.getToken(h).then(m=>{if(!m)return;const y={downloadTOs:[],attachdownloadTOs:[],isZip:"true",transformType:"sync",type:"package"};if(a.forEach(k=>{k.wmType?y.attachdownloadTOs.push(k):y.downloadTOs.push(k)}),T){e.downloadAsyncPackage(y);return}t.getPackageDownloadUrl().then(k=>{k=ae.filterUrl(k+`${~k.indexOf("?")?"&":"?"}x-download-sign=true`),t.post(k,de(de({},y),u),{withCredentials:n.withCredentials,headers:Object.assign(n.headers,o.headers),responseType:"blob",cancelToken:e.createDownloadCancelToken(a),onDownloadProgress(b){let _=s(b);_!==100&&r("download",_,b,{},a)}}).then(b=>{if(e.getKiaScanTip({data:b})||e.validateDownloadStatus({downloadOps:n.edm.download||{},file:a,isLessThan17G:p,data:b}))return;const{"content-size":_,checkcode:S}=b.headers;r("download",100,"",{fileSize:_,checkcode:S},a),c(b,"zip")})})})},ha=({state:e,props:t,service:n,api:o,constants:r})=>l=>n.getAsyncPackageDownload().then(i=>{n.request({method:"post",url:ae.filterUrl(i),withCredentials:t.withCredentials,headers:Object.assign(t.headers,e.headers),data:l}).then(a=>{if(a&&a.data&&a.data.status===200){const s=(a.data.result||[]).map(({downloadLink:T,fileSize:m})=>({url:T,fileSize:m})),{SIZE_17G:c}=r.EDM,u=!1,p=!1,h=t.edm.download||{};s.forEach(T=>{const m=!T.fileSize||T.fileSize<c*1024,y=Kn({api:o,isChunk:p,isLessThan17G:m,file:T,state:e}),k=Gn({downloadOps:h,file:T,translateFile:y,isChunk:p,state:e,isLessThan17G:m}),b=Qn(),_={url:T.url,calcProgress:b,handleSuccess:k,downloadOps:h,file:T,isLessThan17G:m,isFinished:!1,range:{},batchIndex:0,isBatch:u,isChunk:p};o.downloadFileSingle(_)})}})}),fa=({state:e,props:t,emit:n,constants:o})=>({file:r})=>{const{HWH5:l,appId:i}=t.hwh5,{downloadToEDM:a}=l(),s={edmAuth:{edmToken:e.headers[o.EDM.EDMTOKEN],appId:i},docId:r.docId||r,docVersion:r.docVersion,filePath:r.filePath,progress:1,onProgress:c=>{const{progress:u}=JSON.parse(c);u*1!==100&&n("download",u,c,{},r)}};a(s).then(c=>{n("download",100,"",{data:c},r)})},ma=({api:e,state:t})=>n=>{if(t.currentDownloadFiles="",!t.isEdm)e.ordinaryDownload(n);else{const o=Array.isArray(n);if(t.isHwh5){let r=n;o||(r=[n]),r.forEach(l=>e.downloadFileSingleInner({file:l,isBatch:!1}));return}o?e.downloadFileInner({file:n,isBatch:o}):e.downloadFileSingleInner({file:n,isBatch:o})}},ga=({props:e,state:t,api:n,constants:o})=>({file:r,isBatch:l})=>{const{SIZE_17G:i}=o.EDM;let s={token:(e.edm.download||{}).token,file:r,type:"download"};n.getToken(s).then(c=>{if(!c)return;if(t.isHwh5){n.downloadFileSingleHwh5({file:r});return}const u={docId:r.docId,docVersion:r.docVersion};(t.hasFileInfoInterface?n.getDownloadFileInfo(u):Promise.resolve()).then(h=>{const{fileSize:T}=h||{},m=T>t.docSize&&T>t.chunkSize;T&&m?n.largeDocumentDownload({file:h,isBatch:l,isLessThan17G:T<i*1024}):n.downloadFileInner({file:r,isBatch:l})})})},va=({api:e,state:t,props:n,service:o})=>({docId:r,docVersion:l})=>o.getDocumentInfoUrl().then(i=>new Promise((a,s)=>{o.request({method:"post",url:ae.filterUrl(i),withCredentials:n.withCredentials,headers:Object.assign(n.headers,t.headers),cancelToken:e.createDownloadCancelToken({docId:r}),data:{docInfoVO:{ids:[r],docType:"",docVersion:l||""}}}).then(c=>{const{data:u}=c||{};if(u&&u.status===200){const p=u.result.outDocQueryList&&u.result.outDocQueryList[0].verInfo[0].docInfo[0];a(p)}else s(c)})})),ya=({api:e,state:t})=>({file:n,isBatch:o,isLessThan17G:r})=>{const{fileSize:l,docId:i,docName:a}=n,s=Math.ceil(l/t.chunkSize);t.downloadChunkFile[i]={chunkNum:s,fileSize:l,docName:a},n.chunkSize=s;const c=e.sliceDownloadChunk(n);e.batchSegmentDownload({batchIndex:0,batches:c,docId:n.docId,isBatch:o,isLessThan17G:r})},wa=({state:e})=>t=>{const n=t.chunkSize,o=[[]];e.downloadBatchQueue[t.docId+"-0"]=0,e.downloadBatchQueueListen[t.docId+"-0"]=0;let r=0,l=-1;for(let i=0;i<n;i++){if(r=l+1,l=Math.min(t.fileSize,r+e.chunkSize-1),l<r)return o;const a=o.length-1;o[a].length<e.downloadChunkLimit?o[a].push({startRange:r,endRange:l,index:i}):(e.downloadBatchQueue[t.docId+"-"+o.length]=0,e.downloadBatchQueueListen[t.docId+"-"+o.length]=0,o.push([]),o[a+1].push({startRange:r,endRange:l,index:i}))}return o},Ta=({state:e,api:t})=>({batchIndex:n,batches:o,docId:r,isBatch:l,isLessThan17G:i})=>{if(n<o.length){const a=o[n],s=r+"-"+n;Object.defineProperty(e.downloadBatchQueue,s,{get(){return e.downloadBatchQueueListen[s]},set(u){e.downloadBatchQueueListen[s]=u,u>=a.length&&t.batchSegmentDownload({docId:r,batchIndex:++n,batches:o,isBatch:l,isLessThan17G:i})}});let c=0;for(;a.length-c>0;)t.downloadFileInner({batchIndex:n,range:a[c++],file:{docId:r},isBatch:l,isChunk:!0,isLessThan17G:i})}},ba=({api:e,props:t,state:n})=>({batchIndex:o,file:r,range:l,isBatch:i,isChunk:a,isLessThan17G:s})=>{const c=t.edm.download||{},u=Kn({api:e,isChunk:a,isLessThan17G:s,file:r,state:n}),p=Gn({downloadOps:c,file:r,translateFile:u,isChunk:a,state:n,isLessThan17G:s}),h=Qn();let{isFinished:T=!1}={};if(!i){const y={calcProgress:h,isFinished:T,handleSuccess:p,range:l,batchIndex:o,isBatch:i,downloadOps:c,file:r,isChunk:a,isLessThan17G:s};e.downloadFileSingle(y);return}const m={downloadOps:c,file:r,calcProgress:h,handleSuccess:p,range:l,isLessThan17G:s};i&&e.downloadFileBatch(m)},Sa=({api:e,state:t})=>({batchIndex:n,range:o,data:r,file:l,isBatch:i,isChunk:a,isLessThan17G:s})=>{if(r.status===200){const c=l.docId+"-"+n;t.downloadBatchQueue[c]!==void 0?t.downloadBatchQueue[c]+=1:t.downloadBatchQueue[c]=0}else{const c=l.docId+"-"+o.index,u=t.downloadReplayAtoms[c];if(u&&u>=2){const p=["The number of retry times exceeds the threshold! [docId:",l.docId,", chunk:",o.index,"]"];ot.warn(p.join("")),delete t.downloadReplayAtoms[c]}else{t.downloadReplayAtoms[c]===void 0&&(t.downloadReplayAtoms[c]=0);const p=["replay ",u,"! [docId:",l.docId,", chunk:",o.index,"]"];ot.warn(p.join("")),t.downloadReplayAtoms[c]+=1,e.downloadFileInner({batchIndex:n,range:o,file:l,isBatch:i,isChunk:a,isLessThan17G:s})}}},ka=({state:e,emit:t,Streamsaver:n})=>({data:o,index:r,isLessThan17G:l,file:i})=>{let{fileStream:a,writer:s,fileData:c=[],downloaded:u=0}={};const{checkcode:p}=o.headers,h=o.headers["content-disposition"];let{chunkNum:T,fileSize:m,docName:y}=e.downloadChunkFile[i.docId];h&&(y=h.match(/fileName.?=(.*)/)[1]||h.match(/fileName=(.*)/)[1]||y),l||(a=n.createWriteStream(y,{size:o.byteLength}),s=a.getWriter());const k=()=>{const b=e.downloadChunkFile[i.docId]||{};let _=b[r];if(_)if(!l)s.write(_).then(()=>{if(u+=_.byteLength,b[r]=null,delete b[r],r+1>=T)delete e.downloadChunkFile[i.docId],t("download",100,"",{fileSize:m,checkcode:p},i),s.close();else{const S=Math.ceil(u/m*100)||0;S!==100&&t("download",S,"",{fileSize:m,checkcode:p},i),r++,k()}});else if(c.push(_),u+=_.size,e.downloadChunkFile[i.docId][r]=null,delete e.downloadChunkFile[i.docId][r],r+1>=T)delete e.downloadChunkFile[i.docId],qn({blob:new Blob(c),name:y}),t("download",100,"",{fileSize:m,checkcode:p},i);else{const S=Math.ceil(u/m*100)||0;S!==100&&t("download",S,"",{fileSize:m,checkcode:p},i),r++,k()}else setTimeout(()=>k(),1e3)};return k(),b=>{const _=e.downloadChunkFile[b];Object.keys(_).forEach(S=>_[S]=null),delete e.downloadChunkFile[b],l?c=[]:s&&s.close()}},Ea=({constants:e,props:t,state:n})=>({formData:o,file:r,type:l})=>{if(n.isEdm&&t.edm.upload){const a=Object.assign({},t.data||{},t.edm.upload.params||{});for(let s in a)o.set(s,a[s]||"")}t.edm.isCheckCode===!0?(o.append(e.EDM.ISCHECKCODE,"Y"),r.hash&&o.append(e.EDM.CHECKCODE,r.hash)):o.append(e.EDM.ISCHECKCODE,"N");const i=n.updateId||t.edm.updateId;if(l===e.EDM.CHUNKINIT)o.append(e.EDM.FILESIZE,r.size),o.append(e.EDM.CHUNKS,r.chunkSize),o.append(e.EDM.FILENAME,r.name),i&&o.append(e.EDM.DOCID,i);else{o.append(e.EDM.MULTIPART,r,r.filename),o.append(e.EDM.CHUNK,r.chunk),o.append(e.EDM.LOWERNAME,r.filename);const a=i||r.docId;o.append(e.EDM.DOCID,a)}return i&&o.append("updateFile",!0),o},_a=({api:e,Modal:t,state:n,t:o,emit:r,constants:l})=>i=>{const a=Math.ceil(i.size/n.chunkSize);i.chunkSize=a,i.cancelToken=[],e.segmentUploadInit(i).then(s=>{if(s&&s.docId){i.records=s.chunks,i.docId=s.docId,n.largeFileInfo[s.docId]=i;const c=e.sliceChunk(i);e.batchSegmentUpload({docId:s.docId,batchIndex:0,batches:c,progress:{size:i.size,trunks:[],file:i}})}else{t.message({message:o("ui.fileUpload.init"),status:"warning",duration:"1000"});const c=e.getFile(c);n.uploadFiles.splice(n.uploadFiles.indexOf(c),1)}}).catch(s=>{i.status=l.FILE_STATUS.FAIL,r("error",s,i,n.uploadFiles)})},Ca=({api:e,props:t,service:n,state:o,constants:r})=>l=>{const i=new FormData;return new Promise((a,s)=>{n.getLargeFileInitUrl().then(c=>{n.request({method:"post",url:ae.filterUrl(c),data:e.getFormData({formData:i,file:l,type:r.EDM.CHUNKINIT}),withCredentials:t.withCredentials,headers:Object.assign(t.headers,o.headers)}).then(u=>{u.data.status===200?a(u.data.result):s(u)})})})},Xt=({data:e,file:t,batchIndex:n,state:o,api:r,progress:l})=>{if(e.status===200){const i=t.docId+"-"+n;o.batchQueue[i]!==void 0?o.batchQueue[i]+=1:o.batchQueue[i]=0}else{const i=t.docId+"-"+t.chunk,a=o.replayAtoms[i];if(a&&a>=2){const s=["The number of retry times exceeds the threshold! [docId:",t.docId,", chunk:",t.chunk,"]"];ot.warn(s.join("")),delete o.replayAtoms[i]}else{o.replayAtoms[i]===void 0&&(o.replayAtoms[i]=0);const s=["replay ",a,"! [docId:",t.docId,", chunk:",t.chunk,"]"];ot.warn(s.join("")),o.replayAtoms[i]+=1,r.segmentUpload(n,t,l)}}},Jt=({api:e,props:t,service:n,state:o,emit:r,constants:l,batchIndex:i,file:a,progress:s})=>{const c=new FormData,u=p=>{const h=n.cancelToken();if(s.file.cancelToken){s.file.cancelToken.push(h.cancel);const{SUCESS:T,FAIL:m}=l.FILE_STATUS;n.request({method:"post",url:ae.filterUrl(p),data:e.getFormData({formData:c,file:a,type:""}),withCredentials:t.withCredentials,headers:Object.assign(t.headers,o.headers),cancelToken:h.token,hideErr:!0,onUploadProgress(y){s.trunks[a.chunk]=y.loaded;const k=s.trunks.reduce((_,S)=>_+S);let b=Math.floor(k/s.size*100)||0;a.percentage=Math.floor(y.loaded/y.total*100),y.percentage=s.file.percentage=b>100?100:b,b>=100&&(s.file.isFinished=!0),r("progress",s.file,o.uploadFiles,e.calcUploadingFilesInfo())}}).then(y=>{Xt({data:y,file:a,batchIndex:i,state:o,api:e,progress:s}),s.file.percentage===100&&(s.file.status=T)}).catch(y=>{if(y.response&&o.errorStatusCodes.includes(y.response.status)){const k={token:t.edm.upload.token,file:a,type:"upload"};e.getToken(k).then(b=>Xt({data:b,file:a,batchIndex:i,state:o,api:e,progress:s}))}else s.file.status!==m&&r("error",y,s.file,o.uploadFiles),s.file.status=m,s.file.docId=""})}};o.chunkUploadUrl?u(o.chunkUploadUrl):n.getChunkUploadUrl().then(p=>{o.chunkUploadUrl=p,u(p)})},Ia=({api:e,props:t,service:n,state:o,emit:r,constants:l})=>(i,a,s)=>{typeof a.then=="function"?a.then(c=>new Promise(u=>{if(t.edm.isCheckCode!==!0)return u(c);const p=new FileReader;p.readAsArrayBuffer(c),p.onload=async h=>{if(t.edm.isCheckCode===!0){const T=gn(h.target&&h.target.result);c.hash=T}u(c)}})).then(c=>{Jt({batchIndex:i,api:e,service:n,state:o,emit:r,props:t,file:c,constants:l,progress:s})}):Jt({api:e,props:t,service:n,state:o,emit:r,constants:l,batchIndex:i,file:a,progress:s})},Ua=({api:e,constants:t,props:n,vm:o,state:r})=>({docId:l,batchIndex:i,batches:a,progress:s})=>{if(i<a.length&&s.file.cancelToken){const c=l+"-"+i,u=a[i];Object.defineProperty(r.batchQueue,c,{get(){return r.batchQueueListen[c]},set(h){r.batchQueueListen[c]=h,h>=u.length&&e.batchSegmentUpload({docId:l,batchIndex:++i,batches:a,progress:s})}});let p=0;for(;u.length-p>0;)e.segmentUpload(i,u[p++],s)}else typeof n.edm.upload.closeloading=="function"&&n.edm.upload.closeloading(),o.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(r.largeFileInfo[l])},Fa=({state:e})=>t=>{const n=t.chunkSize,o=[[]];e.batchQueue[t.docId+"-0"]=0,e.batchQueueListen[t.docId+"-0"]=0;for(let r=0;r<n;r++){if(t.records.includes(r.toString()))continue;const l=r*e.chunkSize,i=Math.min(t.size,l+e.chunkSize),a=t.raw.slice(l,i);a.chunk=r+1,a.filename=t.name,a.docId=t.docId,a.chunkSize=n,a.cacheSign=t.cacheSign,a.records=t.records,a.percentage=t.percentage;const s=Promise.resolve(a),c=o.length-1;o[c].length<e.chunkBatchLimit?o[c].push(s):(e.batchQueue[t.docId+"-"+o.length]=0,e.batchQueueListen[t.docId+"-"+o.length]=0,o.push([]),o[c+1].push(s))}return o},Xn=({constants:e,props:t,state:n,t:o,Modal:r})=>({token:l,file:i,isOnlinePreview:a=!1,type:s="",isinit:c=!1})=>t.edm.isExtranet&&!a?(n.isSuccess=!0,n.accept=t.accept,n.singleMaxSize=t.edm.singleFileMaxSize||200,Promise.resolve(!0)):n.isEdm&&!l||typeof l!="function"?(r.message({message:o(e.EDM.I18NKEY),status:"warning",duration:"2000"}),new Promise(u=>{u(!1)})):new Promise((u,p)=>{try{let h;c&&t.cacheToken?(!$t&&($t=l(i)),h=$t):h=l(i),h.then(T=>{const m=T||{},y=m.config&&m.config.fileWhiteList||"";if(n.isSuccess=!0,["preview","download"].includes(s)&&t.accept)n.accept=t.accept;else if(y)if(t.accept){let k="";t.accept.toString().split(",").forEach(b=>{y.includes(b)||(k+=`,${b}`)}),n.accept=y+k}else n.accept=y;n.headers[e.EDM.EDMTOKEN]=m.edmToken||"",n.headers[e.EDM.TRACEID]=m.traceId||"",m.config&&(n.singleMaxSize=m.config.singleFileMaxSize),n.edmToken=m,u(!0)})}catch(h){p(new Error(h))}}),$a=({api:e,props:t})=>(n,o=!1)=>new Promise((r,l)=>{try{const i={isOnlinePreview:!0,file:n,type:"preview",token:t.edm.preview.token};e.getToken(i).then(a=>{if(!a){const s="[TINY Error][FileUpload] No edm token";l(new Error(s));return}lt(n)||Array.isArray(n)&&n.length===1?e.previewFileSingle({file:Array.isArray(n)?de({},n[0]):n,resolve:r,open:o}):Array.isArray(n)&&n.length>1&&e.previewFileBatch({file:n,resolve:r,open:o})}).catch(a=>l(new Error(a)))}catch(i){l(new Error(i))}}),Da=({api:e})=>t=>e.previewFile(t,!0),La=({api:e,state:t,props:n,constants:o,service:r})=>({file:l,resolve:i,open:a})=>{const s=e.getPreviewUrlSync(l);if(a)return i(s);if(s){t.showPreview=!0,t.iframeUrl=s,i(t.iframeUrl);return}const c=n.edm.preview.watermark||{},u=t.fileWater?o.EDM.FORMAT:"",p=t.fileWater?o.EDM.WATER:o.EDM.SOURCE,h=n.edm.preview.plugin;r.all([r.getPreviewUrl(),r.getSingleDownloadUrl()]).then(r.spread((T,m)=>{const y=n.edm.preview.serviceUrl,k=y||T.replace(/{docId}/,l.docId)+`?${u}docVersion=${l.docVersion}`,b=y||T.replace(/{docId}/,l.docId)+`?type=doc&pageNum=1&${u}docVersion=${l.docVersion}`,_=y+m.replace(/{docId}/,l.docId)+`?docId=${l.docId}&docVersion=${l.docVersion}&${p}from=Experience&`;h.setIsEDM3(!0),h.setDocumentInfoUrl(k),h.setDownloadUrl(_,!0),h.setPageUrl(b),h.setWatermarkParameters({showWatermark:c.showWatermark||1,rotation:c.rotation||30,text:c.text||""}),h.setPdfjsPaht(n.edm.preview.packageName||o.EDM.JSLIB),h.setAuthToken(t.headers[o.EDM.EDMTOKEN]),t.showPreview=!0,t.iframeUrl=n.edm.preview.previewUrl+`${o.EDM.URLCONTS}${l.docVersion}&docId=${l.docId}`,i(t.iframeUrl)}))},Aa=({service:e,props:t,state:n,api:o})=>({file:r,resolve:l,open:i})=>{e.getPreviewUrlBatch().then(a=>{const c=(t.edm||{}).preview||{},u=c.online||{},{jslibhtml:p,baseurl:h}=u,{text:T}=c.watermark||{};e.request({method:"post",url:ae.filterUrl(a),withCredentials:t.withCredentials,headers:n.headers,data:{documents:r,asposeClient:p,asposeService:h,watermark:T}}).then(({data:m})=>{const y=o.getPreviewUrlSync({generate:m.result.generate,size:r.length},!0);if(i)return l(y);y&&(n.showPreview=!0,n.iframeUrl=y,l(n.iframeUrl))})})},Pa=({constants:e,props:t,state:n})=>(o,r)=>{const i=(t.edm||{}).preview||{},{watermark:a,online:s,bar:c={},lang:u}=i,{webPreview:p=!1,http:h=!1,jslibhtml:T,appid:m,baseurl:y}=s;let k;p?k=`${h?"http:":"https:"}${y.replace(/\/$/,"")}/edm/projects/${m}/web/preview`:k=T.split("?").shift();const b=[];let _;const S=n.headers[e.EDM.EDMTOKEN];if(r){k=k=`${y.replace(/\/$/,"")}/edm/projects/${m}/web/batchPreview`;const{generate:d,size:C}=o;_={generate:d,"EDM-Authorization":S,docIndex:1,size:C}}else if(p){const{styles:d}=c;_=Object.assign({},a,{"EDM-Authorization":S,lang:u,bar:window.btoa(JSON.stringify(xt(de({},c),{styles:JSON.stringify(d)}))),docId:o.docId})}else _=Object.assign({},s,a,{authToken:S,jslibhtml:k,docId:o.docId,docVersion:o.docVersion||o.version||"",type:"doc",pageNum:"1"});for(let d in _){const C=_[d];lt(C)||(d==="text"&&b.push(`watermark=${encodeURIComponent(C)}`),b.push(`${d}=${C}`))}return k+"?"+b.join("&")},Oa=({api:e,props:t,service:n})=>o=>new Promise((r,l)=>{try{e.getToken({token:t.edm.preview.token,file:o,type:"preview"}).then(i=>{if(!i){l(new Error("[TINY Error][FileUpload] No edm token"));return}n.getPreviewUrl().then(a=>{lt(o)||Array.isArray(o)&&o.length===1?e.previewImageSingle({url:a,file:Array.isArray(o)?de({},o[0]):o}).then(s=>r(s)):Array.isArray(o)&&o.length>1&&e.previewImageBatch({url:a,file:o}).then(s=>r(s))})})}catch(i){l(new Error(i))}}),Ra=({service:e,state:t,props:n})=>({file:o,url:r})=>{const i=(n.edm||{}).preview||{};let{text:a,textStyle:s}=i.watermark||{};s=de({tile:!0},s);const c=Object.assign(o,{type:"image",imageType:"image",watermark:a,textStyle:s});return e.post(ae.filterUrl(r.replace(/{docId}/,o.docId)),c,{withCredentials:n.withCredentials,headers:Object.assign(n.headers,t.headers),responseType:"blob"}).then(u=>{const p=new Blob([u.data]);return(window.URL||window.webkitURL).createObjectURL(p)})},Ma=({service:e,api:t})=>({url:n,file:o})=>{const r=[];return o.forEach(l=>{r.push(t.previewImageSingle({url:n,file:l}))}),e.all(r)},Na=({props:e,state:t,t:n,constants:o})=>()=>{const r={class:"single-download-modal single-download-modal1",style:"",props:{lockScroll:!0,visible:t.showPreview,dragable:!0,title:n(o.EDM.DOC_PREVIEW),width:"60%"},on:{"update:visible":u=>t.showPreview=u}};let l={};e.edm&&e.edm.preview&&typeof e.edm.preview.dialogConfig=="object"&&(l=e.edm.preview.dialogConfig||{});const i=Yt(!0,{},l),a=i.events||{},s=i.class||"",c=i.style||"";return delete i.events,delete i.class,delete i.style,Yt(!0,{},r,{class:`${r.class} ${s}`,style:`${c}`,props:de({},i),on:de({},a)})},za=({props:e,state:t,constants:n})=>()=>{const o=!(e.edm&&e.edm.chunkSize),{SIZE_0M:r,SIZE_2M:l,SIZE_4M:i,SIZE_8M:a,SIZE_16M:s,SIZE_20M:c,SIZE_32M:u,SIZE_64M:p,SIZE_2G:h}=n.EDM;let{docSize:T=c,chunkSize:m=a}=e.edm||{};T=T<0?0:T,T=T>h?h:T,T&&(m=m<0?0:m),o||[p,u,s,a,i,l,r].some(k=>m>=k?(m=Math.max(k,l),!0):!1),t.docSize=T*1024,t.chunkSize=m*1024},xa=({props:e,constants:t})=>()=>{const{sourceType:n,listType:o}=e;let r=n.split("/");return o!==t.LIST_TYPE.PICTURE_CARD&&(r=r.slice(0,1)),r},Ba=({state:e,props:t,constants:n})=>({file:o})=>{const{PICTURE_SINGLE:r,PICTURE_CARD:l}=n.LIST_TYPE,{listType:i}=t;if(![r,l].includes(i))return;let a=e.types[0];if(o.type)a=o.type;else if(i===l){const{VIDEO:s,AUDIO:c,PICTURE:u}=n.FILE_TYPE,{SOURCE_VIDEO:p,SOURCE_AUDIO:h,SOURCE_PICTURE:T}=n.SOURCE_TYPE,m={[s]:p,[c]:h,[u]:T},y=Yn({file:o}),k=Object.keys(m).find(b=>b.split("/").includes(y));m[k]&&(a=m[k])}return a},ja=({constants:e,vm:t})=>n=>{t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].handleUpdate(n)},Ha=({vm:e,constants:t})=>n=>{if(typeof n=="object"&&n!==null&&n!==void 0){let o=n;Array.isArray(n)||(o=[n]),e.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].handleChange({target:{files:o}})}},Va=({vm:e,state:t,constants:n,props:o,emit:r})=>(l,i)=>{const{PICTURE_CARD:a,PICTURE_SINGLE:s}=n.LIST_TYPE,{isHwh5:c}=t,{listType:u}=o;if([a,s].includes(u)||(i=""),t.triggerClickType=i,u===a&&c){e.$refs[n.UPLOAD_LIST_INNER].$refs[n.UPLOAD_LIST_INNER_TEMPLATE].chooseFile(i);return}r("trigger-click",l,i)},Wa=e=>()=>{!Array.isArray(e.uploadFiles)||e.uploadFiles.forEach(t=>{t.url&&t.url.indexOf("blob:")===0&&URL.revokeObjectURL(t.url)})},Za=({state:e,emit:t})=>n=>{e.selected=n,t("click-file-list",n)},Ya=({vm:e,state:t})=>()=>{e.$on("drag-over",n=>t.isDragover=n)},Ka=({state:e})=>()=>{const t=e.encryptDialogConfig.selectFileMethod;e.encryptDialogConfig.show=!1,typeof t=="function"&&t()},qa=({vm:e,constants:t,state:n,props:o})=>()=>{const{PICTURE_CARD:r}=t.LIST_TYPE,{isHwh5:l}=n,{listType:i}=o;i===r&&l&&(e.$refs[t.UPLOAD_LIST_INNER].$refs[t.UPLOAD_LIST_INNER_TEMPLATE].state.showAudioPanel=!1)},Ga=({t:e,api:t,constants:n})=>({accept:o,fileSize:r,limit:l})=>{let i="";o&&(i=e(n.ONLY_SUPPORT,{type:o.split(",").map(u=>u.trim().replace(/^\./,"")).join(e(n.COMMA))})),r&&i.length!==0&&(i+=`${e(n.COMMA)} `);let a="",s=1024;typeof r=="number"?a=`${e(n.FILE_NOT_LESS_THAN)}${t.formatFileSize(r*s)}`:Array.isArray(r)&&(a+=!isNaN(r[0])&&!isNaN(r[1])?e(n.FILE_SIZE_RANGE,{moreThan:t.formatFileSize(Number(r[0])*s),lessThan:t.formatFileSize(Number(r[1])*s)}):"");let c=l?e(n.NUMBER_LIMIT,{number:l}):"";return(r||i.length!==0)&&l&&(c=`${e(n.COMMA)} `+c),i+a+c},Jn=["state","getNewTabPreviewUrl","previewFile","downloadFile","abort","clearFiles","getFile","handleStart","handleProgress","handleSuccess","handleError","handleRemove","handleReUpload","handleReUploadTotal","submit","handleClick","handleFileClick","getFileUploadUrl","updateUrl","previewImage","updateFile","handleChange","abortDownload","handleClickFileList","handleTriggerClick","closeRecordPanel","encryptDialogConfirm","formatFileSize","getTipMessage"],Qa=({api:e,reactive:t,computed:n,inject:o,ref:r,vm:l,props:i,httpRequest:a,service:s,useBreakpoint:c})=>{const{current:u}=c();return t({url:"",updateId:"",currentDownloadFiles:"",tempIndex:1,draging:!1,uploadFiles:[],dragOver:!1,httpRequest:a,form:o("form",r({default:""})),listeners:l.$listeners,docSize:0,chunkSize:0,chunkBatchLimit:5,downloadChunkLimit:5,batchQueue:{},batchQueueListen:{},batchCancelToken:{},replayAtoms:{},chunkUploadUrl:"",largeFileInfo:{},headers:{},accept:"",edmToken:{},isSuccess:!1,singleMaxSize:200,formData:{},showPreview:!1,iframeUrl:"",fileWater:!1,tabUrl:"",cacheDocuments:{},isEdm:n(()=>!Dt(i.edm)),uploadDisabled:n(()=>e.computedUploadDisabled()),dialogConfigObj:n(()=>e.getDialogConfigObj()),uploadingFiles:[],currentUploadingFileUids:[],uploadingSize:n(()=>e.computedUploadingSize()),isEntireCheckCode:n(()=>!("isEntireCheckCode"in i.edm&&i.edm.isEntireCheckCode!==!0)),downloadBatchQueue:{},downloadBatchQueueListen:{},downloadChunkFile:{},downloadReplayAtoms:{},errorStatusCodes:[0,401,429],hasFileInfoInterface:n(()=>s.setting.services.EDM&&s.setting.services.EDM.DocumentInfoUrl),currentDownloadFile:"",isDragover:!1,downloadCancelToken:{},downloadCancelData:{},isHwh5:n(()=>!Dt(i.hwh5)),selected:null,types:n(()=>e.computedSourcetype()),triggerClickType:"",visible:!1,downloadParamsWhitelist:["docId","wmType","docVersion"],encryptDialogConfig:{show:!1,selectFileMethod:null},current:u})},Xa=({api:e,state:t,props:n,constants:o,vm:r,$service:l,t:i,Modal:a,emit:s})=>{Object.assign(e,{state:t,sliceChunk:Fa({state:t}),getFormData:Ea({constants:o,props:n,state:t}),abort:Jl({constants:o,vm:r,state:t}),handleClick:oa({constants:o,vm:r}),handleFileClick:la({props:n,emit:s}),getFile:Xl(t),clearFiles:ta(t),watchFileList:Al({constants:o,state:t,props:n,api:e}),watchListType:Ll({constants:o,state:t,api:e}),onBeforeDestroy:Wa(t),computedUploadDisabled:$l({props:n,state:t}),computedUploadingSize:Dl({state:t,constants:o}),getFileUploadUrl:ra(l),getToken:Xn({constants:o,props:n,state:t,t:i,Modal:a}),getDialogConfigObj:Na({props:n,state:t,t:i,constants:o}),computeDocChunkSize:za({props:n,state:t,constants:o}),updateFile:ja({constants:o,vm:r}),getPreviewUrlSync:Pa({constants:o,props:n,state:t}),ordinaryDownload:Wn(l),clearUploadingFiles:Ql({constants:o,state:t}),calcUploadingFilesInfo:Vl({state:t,constants:o}),properFileSize:zl({props:n,state:t,api:e,constants:o,Modal:a,t:i}),mounted:Ya({vm:r,state:t}),previewFileSingle:La({api:e,state:t,props:n,constants:o,service:l}),previewFileBatch:Aa({service:l,props:n,state:t,api:e}),previewImageSingle:Ra({state:t,props:n,service:l}),previewImageBatch:Ma({service:l,api:e}),abortDownload:ea({state:t}),createDownloadCancelToken:ca({state:t,service:l}),computedSourcetype:xa({props:n,constants:o}),getFileSourceType:Ba({state:t,props:n,constants:o}),encryptDialogConfirm:Ka({state:t}),getTipMessage:Ga({t:i,api:e,constants:o}),formatFileSize:vn})},Ja=({api:e,props:t,$service:n,state:o,constants:r,emit:l,mode:i,Modal:a,t:s,vm:c,Streamsaver:u})=>{Object.assign(e,{segmentUploadInit:Ca({api:e,props:t,service:n,state:o,constants:r}),segmentUpload:Ia({api:e,props:t,service:n,state:o,emit:l,constants:r}),addFileToList:xl({api:e,constants:r,emit:l,props:t,state:o,mode:i}),downloadFile:ma({api:e,state:o}),downloadFileSingleInner:ga({props:t,state:o,api:e,constants:r}),previewImage:Oa({api:e,props:t,service:n}),previewFile:$a({api:e,props:t}),getNewTabPreviewUrl:Da({api:e}),submit:na({api:e,constants:r,vm:c,props:t,state:o}),handleStart:Hl({api:e,constants:r,props:t,state:o,vm:c}),batchSegmentUpload:Ua({api:e,constants:r,props:t,vm:c,state:o}),largeDocumentUpload:_a({api:e,Modal:a,state:o,emit:l,constants:r,t:s}),handleProgress:Wl({api:e,constants:r,emit:l,state:o}),handleSuccess:Zl({api:e,constants:r,emit:l,Modal:a,props:t,state:o,t:s}),handleError:Yl({api:e,constants:r,emit:l,state:o,props:t}),handleRemove:Kl({api:e,emit:l,props:t,state:o,constants:r}),handleReUpload:ql({vm:c,constants:r}),handleReUploadTotal:Gl(e),updateUrl:ia({api:e,props:t,state:o}),startUpload:Ml({api:e,state:o,constants:r,vm:c,Modal:a,t:s}),beforeUpload:Rl({api:e,props:t,Modal:a,constants:r,t:s,state:o}),getDownloadFileInfo:va({api:e,props:t,state:o,service:n}),largeDocumentDownload:ya({api:e,state:o}),sliceDownloadChunk:wa({state:o}),batchSegmentDownload:Ta({state:o,api:e}),downloadFileInner:ba({api:e,props:t,state:o}),setWriterFile:ka({state:o,emit:l,Streamsaver:u}),afterDownload:Sa({api:e,state:o}),getFileHash:Bl({emit:l,Modal:a,constants:r,t:s,state:o}),modifyServiceUrlSingle:aa({state:o,props:t,constants:r}),getKiaScanTip:sa({Modal:a,constants:r,t:s}),downloadFileSingle:ua({service:n,constants:r,props:t,state:o,api:e,emit:l}),downloadFileBatch:pa({api:e,service:n,props:t,state:o,emit:l}),downloadFileSingleHwh5:fa({state:o,props:t,emit:l,constants:r}),downloadAsyncPackage:ha({state:o,props:t,api:e,constants:r,service:n}),validateDownloadStatus:da({state:o,Modal:a}),handleChange:Ha({vm:c,constants:r}),handleClickFileList:Za({state:o,emit:l}),handleTriggerClick:Va({vm:c,state:o,constants:r,props:t,emit:l}),closeRecordPanel:qa({vm:c,constants:r,state:o,props:t})})},es=({watch:e,state:t,api:n,props:o,$service:r})=>{e(()=>{var l;return(l=o.edm)==null?void 0:l.upload},l=>l&&n.getToken({token:l.token,isinit:!0}),{immediate:!0,deep:!0}),e(()=>o.listType,n.watchListType),e(()=>o.fileList,l=>n.watchFileList(l),{immediate:!0,deep:!0}),e(()=>o.action,()=>{!o.httpRequest&&!t.isEdm&&n.updateUrl()},{immediate:!0}),e(()=>t.isSuccess,l=>l&&r.getSingleUploadUrl().then(i=>t.url=i),{immediate:!0}),e(()=>o.edm,n.computeDocChunkSize,{deep:!0,immediate:!0})};let eo=()=>({});const to=(e,{computed:t,inject:n,onBeforeUnmount:o,provide:r,reactive:l,ref:i,watch:a,onMounted:s},{t:c,vm:u,parent:p,emit:h,service:T,mode:m,constants:y,useBreakpoint:k},{Modal:b,Streamsaver:_})=>{let S={};const d=Zn({props:e,service:T}),C=d.httpRequest,E=Qa({reactive:l,computed:t,api:S,inject:n,ref:i,vm:u,props:e,httpRequest:C,service:T,useBreakpoint:k});return Xa({api:S,state:E,props:e,constants:y,vm:u,$service:d,t:c,Modal:b,emit:h}),Ja({api:S,props:e,$service:d,state:E,constants:y,emit:h,mode:m,Modal:b,t:c,vm:u,Streamsaver:_}),eo=()=>S,r("uploader",p),s(S.mounted),o(()=>{S.onBeforeDestroy(),S=null,u.$off("drag-over")}),es({watch:a,state:E,api:S,props:e,$service:d}),S},no=["t","state","parsePercentage","handleClick","handlePreview","picturefilePreview","getDeleteData","downloadFile","play","pause","handleLoadedmetadata","handleTimeupdate","showOperatePanel","getFileType","getFileIcon","reUpload","remove","handleTriggerClick","chooseFile","formatFileSize"],oo=(e,{reactive:t,onMounted:n,onUnmounted:o,watch:r,inject:l,computed:i},{t:a,parent:s,mode:c,emit:u,service:p,vm:h,nextTick:T,designConfig:m,useBreakpoint:y},{Modal:k})=>{var b,_,S,d,C;const E={getApi:eo};s=l("uploader").$children[0];const $=To?null:s.$constants,V=Zn({props:e,service:p}),{current:q}=y(),W=t({focusing:!1,shows:!1,currentBreakpoint:q,progressType:((b=m==null?void 0:m.state)==null?void 0:b.progressType)||"line",progressWidth:(m==null?void 0:m.state)&&Object.hasOwnProperty.call(m.state,"progressWidth")?m.state.progressWidth:68,progressStrokeWidth:((_=m==null?void 0:m.state)==null?void 0:_.progressStrokeWidth)||4,tooltipDisabled:(d=(S=m==null?void 0:m.state)==null?void 0:S.tooltipDisabled)!=null?d:!1,closeComponent:((C=m==null?void 0:m.icons)==null?void 0:C.closeComponent)||"icon-del",preViewComponent:(m==null?void 0:m.icons)&&Object.hasOwnProperty.call(m.icons,"preViewComponent")?m.icons.preViewComponent:"icon-fullscreen-left",failUploadFileCount:i(()=>e.files.reduce((A,ee)=>A+=ee.status==="fail"?1:0,0)),startPostion:0,screenType:c==="mobile",showPanel:!1,showTriggerPanel:!1,triggerClickType:"",showAudioPanel:!1,files:i(()=>E.getNotSuccessFiles()),currentFile:null});return s.getToken=Xn({constants:$,props:s,state:s.state,t:a,Modal:k}),Object.assign(E,{state:W,getDeleteData:pl(u),parsePercentage:dl(),downloadFile:Wn(V),picturefilePreview:ul(W),handleClick:cl({props:e,api:E,parent:s}),play:gl({vm:h,api:E,props:e}),pause:vl({vm:h,props:e}),handleLoadedmetadata:yl({vm:h}),handleTimeupdate:wl(),destroyed:Fl({props:e,vm:h}),showOperatePanel:hl({state:W}),getFileType:Tl(),getFileIcon:bl({constants:$}),mounted:Ul({api:E,vm:h}),calcUploadListLiWidth:kl({vm:h,nextTick:T,props:e,constants:$}),reUpload:fl({emit:u,props:e,parent:s}),remove:Sl({emit:u}),handleTriggerClick:Il({state:W,props:e}),chooseFile:Cl({state:W,constants:$}),calcVisible:El({props:e,constants:$,emit:u}),getNotSuccessFiles:_l({props:e,constants:$}),formatFileSize:vn}),e.listType===$.LIST_TYPE.DRAG_SINGLE&&r(()=>e.files&&e.files[0],A=>{A&&A.status===$.FILE_STATUS.FAIL&&setTimeout(()=>{E.remove({file:A})},2e3)},{immediate:!0,deep:!0}),r(()=>e.files,E.calcUploadListLiWidth),e.mode===$.MODE.BUBBLE&&e.listType===$.LIST_TYPE.TEXT&&$&&r(()=>e.files,E.calcVisible,{immediate:!0,deep:!0}),n(E.mounted),o(E.destroyed),E};function ts(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=ns(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ns(e,t){if(e){if(typeof e=="string")return en(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(e,t):void 0}}function en(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var os=function(t,n){for(var o=t.__vccOpts||t,r=ts(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},rs=Q({name:se+"UploadList",components:{TinyProgress:dt,TinyTooltip:at,TinyButton:Ce,TinyIconDocument:sl(),IconSuccessful:Bt(),IconClose:jt(),IconView:Yr(),IconDel:yn(),IconYes:bo(),IconCloseCircle:Mo(),IconError:Lt(),IconFileCloudupload:Ht(),IconDownload:ct(),IconCueL:wn(),IconRefresh:Fr(),IconOperationfaild:Lt(),IconFullscreenLeft:So(),IconRight:Ln(),IconPause:Dn(),IconAudio:An(),IconEllipsis:Un(),IconExcelType:On(),IconFileType:Rn(),IconOtherType:Tn(),IconPdfType:Mn(),IconPictureType:Nn(),IconPptType:zn(),IconTextType:xn(),IconVideoType:Bn(),IconWordType:jn(),IconZipType:Hn(),IconFileuploadPro:Vn()},emits:["click-file-list","remove","start","update:visible","update","reUpload","ReUploadTotal"],props:[].concat(ue,["disabled","display","files","filesIcon","handlePreview","isEdm","isFolder","listType","openDownloadFile","srcList","isFolderTitle","listOption","maxNameLength","mode","reUploadable","reUploadTip","selected","displayOnly","handleDownloadFile","handleReUpload","compact"]),setup:function(t,n){return pe({props:t,context:n,renderless:oo,api:no,extendOptions:{Modal:Ie}})}}),is={key:0,class:"tiny-upload-list-panel"},ls=["onClick"],as={class:"tiny-upload-list-thumb"},ss=g("div",{class:"uploading-mask"},null,-1),ds={class:"uploading-progress"},cs={class:"uploading-progress-panel"},us={key:2,class:"upload-fail"},ps={class:"tiny-upload-list-content"},hs={class:"file-name"},fs={class:"file-name-box"},ms=["title"],gs={key:0},vs={class:"operate-panel"},ys=["onClick"],ws=["onClick"],Ts=["onClick"],bs=["onClick"],Ss={class:"file-size"},ks={class:"file-size-content"},Es={key:0,class:"fail"},_s={key:1},Cs={key:2},Is={class:"file-size-right"},Us={key:1,class:"no-attachments"},Fs={key:1,class:"tiny-upload-list__wrapper"},$s=["onKeydown"],Ds=["src"],Ls={key:0,class:"tiny-upload-list__item-tooltip"},As={key:1,class:"tiny-upload-list__item-tooltip"},Ps=["onClick","title"],Os={key:2,class:"tiny-upload-list__item-status-label"},Rs=["title","onClick"],Ms=["title","onClick"],Ns=["title","onClick"],zs={key:6,class:"tiny-icon-close-tip"},xs=["onClick"],Bs={class:"tiny-upload-list__item-tooltip"},js={key:0,class:"tiny-upload-list__item-actions"},Hs=["title","onClick"],Vs=["title","onClick"],Ws=["title","onClick"],Zs=["title","onClick"],Ys=["title"],Ks={key:0,class:"tiny-upload-list__text-title"},qs={class:"tiny-upload-list__text-desc"};function Gs(e,t,n,o,r,l){var i=D("icon-cue-l"),a=D("tiny-progress"),s=D("icon-operationfaild"),c=D("tiny-icon-document"),u=D("tiny-tooltip"),p=D("icon-successful"),h=D("icon-yes"),T=D("icon-file-cloudupload"),m=D("icon-refresh"),y=D("icon-download"),k=D("icon-fullscreen-left"),b=D("icon-view"),_=D("icon-del"),S=D("tiny-button");return e.listType==="saas"?(f(),w("div",{key:0,ref:"uploadList",class:P(["tiny-upload-list--saas",[e.state.files.length||e.mode==="bubble"?"border-zero":"border-top",{"mode-bubble":e.mode==="bubble"}]])},[e.state.files.length?(f(),w("div",is,[(f(!0),w(ge,null,Le(e.state.files,function(d){return f(),w("div",{ref_for:!0,ref:"uploadListLi",class:P(["tiny-upload-list-item",{selected:d.uid===(e.selected&&e.selected.uid),compact:e.compact}]),"data-tag":"tiny-upload-list-item",key:d.uid,tabindex:"0",onClick:function(E){return e.$emit("click-file-list",d)}},[K(e.$slots,"default",{file:d},function(){return[g("div",as,[~["uploading"].indexOf(d.status)?(f(),w(ge,{key:0},[ss,g("div",ds,[g("div",cs,[g("div",{class:"uploading-progress-bar",style:me({width:e.parsePercentage(Math.max(0,Math.min(d.percentage||0,100)))+"%"})},null,4)])])],64)):U("v-if",!0),~["uploading","success","downloading"].indexOf(d.status)?(f(),z(rt(e.getFileIcon({type:e.getFileType({file:d})}).name),{key:1,class:"file-icon",style:me({fill:e.getFileIcon({type:e.getFileType({file:d})}).color})},null,8,["style"])):U("v-if",!0),~["fail"].indexOf(d.status)?(f(),w("div",us,[v(i,{class:"upload-fail-icon"})])):U("v-if",!0)]),g("div",ps,[g("div",hs,[g("div",fs,[g("span",{title:d.name},F(d.name.split(".").filter(function(C,E,$){return $.length-1>E||$.length===1}).join(".")),9,ms),d.name.includes(".")?(f(),w("span",gs,"."+F(d.name.split(".")[d.name.split(".").length-1]),1)):U("v-if",!0)]),g("div",vs,[K(e.$slots,"operate",{file:d},function(){return[e.handlePreview&&~["success","downloading"].indexOf(d.status)?(f(),w("span",{key:0,class:"operate-btn",onClick:function(E){return e.handlePreview(d)}},F(e.t("ui.uploadList.preview")),9,ys)):U("v-if",!0),e.handleDownloadFile&&!~["fail","uploading"].indexOf(d.status)?(f(),w("span",{key:1,class:"operate-btn",onClick:function(E){return e.handleDownloadFile(d)}},F(e.t("ui.uploadList.download")),9,ws)):U("v-if",!0),(e.isEdm?!0:e.handleReUpload)&&~["fail"].indexOf(d.status)?(f(),w("span",{key:2,class:"operate-btn",onClick:function(E){return e.reUpload(d)}},F(e.t("ui.uploadList.reUpload")),9,Ts)):U("v-if",!0),e.displayOnly?U("v-if",!0):(f(),w("span",{key:3,class:"operate-btn",onClick:G(function(C){return e.remove({file:d})},["stop"])},F(e.t("ui.uploadList.delete")),9,bs))]})])]),g("div",Ss,[g("span",ks,[~["fail"].indexOf(d.status)?(f(),w("span",Es,[g("span",null,F(e.t("ui.uploadList.uploadFailed")),1)])):~["uploading"].indexOf(d.status)?(f(),w("span",_s,F(e.formatFileSize(d.size*d.percentage/100)+"/"+e.formatFileSize(d.size)),1)):(f(),w("span",Cs,F(e.formatFileSize(d.size)),1))]),g("span",Is,[K(e.$slots,"assist-content",{file:d})])])])]}),d.showDownloadBar?(f(),z(a,{key:0,class:"tiny-upload-list__download-bar","show-text":!1,"stroke-width":4,percentage:d.downloadPercentage||0,status:d.downloadStatus||"default"},null,8,["percentage","status"])):U("v-if",!0)],10,ls)}),128))])):(f(),w("div",Us,F(e.t("ui.uploadList.noAttachments")),1))],2)):(f(),w("div",Fs,[v(Co,{tag:"ul",class:P(["tiny-upload-list","tiny-upload-list--"+e.listType,{"is-disabled":e.disabled}]),name:"tiny-list"},{default:le(function(){return[(f(!0),w(ge,null,Le(e.files,function(d){return f(),w("li",{key:d.uid,tabindex:"0",class:"tiny-upload-list__li"},[g("div",{class:P(["tiny-upload-list__item","is-"+d.status,e.state.focusing?"focusing":"",{isEdm:e.isEdm},{showUpdate:e.listOption.showUpdate},{showDel:e.listOption.showDel}]),onKeydown:Cn(function(C){return!e.disabled&&e.$emit("remove",d)},["delete"]),onFocus:t[0]||(t[0]=function(C){return e.state.focusing=!0}),onBlur:t[1]||(t[1]=function(C){return e.state.focusing=!1}),onClick:t[2]||(t[2]=function(C){return e.state.focusing=!1})},[K(e.$slots,"default",{file:d},function(){return[d.status!=="uploading"&&d.status!=="fail"&&["picture-card","picture"].indexOf(e.listType)>-1?(f(),w("img",{key:0,class:"tiny-upload-list__item-thumbnail",src:d.url,alt:""},null,8,Ds)):U("v-if",!0),v(u,{placement:"top",effect:"light",disabled:e.state.tooltipDisabled},{content:le(function(){return[d.status==="fail"?(f(),w("span",Ls,[v(s,{class:"tiny-upload-list__icon-operationfaild"}),Ae(F(e.t("ui.fileUpload.networkError")),1)])):(f(),w("span",As,F(e.isFolderTitle?(d.path||"")+d.name:d.name),1))]}),default:le(function(){return[g("a",{class:P(["tiny-upload-list__item-name",{isFail:e.isEdm&&d.status==="fail"}]),onClick:function(E){return e.handleClick(E,d)},title:e.state.tooltipDisabled?e.isFolderTitle?(d.path||"")+d.name:d.name:""},[e.isFolder?U("v-if",!0):(f(),z(c,{key:0,fill:e.isEdm&&d.status==="fail"?"#f5222d":"",class:"tiny-svg-size"},null,8,["fill"])),Ae(F(d.name.length>e.maxNameLength?d.name.substring(0,e.maxNameLength)+"...":d.name),1)],10,Ps)]}),_:2},1032,["disabled"]),e.isEdm?(f(),w("div",{key:1,class:P(["tiny-upload-list__item-edminfo",{isFail:e.isEdm&&d.status==="fail"}])},[g("span",null,F(d.docId),1),g("span",null,F(d.version),1),g("span",null,F(d.size),1),g("span",null,F(d.serverName),1)],2)):U("v-if",!0),e.state.preViewComponent?U("v-if",!0):(f(),w("label",Os,[e.listType==="text"?(f(),z(p,{key:0,class:"tiny-svg-size icon-successful"})):U("v-if",!0),["picture-card","picture"].indexOf(e.listType)>-1?(f(),z(h,{key:1,class:"tiny-svg-size tiny-icon-check"})):U("v-if",!0)])),e.isEdm&&!e.isFolder&&!e.disabled&&d.status!=="fail"&&e.listOption.showUpdate?(f(),w("span",{key:3,title:e.t("ui.fileUpload.updateFile"),onClick:function(E){return e.$emit("update",d)}},[v(T,{class:"tiny-svg-size icon-refres",fill:e.isEdm&&d.status==="fail"?"#f5222d":""},null,8,["fill"])],8,Rs)):U("v-if",!0),!e.disabled&&e.reUploadable&&d.status==="fail"?(f(),w("span",{key:4,title:e.t("ui.fileUpload.reUploadFile"),onClick:function(E){return e.$emit("reUpload",d)}},[v(m,{class:"tiny-svg-size icon-refres",fill:e.isEdm?"#f5222d":""},null,8,["fill"])],8,Ms)):U("v-if",!0),!e.disabled&&e.listOption.showDel?(f(),w("span",{key:5,title:e.t("ui.fileUpload.deleteFile"),onClick:function(E){return e.$emit("remove",d)}},[(f(),z(rt(e.state.closeComponent),{class:"tiny-svg-size icon-close",fill:e.isEdm&&d.status==="fail"?"#f5222d":""},null,8,["fill"]))],8,Ns)):U("v-if",!0),!e.disabled&&e.listOption.showDel?(f(),w("i",zs,F(e.t("ui.fileUpload.deleteTip")),1)):U("v-if",!0),d.status==="uploading"||d.status==="downloading"?(f(),z(a,{key:7,status:"success",type:e.listType==="picture-card"?e.state.progressType:"line","stroke-width":e.listType==="picture-card"?e.state.progressStrokeWidth:2,width:e.state.progressWidth,percentage:e.parsePercentage(d.percentage),"show-text":!e.state.progressWidth},null,8,["type","stroke-width","width","percentage","show-text"])):U("v-if",!0),d.status==="uploading"&&e.listType==="picture-card"&&e.state.progressWidth?(f(),w("div",{key:8,class:"tiny-upload-list__item-cancel",onClick:function(E){return e.$emit("remove",d)}},F(e.t("ui.fileUpload.cancelFile")),9,xs)):U("v-if",!0),v(u,{placement:"top",effect:"light",disabled:e.state.tooltipDisabled||d.status!=="fail"},{content:le(function(){return[g("span",Bs,[v(s,{class:"tiny-upload-list__icon-operationfaild"}),Ae(F(e.t("ui.fileUpload.pictureNetworkError")),1)])]}),default:le(function(){return[e.listType==="picture-card"&&(e.state.progressWidth?d.status!=="uploading":!0)?(f(),w("span",js,[e.openDownloadFile?(f(),w("span",{key:0,class:"tiny-upload-list__item-download",title:e.t("ui.fileUpload.downloadFile"),onClick:function(E){return e.handleClick(d)}},[v(y,{class:"tiny-svg-size"})],8,Hs)):U("v-if",!0),e.handlePreview&&d.status!=="fail"?(f(),w("span",{key:1,class:"tiny-upload-list__item-preview",title:e.t("ui.fileUpload.previewFile"),onClick:function(E){return e.handlePreview(d)}},[e.state.preViewComponent?(f(),z(k,{key:0,class:"tiny-svg-size tiny-svg-fullscreen"})):(f(),z(b,{key:1,class:"tiny-svg-size"}))],8,Vs)):U("v-if",!0),e.isEdm&&!e.isFolder&&!e.disabled?(f(),w("span",{key:2,title:e.t("ui.fileUpload.updateFile"),class:"tiny-upload-list__item-refres",onClick:function(E){return e.$emit("update",d)}},[v(T,{class:"tiny-svg-size"})],8,Ws)):U("v-if",!0),e.disabled?U("v-if",!0):(f(),w("span",{key:3,class:"tiny-upload-list__item-delete",title:e.t("ui.fileUpload.deleteFile"),onClick:function(E){return e.$emit("remove",d)}},[v(_,{class:"tiny-svg-size icon-delete"})],8,Zs))])):U("v-if",!0)]}),_:2},1032,["disabled"])]})],42,$s),e.state.preViewComponent&&e.listType==="picture-card"?(f(),w("div",{key:0,class:P(["tiny-upload-list__li-title",d.status==="fail"&&"is-fail"]),title:e.isFolderTitle?(d.path||"")+d.name:d.name},F(d.name.length>e.maxNameLength?d.name.substring(0,e.maxNameLength)+"...":d.name),11,Ys)):U("v-if",!0)])}),128))]}),_:3},8,["class"]),e.reUploadable&&e.state.failUploadFileCount&&e.listType==="text"?(f(),w("div",Ks,[v(s,{class:"tiny-upload-list__icon-operationfaild"}),g("span",qs,F(typeof e.reUploadTip=="function"?e.reUploadTip(e.state.failUploadFileCount):e.t("ui.fileUpload.reUploadTip",{number:e.state.failUploadFileCount})),1),v(S,{type:"text",onClick:t[3]||(t[3]=function(d){return e.$emit("ReUploadTotal",e.files)})},{default:le(function(){return[Ae(F(e.t("ui.fileUpload.reUploadFile")),1)]}),_:1})])):U("v-if",!0)]))}var tn=os(rs,[["render",Gs]]);class Qs{constructor(t){this.recorder=null,this.mediaStream=null,this.recorderFile=null,this.audioContext=null,this.timeId=null,this.config=t}start(){return this.getUserMedia().then(({stream:t})=>(t&&(this.initMideaRecoder(t),this.initAudioContext(t)),!!t))}getUserMedia(){return new Promise(t=>{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||window.getUserMedia;const n={audio:!0};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(n).then(o=>t({stream:o})).catch(t):navigator.getUserMedia?navigator.getUserMedia(n,o=>t({stream:o}),t):t(new Error("Not support userMedia"))})}initMideaRecoder(t){this.recorder=new MediaRecorder(t),this.mediaStream=t;let n=[];this.recorder.onpause=()=>{},this.recorder.onresume=()=>{},this.recorder.ondataavailable=o=>{n.push(o.data)},this.recorder.onstop=()=>{this.recorderFile=new Blob(n,{type:this.recorder.mimeType}),n=[];const{onstop:o}=this.config;o&&o(this.recorderFile)},this.recorder.onerror=()=>{},this.recorder.start()}stop(){this.recorder.state!=="inactive"&&(this.recorder.stop(),this.closeStream(this.mediaStream),this.audioContext.close()),clearInterval(this.timeId),this.timeId=null}closeStream(t){typeof t.stop=="function"?t.stop():[t.getAudioTracks(),t.getVideoTracks()].forEach(o=>o&&o.forEach(r=>typeof r.stop=="function"&&r.stop()))}pause(){this.recorder.pause(),this.audioContext.suspend(),clearInterval(this.timeId),this.timeId=null}resume(){this.recorder.resume(),this.audioContext.resume(),clearInterval(this.timeId),this.timeId=setInterval(()=>this.getRealTimeAudio(),100)}initAudioContext(t){this.audioContext=new(window.AudioContext||window.webkitAudioContext);const n=this.audioContext.createMediaStreamSource(t);this.analyser=this.audioContext.createAnalyser(),n.connect(this.analyser),clearInterval(this.timeId),this.timeId=setInterval(()=>this.getRealTimeAudio(),100)}getRealTimeAudio(){const{onMediaProgress:t}=this.config;t&&t(this.analyser,this.audioContext)}}const Xs=({state:e})=>(t=!1)=>{e.record.now=Date.now(),e.record.fn||(e.record.fn=()=>{const n=Date.now();e.record.currentTime+=(n-e.record.now)/1e3,e.record.now=n}),t?(clearInterval(e.record.timer),e.record.timer=null,e.record.fn()):e.record.timer=setInterval(e.record.fn,1e3)},Js=({state:e,api:t,emit:n,constants:o,props:r})=>l=>{const{READY:i,RECORDING:a,PAUSE:s}=o.STATUS;r.isHwh5?e.record.status===i?t.triggerClick(l,o.HWH5_STATUS.START,()=>e.record.status=a):e.record.status===s?t.triggerClick(l,o.HWH5_STATUS.CONTINUE,()=>e.record.status=a):t.triggerClick(l,o.HWH5_STATUS.PAUSE,()=>e.record.status=s):e.record.status===i?(!e.recorder&&(e.recorder=new Qs({onMediaProgress:(c,u)=>{e.record.currentTime=u.currentTime,e.voiceNum=id(c)},onstop:c=>n("confirm",c)})),e.recorder.start().then(c=>{if(!c)return n("error");e.record.status=a})):e.record.status===s?(e.record.status=a,e.recorder.resume()):(e.record.status=s,e.recorder.pause())},ed=({state:e,emit:t,props:n,constants:o,api:r})=>l=>{n.isHwh5?r.triggerClick(l,o.HWH5_STATUS.END,()=>{t("update:modelValue",!1)}):(e.isClickConfirm=!0,t("update:modelValue",!1))},td=({emit:e,props:t,constants:n,api:o,state:r})=>l=>{t.isHwh5?o.triggerClick(l,n.HWH5_STATUS.CANCEL,()=>e("update:modelValue",!1)):(r.isClickConfirm=!0,e("update:modelValue",!1))},nd=({state:e})=>(t,n,o)=>{const r=e.listeners["trigger-click"]&&e.listeners["trigger-click"](t,n);r&&r.then?r.then(()=>o&&o()):o&&o()},od=({api:e})=>t=>!t&&e.resetRecord(),rd=({api:e,props:t,constants:n,state:o})=>r=>{r===n.STATUS.RECORDING?(t.isHwh5&&e.calcRecordTime(),e.renderAudioGraph()):r===n.STATUS.PAUSE&&t.isHwh5&&e.calcRecordTime(!0),cancelAnimationFrame(o.handlerId)},id=e=>{const t=new Uint8Array(e.fftSize);e.getByteTimeDomainData(t);let n=0,o=0;for(let a=0;a<e.fftSize;a++)n+=t[a]>128?t[a]-128:0,o+=t[a]<128?128-t[a]:0;let r=1;return![0,500,1e3,5e3,1e4].some((a,s)=>n<=a?r=s+1+(a===0?o/1e3:n/a):!1)&&(r=6),r},ld=({canvasCtx:e,width:t})=>{const n=({canvasCtx:l,width:i,colors:a=[]})=>{const s=l.createLinearGradient(0,0,i,0);return a.forEach(({n:c,color:u})=>s.addColorStop(c,u)),s},o=[{q:0,a:8,w:.02857142857142857,speed:-.05},{q:4,a:7,w:.02857142857142857,speed:-.1},{q:10,a:6,w:.02857142857142857,speed:-.3}],r=[[{n:0,color:"rgba(0, 109, 213, 0)"},{n:.5,color:"rgba(0, 109, 213, 0.8)"},{n:1,color:"rgba(0, 109, 213, 0)"}],[{n:0,color:"rgba(0, 14, 215, 0)"},{n:.5,color:"rgba(0, 14, 215, 0.4)"},{n:1,color:"rgba(0, 14, 215, 0)"}],[{n:0,color:"rgba(0, 109, 213, 0)"},{n:.5,color:"rgba(0, 109, 213, 0.3)"},{n:1,color:"rgba(0, 109, 213, 0)"}]];return o.forEach((l,i)=>{l.strokeStyle=n({canvasCtx:e,width:t,colors:r[i]})}),o},ad=({vm:e,nextTick:t,state:n,props:o})=>()=>{t(()=>{let r=e.$refs.canvas;if(r){const l=r.offsetHeight,i=r.offsetWidth;r.height=l,r.width=i;const a=r.getContext("2d"),s=ld({canvasCtx:a,width:i}),c=()=>{n.handlerId=requestAnimationFrame(c);let u=1;!o.isHwh5&&n.voiceNum&&(u=n.voiceNum.toFixed(1)),a.clearRect(0,0,i,l),a.fillStyle="#fff",a.fillRect(0,0,i,l),s.forEach(p=>{const{a:h,w:T,speed:m,strokeStyle:y}=p;a.lineWidth=1,a.strokeStyle=y;let k=0;a.beginPath(),a.moveTo(k,l/2),p.q+=m;for(let b=0;b<=i;b++){const _=h*u*Math.sin(T*b+p.q)+l/2;a.lineTo(b,_)}a.stroke()})};c()}})},sd=({state:e,constants:t})=>()=>{e.record.status=t.STATUS.READY,e.record.currentTime=0,e.isClickConfirm&&e.recorder&&e.recorder.recorder&&e.recorder.stop(),e.isClickConfirm=!1,clearInterval(e.record.timer),e.record.timer=null},dd=({api:e})=>()=>e.resetRecord(),cd=["state","toogleRecord","handleConfirm","handleCancel"],ud=({vm:e,api:t,reactive:n,computed:o})=>{const r=n({listeners:e.$listeners,record:{status:"ready",currentTime:0},recodeTime:o(()=>{const l=parseInt(r.record.currentTime),i=Math.floor(l/60),a=Math.floor(l%60);return`${i.toString().padStart(2,0)}:${a.toString().padStart(2,0)}`})});return Object.assign(t,{state:r}),r},pd=({api:e,state:t,emit:n,vm:o,constants:r,props:l,nextTick:i})=>{Object.assign(e,{toogleRecord:Js({state:t,api:e,emit:n,constants:r,props:l}),handleConfirm:ed({state:t,emit:n,props:l,constants:r,api:e}),watchModelValue:od({api:e}),renderAudioGraph:ad({vm:o,nextTick:i,state:t,props:l}),unmounted:dd({api:e}),resetRecord:sd({state:t,constants:r}),handleCancel:td({emit:n,props:l,constants:r,api:e,state:t}),triggerClick:nd({state:t}),watchRecordStatus:rd({api:e,props:l,constants:r,state:t}),calcRecordTime:Xs({state:t})})},hd=({watch:e,props:t,api:n,state:o})=>{e(()=>t.modelValue,n.watchModelValue,{immediate:!0}),e(()=>o.record.status,n.watchRecordStatus)},fd=(e,{reactive:t,watch:n,computed:o,onUnmounted:r,nextTick:l},{emit:i,vm:a,constants:s})=>{const c={},u=ud({vm:a,api:c,reactive:t,computed:o});return pd({api:c,state:u,emit:i,vm:a,constants:s,props:e,nextTick:l}),hd({watch:n,props:e,api:c,state:u}),r(c.unmounted),c};function md(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=gd(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gd(e,t){if(e){if(typeof e=="string")return nn(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}function nn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var vd=function(t,n){for(var o=t.__vccOpts||t,r=md(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},yd=Q({emits:["confirm","error","update:modelValue"],props:[].concat(ue,["modelValue","isHwh5","lockScroll"]),components:{TinyActionSheet:bn,IconMic:Pn()},inheritAttrs:!1,setup:function(t,n){return pe({props:t,context:n,renderless:fd,api:cd})}}),wd={"data-tag":"tiny-record"},Td={"data-tag":"tiny-record-header-default",class:"flex justify-center flex-wrap text-base text-color-text-secondary"},bd={key:0,ref:"canvas",class:"w-full h-full"},Sd={key:1,class:"absolute left-0 bottom-0 w-full"},kd={key:1,class:"w-6 h-6 bg-color-error rounded"};function Ed(e,t,n,o,r,l){var i=D("icon-mic"),a=D("tiny-action-sheet");return f(),w("div",wd,[v(a,{title:e.t("ui.record.record"),visible:e.modelValue,"lock-scroll":e.lockScroll,"custom-class":"pb-0","mask-closable":!1,"onUpdate:visible":t[3]||(t[3]=function(s){return e.$emit("update:modelValue",s)})},{"header-left":le(function(){return[g("div",{"data-tag":"tiny-record-header-left",class:"text-base text-color-text-secondary",onClick:t[0]||(t[0]=function(){return e.handleCancel&&e.handleCancel.apply(e,arguments)})},F(e.t("ui.record.cancel")),1)]}),"header-right":le(function(){return[g("div",{"data-tag":"tiny-record-header-right",class:P(["text-color-brand",["recording","pause"].includes(e.state.record.status)?"":"hidden"]),onClick:t[1]||(t[1]=function(){return e.handleConfirm&&e.handleConfirm.apply(e,arguments)})},F(e.t("ui.record.confirm")),3)]}),default:le(function(){return[g("div",Td,[g("div",{"data-tag":"tiny-record-time",class:P(["font-light",["recording","pause"].includes(e.state.record.status)?"visible":"invisible"])},F(e.state.recodeTime),3),g("div",{"data-tag":"tiny-record-ready",class:P(["relative w-full text-center px-4",["recording"].includes(e.state.record.status)?"h-24":"h-10 my-7"])},[["recording"].includes(e.state.record.status)?(f(),w("canvas",bd,null,512)):(f(),w("span",Sd,F(["ready"].includes(e.state.record.status)?e.t("ui.record.clickToStartRecording"):e.t("ui.record.clickToResumeRecording")),1))],2),g("div",{"data-tag":"tiny-record-recording",class:P(["flex w-16 h-16 justify-center items-center mt-0 m-10 border rounded-full cursor-pointer",[["recording"].includes(e.state.record.status)?"border-color-border-separator shadow-sm":"border-color-brand"]])},[g("div",{"data-tag":"tiny-record-tooglerecord",onClick:t[2]||(t[2]=function(){return e.toogleRecord&&e.toogleRecord.apply(e,arguments)})},[["recording"].includes(e.state.record.status)?(f(),w("div",kd)):(f(),z(i,{key:0,"custom-class":"w-10 h-10 fill-color-brand"}))])],2)])]}),_:1},8,["title","visible","lock-scroll"])])}var _d=vd(yd,[["render",Ed]]);function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},At.apply(null,arguments)}var Cd=function(t){var n;return typeof process=="object"&&((n={})==null||n.TINY_MODE),_d},Id={STATUS:{READY:"ready",RECORDING:"recording",PAUSE:"pause"},HWH5_STATUS:{START:"start",PAUSE:"pause",CONTINUE:"continue",CANCEL:"cancel",END:"end"}},Pe=Q({name:se+"Record",props:At({},Ve,{_constants:{type:Object,default:function(){return Id}},modelValue:Boolean,isHwh5:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0}}),setup:function(t,n){return He({props:t,context:n,template:Cd})}}),Ud="3.undefined";Pe.model={prop:"modelValue",event:"update:modelValue"};Pe.install=function(e){e.component(Pe.name,Pe)};Pe.version=Ud;function Fd(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=$d(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $d(e,t){if(e){if(typeof e=="string")return on(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}function on(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var Dd=function(t,n){for(var o=t.__vccOpts||t,r=Fd(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},Ld=Q({name:se+"UploadList",components:{TinyProgress:dt,IconError:Lt(),IconCueL:wn(),IconEyeopen:ko(),IconDownload:ct(),IconDel:yn(),IconRefres:Sr(),IconRight:Ln(),IconPause:Dn(),IconAudio:An(),IconEllipsis:Un(),TinyActionSheet:bn,IconExcelType:On(),IconFileType:Rn(),IconOtherType:Tn(),IconPdfType:Mn(),IconPictureType:Nn(),IconPptType:zn(),IconTextType:xn(),IconVideoType:Bn(),IconWordType:jn(),IconZipType:Hn(),IconFileuploadPro:Vn(),TinyRecord:Pe},emits:["remove","start","update:visible","click-file-list"],props:[].concat(ue,["disabled","display","files","filesIcon","handlePreview","isEdm","isFolder","listType","openDownloadFile","srcList","isFolderTitle","listOption","maxNameLength","scale","showName","types","edm","displayOnly","handleDownloadFile","handleReUpload","isDragover","selected","triggerClick","isHwh5","triggerPlay","mode","lockScroll","compact","imageBgColor"]),setup:function(t,n){return pe({props:t,context:n,renderless:oo,api:no,extendOptions:{Modal:Ie}})}}),Ad={"data-tag":"tiny-upload-list"},Pd={key:0,"data-tag":"tiny-upload-list-files",class:"text-[0]"},Od=["onClick"],Rd=g("div",{class:"w-full h-full absolute top-0 left-0 bg-black opacity-50 rounded-sm"},null,-1),Md={class:"w-full h-full absolute top-0 left-0 overflow-hidden flex px-1 items-center justify-center rounded-sm"},Nd={"data-tag":"tiny-upload-list-animation",class:"bg-color-icon-tertiary w-full h-0.5 rounded"},zd={key:2,"data-tag":"tiny-upload-list-fail",class:"relative w-full h-full bg-black/50 rounded"},xd={"data-tag":"tiny-upload-list-content",class:"relative inline-block w-[calc(100%-theme(spacing.10))] text-xs pr-10 sm:pr-0"},Bd={class:"flex","data-tag":"tiny-upload-list-name"},jd={class:"flex-1 sm:mr-6 text-sm sm:text-xs leading-5.5 text-color-text-primary overflow-hidden text-ellipsis whitespace-nowrap"},Hd=["title"],Vd={key:0},Wd={"data-tag":"tiny-upload-list-operate",class:"hidden sm:block sm:invisible sm:group-hover:visible min-w-fit text-color-brand-hover text-xs"},Zd=["onClick"],Yd=["onClick"],Kd=["onClick"],qd=["onClick"],Gd={class:"flex h-5 leading-5","data-tag":"tiny-upload-list-content"},Qd={class:"overflow-hidden text-ellipsis whitespace-nowrap sm:font-normal"},Xd={key:0},Jd={class:"hidden sm:inline text-color-error-hover"},ec={class:"inline sm:hidden text-color-error-hover"},tc={key:1,class:"text-color-text-placeholder"},nc={key:2,class:"text-color-text-placeholder"},oc={class:"flex-1 ml-2 overflow-hidden text-ellipsis whitespace-nowrap text-right text-color-none"},rc={"data-tag":"tiny-upload-list-icon",class:"sm:invisible absolute top-1/2 right-2 -translate-y-1/2 cursor-pointer"},ic=["onClick"],lc={key:1,"data-tag":"tiny-upload-list-drag-single",class:"border-dashed border-color-border text-center"},ac={key:0},sc={key:1,class:"h-full"},dc={key:0},cc={class:"mt-4.5"},uc={class:"mt-1 pl-1 align-middle text-color-error text-xs"},pc={key:1},hc={class:"relative inline-block w-12 h-12 mt-6 align-top"},fc={key:0,class:"w-1/2 h-full absolute top-0 left-0 rounded-l overflow-hidden"},mc={key:1,class:"w-1/2 h-full absolute top-0 left-1/2 rounded-r overflow-hidden"},gc={class:"mt-3 mb-2"},vc=["onClick"],yc=["onKeydown"],wc={class:"absolute top-0 left-0 w-full h-full"},Tc=["src"],bc=["src"],Sc=["src"],kc={key:1,class:"flex w-full h-full justify-center items-center border rounded border-transparent bg-color-info-secondary-subtle"},Ec=["onLoadedmetadata","onTimeupdate"],_c=["src"],Cc=["src"],Ic=["src"],Uc=["src"],Fc=["title"],$c={class:"absolute w-full top-1/2 left-0 -translate-y-1/2 z-[1] text-center hover:cursor-pointer"},Dc={key:0},Lc={class:"mt-3 text-color-text-inverse text-xs"},Ac={key:1},Pc={class:"block sm:group-hover:hidden"},Oc={class:"mt-1 text-color-text-inverse text-xs"},Rc={class:"hidden sm:group-hover:block"},Mc={key:2},Nc={key:1},zc=["onClick"],xc={class:"absolute top-0 left-0 w-full h-full"},Bc={"data-tag":"tiny-upload-list-download",class:"text-center"},jc=g("div",{class:"h-2 bg-color-bg-2"},null,-1),Hc={"data-tag":"tiny-upload-list-vadio-content",class:"text-center"},Vc=g("div",{class:"h-2 bg-color-bg-2"},null,-1);function Wc(e,t,n,o,r,l){var i=D("icon-cue-l"),a=D("icon-ellipsis"),s=D("icon-error"),c=D("tiny-progress"),u=D("icon-fileupload-pro"),p=D("icon-refres"),h=D("icon-del"),T=D("icon-eyeopen"),m=D("icon-download"),y=D("icon-right"),k=D("icon-pause"),b=D("icon-audio"),_=D("tiny-action-sheet"),S=D("tiny-record");return f(),w("div",Ad,[e.listType==="text"||e.listType==="saas"?(f(),w("div",{key:0,"data-tag":"tiny-upload-list-text",ref:"uploadList",class:P(["border-dashed border-color-border",[e.state.files.length||e.mode==="bubble"?"sm:border-0":"sm:border-t",{"sm:h-52 overflow-y-auto overflow-x-hidden":e.mode==="bubble"}]])},[e.state.files.length?(f(),w("div",Pd,[(f(!0),w(ge,null,Le(e.state.files,function(d,C){return f(),w("div",{"data-tag":"tiny-upload-list-item",ref_for:!0,ref:"uploadListLi",class:P(["group relative sm:inline-block min-w-full py-1.5 px-3 mr-2 border-0.5 sm:border border-color-border-separator rounded hover:bg-color-bg-2",{"sm:border-color-brand border-color-border-separator":d.uid===(e.selected&&e.selected.uid),"mb-2":C!==e.state.files.length-1,"sm:min-w-[theme(spacing.112)]":e.compact}]),key:d.uid,tabindex:"0",onClick:function($){return e.$emit("click-file-list",d)}},[K(e.$slots,"default",{file:d},function(){return[g("div",{"data-tag":"tiny-upload-list-status",class:P(["relative inline-block w-8 h-8 mr-2 align-top mt-1 pt-px",{"bg-color-error rounded-sm":~["fail"].indexOf(d.status)}])},[~["uploading"].indexOf(d.status)?(f(),w(ge,{key:0},[Rd,g("div",Md,[g("div",Nd,[g("div",{class:"bg-white h-full transition-all",style:me({width:e.parsePercentage(Math.max(0,Math.min(d.percentage||0,100)))+"%"})},null,4)])])],64)):U("v-if",!0),~["uploading","success","downloading"].indexOf(d.status)?(f(),z(rt(e.getFileIcon({type:e.getFileType({file:d})}).name),{key:1,"custom-class":"w-full h-full rounded-sm",style:me({fill:e.getFileIcon({type:e.getFileType({file:d})}).color})},null,8,["style"])):U("v-if",!0),~["fail"].indexOf(d.status)?(f(),w("div",zd,[v(i,{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 fill-color-error"})])):U("v-if",!0)],2),g("div",xd,[g("div",Bd,[g("div",jd,[g("span",{title:d.name},F(d.name.split(".").filter(function(E,$,V){return V.length-1>$||V.length===1}).join(".")),9,Hd),d.name.includes(".")?(f(),w("span",Vd,"."+F(d.name.split(".")[d.name.split(".").length-1]),1)):U("v-if",!0)]),g("div",Wd,[K(e.$slots,"operate",{file:d},function(){return[e.handlePreview&&~["success","downloading"].indexOf(d.status)?(f(),w("span",{key:0,class:"mr-2 cursor-pointer",onClick:function($){return e.handlePreview(d)}},F(e.t("ui.uploadList.preview")),9,Zd)):U("v-if",!0),e.handleDownloadFile&&!~["fail","uploading"].indexOf(d.status)?(f(),w("span",{key:1,class:"mr-2 cursor-pointer",onClick:function($){return e.handleDownloadFile(d)}},F(e.t("ui.uploadList.download")),9,Yd)):U("v-if",!0),(e.isEdm?!0:e.handleReUpload)&&~["fail"].indexOf(d.status)?(f(),w("span",{key:2,class:"mr-2 cursor-pointer",onClick:function($){return e.reUpload(d)}},F(e.t("ui.uploadList.reUpload")),9,Kd)):U("v-if",!0),e.displayOnly?U("v-if",!0):(f(),w("span",{key:3,class:"cursor-pointer",onClick:G(function(E){return e.remove({file:d})},["stop"])},F(e.t("ui.uploadList.delete")),9,qd))]})])]),g("div",Gd,[g("span",Qd,[~["fail"].indexOf(d.status)?(f(),w("span",Xd,[g("span",Jd,F(e.t("ui.uploadList.uploadFailed")),1),g("span",ec,F(e.t("ui.uploadList.uploadFailedAndReupload")),1)])):~["uploading"].indexOf(d.status)?(f(),w("span",tc,F(e.formatFileSize(d.size*d.percentage/100)+"/"+e.formatFileSize(d.size)),1)):(f(),w("span",nc,F(e.formatFileSize(d.size)),1))]),g("span",oc,[K(e.$slots,"assist-content",{file:d})])]),g("div",rc,[~["success","downloading"].indexOf(d.status)?(f(),z(a,{key:0,onClick:function($){return e.showOperatePanel({file:d})},class:"fill-color-text-primary"},null,8,["onClick"])):U("v-if",!0),!e.displayOnly&&~["uploading","fail"].indexOf(d.status)?(f(),z(s,{key:1,class:"fill-color-none-hover",onClick:G(function(E){return e.remove({file:d})},["stop"])},null,8,["onClick"])):U("v-if",!0)]),g("div",{class:"absolute left-0 top-0 w-[calc(100%-theme(spacing.10))] h-full mr-10 sm:hidden sm:mr-0",onClick:function($){return e.reUpload(d)}},null,8,ic)])]}),d.showDownloadBar?(f(),z(c,{key:0,class:"absolute left-0 bottom-0 w-full","show-text":!1,"stroke-width":4,percentage:d.downloadPercentage||0,status:d.downloadStatus||"default"},null,8,["percentage","status"])):U("v-if",!0)],10,Od)}),128))])):(f(),w("div",{key:1,"data-tag":"tiny-upload-list-noattachments",class:P(["mt-4 text-color-none text-xs sm:block",e.displayOnly?"":"hidden"])},F(e.t("ui.uploadList.noAttachments")),3))],2)):e.listType==="drag-single"?(f(),w("div",lc,[K(e.$slots,"upload"),g("div",{class:P(["absolute w-full h-full top-0 left-0",[e.files.length?"z-0":"z-[-1]"]])},[e.files.length?(f(),w("div",sc,[(f(!0),w(ge,null,Le(e.files,function(d){return f(),w("div",{key:d.uid,tabindex:"0"},[K(e.$slots,"default",{file:d},function(){return[["fail"].includes(d.status)?(f(),w("div",dc,[v(u,{"custom-class":"w-12 h-12 mt-6",class:P([e.isDragover?"fill-color-brand":"fill-color-none-hover"])},null,8,["class"]),g("div",cc,[v(i,{class:"fill-color-error"}),g("span",uc,F(e.t("ui.uploadList.uploadFailed")),1)])])):(f(),w("div",pc,[g("div",hc,[~["uploading"].indexOf(d.status)?(f(),w("div",fc,[g("div",{class:"absolute w-16 h-16 top-1/2 right-0 origin-right bg-color-bg-7",style:me({transform:"translateY(-50%) rotate("+e.parsePercentage(Math.max(0,Math.min(d.percentage||0,100)-50)/50*180)+"deg)"})},null,4)])):U("v-if",!0),~["uploading"].indexOf(d.status)?(f(),w("div",mc,[g("div",{class:"absolute w-16 h-16 top-1/2 left-0 origin-left bg-color-bg-7",style:me({transform:"translateY(-50%) rotate("+e.parsePercentage(Math.min(50,d.percentage||0)/50*180)+"deg)"})},null,4)])):U("v-if",!0),~["uploading","success","downloading"].indexOf(d.status)?(f(),z(rt(e.getFileIcon({type:e.getFileType({file:d})}).name),{key:2,"custom-class":"w-full h-full rounded-sm",style:me({fill:e.getFileIcon({type:e.getFileType({file:d})}).color})},null,8,["style"])):U("v-if",!0)]),g("div",gc,F(d.name),1),g("div",null,[g("span",{class:"text-color-brand cursor-pointer",onClick:G(function(C){return e.remove({file:d})},["stop"])},F(e.t("ui.uploadList.delete")),9,vc)])]))]})])}),128))])):(f(),w("div",ac,[v(u,{"custom-class":"w-20 h-20 mt-6",class:P([e.isDragover?"fill-color-brand":"fill-color-none-hover"])},null,8,["class"]),g("div",{class:P(["mb-0.5 text-sm text-color-text-secondary",e.isDragover?"mt-4":""])},F(e.isDragover?e.t("ui.uploadList.releaseAndUpload"):e.t("ui.uploadList.dragOrClickImport")),3),e.isDragover?U("v-if",!0):K(e.$slots,"tip",{key:0})]))],2)])):(f(),w("div",{key:2,"data-tag":"tiny-upload-list-picture-card",class:P([{"grid grid-cols-3 gap-x-4 sm:grid-cols-[repeat(auto-fit,theme(spacing.24))]":e.listType==="picture-card"},e.showName?"gap-y-8":"gap-y-4"])},[(f(!0),w(ge,null,Le(e.files,function(d,C){return f(),w("div",{class:P(["group relative",{hidden:e.listType==="picture-single"&&C},e.listType==="picture-single"?"w-24 h-24 sm:w-[calc("+e.scale+"*theme(spacing.20))] sm:h-20":"w-full pt-[100%]"]),key:d.uid,tabindex:"0",onKeydown:Cn(function(E){return!e.disabled&&e.remove({file:d})},["delete"])},[g("div",wc,[K(e.$slots,"default",{file:d},function(){return[!e.displayOnly&&(d.status!=="uploading"||~["video","audio"].indexOf(d.type))?(f(),z(s,{key:0,class:P(["absolute w-5 h-5 -top-1.5 fill-color-none-hover hover:cursor-pointer z-[1]",[{"sm:hidden -top-1.5":!~["video","audio"].indexOf(d.type)},(e.listType==="picture-single","-right-1.5")]]),onClick:G(function(E){return e.remove({file:d})},["stop"])},null,8,["class","onClick"])):U("v-if",!0),g("div",{style:me({background:e.imageBgColor}),class:P(["relative w-full h-full after:absolute after:w-full after:h-full after:left-0 after:top-0 after:rounded after:bg-color-bg-7",[~["uploading","fail"].indexOf(d.status)?"":"after:hidden sm:after:group-hover:block",{"mb-7":e.listType==="picture-card"&&e.showName},~["video","audio"].indexOf(d.type)?"after:opacity-0":"after:opacity-50"]])},[d.type==="video"?(f(),w("video",{key:0,ref_for:!0,ref:"video"+(d.uid||C),class:"w-full h-full border rounded object-cover"},[g("source",{src:d.url,type:"video/mp4"},null,8,Tc),g("source",{src:d.url,type:"video/ogg"},null,8,bc),g("source",{src:d.url,type:"video/webm"},null,8,Sc)],512)):d.type==="audio"?(f(),w("div",kc,[g("audio",{ref_for:!0,ref:"audio"+(d.uid||C),onLoadedmetadata:function($){e.handleLoadedmetadata({e:$,file:d})},onTimeupdate:function($){e.handleTimeupdate({e:$,file:d})}},[g("source",{src:d.url,type:"video/mp3"},null,8,_c),g("source",{src:d.url,type:"video/ogg"},null,8,Cc),g("source",{src:d.url,type:"video/wav"},null,8,Ic)],40,Ec)])):(f(),w("img",{key:2,class:"w-full h-full border rounded",src:d.url,alt:""},null,8,Uc)),g("div",{title:d.name,class:P(["mt-2 overflow-hidden overflow-ellipsis whitespace-nowrap text-color-text-primary text-xs",{hidden:!e.showName}])},F(d.name),11,Fc),g("div",$c,[~["uploading"].indexOf(d.status)?(f(),w("div",Dc,[v(c,{class:"inline-block w-[calc(100%-theme(spacing.10))]",percentage:e.parsePercentage(d.percentage),"show-text":!1,"stroke-width":4,color:"#fff"},null,8,["percentage"]),g("div",Lc,F(~["video","audio"].indexOf(d.type)?e.t("ui.uploadList.uploading"):e.t("ui.uploadList.pictureUploading")),1)])):~["fail"].indexOf(d.status)?(f(),w("div",Ac,[g("span",Pc,[v(i,{class:"w-6 h-6 fill-color-icon-inverse"}),g("div",Oc,F(e.t("ui.uploadList.uploadFailed")),1)]),g("span",Rc,[e.isEdm||e.handleReUpload?(f(),z(p,{key:0,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function($){return e.reUpload(d)}},null,8,["onClick"])):U("v-if",!0),!e.displayOnly&&e.listType!=="picture-single"?(f(),z(h,{key:1,class:"w-6 h-6 fill-color-icon-inverse",onClick:G(function(E){return e.remove({file:d})},["stop"])},null,8,["onClick"])):U("v-if",!0)])])):(f(),w("div",Mc,[g("div",{class:P(["hidden",{"sm:group-hover:block":!~["video","audio"].indexOf(d.type)}])},[K(e.$slots,"operate",{file:d},function(){return[e.handlePreview?(f(),z(T,{key:0,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function($){return e.handlePreview(d)}},null,8,["onClick"])):U("v-if",!0),e.handleDownloadFile?(f(),z(m,{key:1,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function($){return e.handleDownloadFile(d)}},null,8,["onClick"])):U("v-if",!0),e.displayOnly?U("v-if",!0):(f(),z(h,{key:2,class:"w-6 h-6 fill-color-icon-inverse",onClick:G(function(E){return e.remove({file:d})},["stop"])},null,8,["onClick"]))]})],2),d.type==="video"?(f(),w("div",{key:0,class:P(["inline-block w-8 h-8 text-center rounded-full group-hover:bg-color-bg-7",d.isPlay?"bg-opacity-0":"bg-color-bg-7"])},[qt(v(y,{class:"w-4 h-4 mt-2 fill-color-icon-inverse",onClick:function($){return e.play({file:d,index:C,type:"video"})}},null,8,["onClick"]),[[Gt,!d.isPlay]]),qt(v(k,{class:"w-6 h-6 hidden group-hover:inline-block mt-1 fill-color-icon-inverse",onClick:function($){return e.pause({file:d,index:C,type:"video"})}},null,8,["onClick"]),[[Gt,d.isPlay]])],2)):U("v-if",!0),d.type==="audio"?(f(),w("div",Nc,[v(b,{class:"w-6 h-6 fill-color-brand",onClick:function($){return e.play({file:d,index:C,type:"audio"})}},null,8,["onClick"]),g("div",null,F((d.currentSecond||0)+" / "+(d.totalSecond||0)),1)])):U("v-if",!0)]))])],6),e.handlePreview&&~["success"].indexOf(d.status)?(f(),w("div",{key:1,class:"absolute w-full h-full left-0 top-0 sm:hidden",onClick:function($){return e.handlePreview(d)}},null,8,zc)):U("v-if",!0)]})])],42,yc)}),128)),(f(!0),w(ge,null,Le(e.types,function(d,C){return f(),w("div",{key:C,class:P(["relative",[e.listType==="picture-single"?"w-24 h-24 sm:w-[calc("+e.scale+"*theme(spacing.20))] sm:h-20":"pt-[100%]",{hidden:e.displayOnly&&e.files.length},{hidden:!e.displayOnly&&e.listType==="picture-single"&&e.files.length}]])},[g("div",xc,[K(e.$slots,"upload",{type:d})])],2)}),128))],2)),v(_,{"show-header":!1,"lock-scroll":e.lockScroll,visible:e.state.showPanel,"onUpdate:visible":t[4]||(t[4]=function(d){return e.state.showPanel=d}),"custom-class":"!min-h-0 py-0"},{default:le(function(){return[K(e.$slots,"operate",{file:e.state.currentFile||{}},function(){return[g("div",Bc,[e.handleDownloadFile?(f(),w("div",{key:0,class:"h-12 flex items-center justify-center border-b border-color-border-separator cursor-pointer",onClick:t[0]||(t[0]=function(){e.state.showPanel=!1,e.handleDownloadFile(e.state.currentFile)})},F(e.t("ui.uploadList.download")),1)):U("v-if",!0),e.handlePreview?(f(),w("div",{key:1,"data-tag":"tiny-upload-list-handle-preview",class:"h-12 flex items-center justify-center border-b border-color-border-separator cursor-pointer",onClick:t[1]||(t[1]=function(){e.state.showPanel=!1,e.handlePreview(e.state.currentFile)})},F(e.t("ui.uploadList.preview")),1)):U("v-if",!0),e.displayOnly?U("v-if",!0):(f(),w("div",{key:2,"data-tag":"tiny-upload-list-panel",class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[2]||(t[2]=G(function(){e.state.showPanel=!1,e.remove({file:e.state.currentFile})},["stop"]))},F(e.t("ui.uploadList.delete")),1)),jc,g("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[3]||(t[3]=function(d){return e.state.showPanel=!1})},F(e.t("ui.uploadList.cancel")),1)])]})]}),_:3},8,["lock-scroll","visible"]),v(_,{"show-header":!1,"lock-scroll":e.lockScroll,visible:e.state.showTriggerPanel,"onUpdate:visible":t[8]||(t[8]=function(d){return e.state.showTriggerPanel=d}),"custom-class":"!min-h-0 py-0"},{default:le(function(){return[g("div",Hc,[g("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[5]||(t[5]=function(d){return e.handleTriggerClick(d,e.state.triggerClickType==="video"?3:2)})},F(e.t("ui.uploadList.shoot")),1),g("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[6]||(t[6]=function(d){return e.handleTriggerClick(d,1)})},F(e.t("ui.uploadList.selectFromAlbum")),1),Vc,g("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[7]||(t[7]=function(d){return e.state.showTriggerPanel=!1})},F(e.t("ui.uploadList.cancel")),1)])]}),_:1},8,["lock-scroll","visible"]),v(S,{"is-hwh5":e.isHwh5,onTriggerClick:e.handleTriggerClick,modelValue:e.state.showAudioPanel,"onUpdate:modelValue":t[9]||(t[9]=function(d){return e.state.showAudioPanel=d})},null,8,["is-hwh5","onTriggerClick","modelValue"])])}var Zc=Dd(Ld,[["render",Wc]]);function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Pt.apply(null,arguments)}var Yc=function(t){var n,o=typeof process=="object"?(n={})==null?void 0:n.TINY_MODE:null;return(o||t)==="pc"?tn:(o||t)==="mobile-first"?Zc:tn},Kc=Pt({},Ve,{disabled:{type:Boolean,default:function(){return!1}},display:{type:Boolean,default:function(){return!0}},files:{type:Array,default:function(){return[]}},filesIcon:{type:Array,default:function(){return[]}},handlePreview:Function,isEdm:{type:Boolean,default:function(){return!1}},isFolder:{type:Boolean,default:function(){return!1}},listType:String,openDownloadFile:{type:Boolean,default:function(){return!1}},srcList:{type:Array,default:function(){return[]}},isFolderTitle:{type:Boolean,default:!1},listOption:{type:Object,default:function(){return{showUpdate:!0,showDel:!0}}},maxNameLength:{type:Number,default:20},scale:{type:[Number,String],default:1},showName:{type:Boolean,default:!1},types:Array,displayOnly:{type:Boolean,default:!1},handleDownloadFile:Function,handleReUpload:Function,isDragover:Boolean,selected:Object,triggerClick:{type:Function,default:function(){}},isHwh5:{type:Boolean,default:!1},triggerPlay:{type:Function,default:function(){}},mode:String,lockScroll:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},imageBgColor:String}),ve=Q({name:se+"UploadList",props:Kc,setup:function(t,n){return He({props:t,context:n,template:Yc,extend:{ref:"upload-list-inner-template"}})}}),qc="3.undefined";ve.install=function(e){e.component(ve.name,ve)};ve.version=qc;const Gc=e=>e.includes("image"),Qc=e=>t=>{const n=t.target.files;!n||e.uploadFiles(n)},Xc=({api:e,props:t})=>n=>{var o;if(n.preventDefault(),!t.pasteUpload)return;const r=(o=n.clipboardData)==null?void 0:o.items;if(!r)return;const l=[];for(let i=0;i<r.length;i++){const a=r[i].getAsFile();a&&l.push(a)}!l.length||e.uploadFiles(l)},Jc=({constants:e,state:t,props:n})=>({formData:o,file:r,type:l})=>{const i=t.uploader.$refs[e.FILE_UPLOAD_INNER_TEMPLATE];if(i.edm.upload){const s=i.edm.upload.params;for(let c in s)o.set(c,s[c]||"")}o.append(e.EDM.FILENAME,r.name),i.edm.isCheckCode===!0?(o.append(e.EDM.ISCHECKCODE,"Y"),o.append(e.EDM.CHECKCODE,r.hash)):o.append(e.EDM.ISCHECKCODE,"N"),n.isFolder&&o.append("filePath",r.path);const a=t.updateId||i.edm.updateId;if(l===e.EDM.SINGLEUPLOAD)o.append(e.EDM.MULTIPART,r,n.isFolder?r.path+r.name:r.name),a&&o.append(e.EDM.DOCID,a);else{const s=a||r.docId;o.append(e.EDM.DOCID,s),o.append(e.EDM.FILESIZE,r.size)}a&&(o.append("updateFile",!0),t.updateId="")},eu=({state:e,constants:t,Modal:n,props:o,t:r})=>l=>{if(e.updateId===""&&o.limit&&o.fileList.length+l.length>o.limit){const a=e.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE];a&&!a.state.listeners.exceed&&n.message({message:r(t.EDM.NumberExceed,{number:o.limit}),status:"warning"}),o.onExceed&&o.onExceed(l,o.fileList);return}let i=Array.prototype.slice.call(l);o.isFolder?i=i.filter(a=>{const s=a.webkitRelativePath.split("/");return a.path=s.slice(0,s.length-1).join("/")+"/",s.length>=7&&n.message({message:`${a.name}${r(t.EDM.FOLDERKEY)}`,status:"warning"}),s.length<7}):o.multiple||(i=i.slice(0,1)),i.length!==0&&o.onStart&&o.onStart(i,e.updateId)},tu=({api:e,props:t,refs:n})=>o=>{if(n.input.value=null,!t.beforeUpload)return e.post(o);const r=t.beforeUpload(o);r&&r.then?r.then(l=>{const i=Object.prototype.toString.call(l);if(i==="[object File]"||i==="[object Blob]"){i==="[object Blob]"&&(l=new File([l],o.name,{type:o.type}));for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&(l[a]=o[a]);e.post(l)}else e.post(o)},()=>{t.onRemove(null,o)}):r!==!1?e.post(o):t.onRemove(null,o)},nu=({state:e,props:t,constants:n})=>o=>{const{reqs:r}=e,l=function(i){var a;(a=r[i])!=null&&a.abort?r[i].abort(""):e.cancelToken[i]&&e.cancelToken[i](""),delete r[i],delete e.cancelToken[i]};if(o&&o.isLargeFile&&o.cancelToken)o.cancelToken&&o.cancelToken.forEach(i=>i("")),delete o.cancelToken;else if(o){let i=o;o.uid&&(i=o.uid),l(i)}else{const{READY:i,UPLOADING:a,FAIL:s}=n.FILE_STATUS;Object.keys(r).forEach(c=>l(c||"")),t.fileList.forEach(c=>{c.cancelToken&&c.cancelToken.forEach(u=>u("")),[i,a].includes(c.status)&&(c.status=s)})}},ou=({props:e,state:t,rawFile:n,uploaderInner:o,uid:r})=>({headers:Object.assign(e.headers||{},t.headers||{}),withCredentials:e.withCredentials,file:n,data:e.data,filename:e.name,action:o.action||e.action,onSuccess:l=>{e.onSuccess&&e.onSuccess(l,n),delete t.reqs[r]},onProgress:l=>{e.onProgress&&e.onProgress(l,n)},onError:l=>{e.onError&&e.onError(l,n),delete t.reqs[r]}}),ru=({service:e,props:t,options:n,rawFile:o,state:r,uid:l,uploaderInner:i,api:a,constants:s})=>{if(e&&e.network&&t.httpRequest===e.network.request){n.method="post",n.url=n.action,n.onUploadProgress=p=>{t.onProgress&&t.onProgress(p,o)},delete n.action,delete n.onProgress;const c=new FormData,u=e.network.CancelToken.source();n.cancelToken=u.token,r.cancelToken[l]=u.cancel,i.edm.upload&&(!o.isLargeFile&&(n.method="put"),n.data=n.data||{}),n.data&&Object.keys(n.data).forEach(p=>{c.append(p,n.data[p])}),Array.isArray(o)?o.forEach(p=>c.append(p.name,p.raw||p)):r.isEdm?a.getFormData({formData:c,file:o,type:o.isLargeFile?"":s.EDM.SINGLEUPLOAD}):c.append(n.filename,o,o.name),n.data=c}},iu=({state:e,props:t,rawFile:n,uploaderInner:o,uid:r})=>{const l=o.edm,i=l&&l.upload&&l.upload.params||{};return Object.assign({edmAuth:{edmToken:t.edmToken.edmToken,appId:o.hwh5.appId},filePath:n.filePath,progress:1},i,{onProgress:a=>{t.onProgress(a,n)},onSuccess:a=>{t.onSuccess(a,n),delete e.reqs[r]},onError:a=>{t.onError(a,n),delete e.reqs[r]}})},lu=({api:e,constants:t,props:n,state:o,service:r})=>l=>{const{uid:i}=l,a=o.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE];let s;a.state.isHwh5?s=iu({state:o,props:n,rawFile:l,uploaderInner:a,uid:i}):(s=ou({props:n,state:o,rawFile:l,uploaderInner:a,uid:i}),ru({service:r,props:n,options:s,rawFile:l,state:o,uid:i,uploaderInner:a,api:e,constants:t}));const c=u=>{if(n.httpRequest){const p=n.httpRequest(u);o.reqs[i]=p,p&&p.then&&p.then(u.onSuccess,u.onError)}};l.isLargeFile?r.common.getChunkMergeUrl().then(u=>{s.url=u,c(s)}):c(s)},au=({props:e,refs:t,state:n})=>(o,r)=>{if(e.disabled||e.displayOnly||n.isStopPropagation)return;const{uploader:l,uploadInner:i}=n,{encryptConfig:a={}}=l,s=i.$parent,c=()=>{typeof e.handleTriggerClick=="function"&&e.handleTriggerClick(o,r),!e.isHwh5&&(t.input.value=null,n.isStopPropagation=!0,t.input.click(),n.isStopPropagation=!1)};if(typeof l.beforeAddFile=="function"){o.preventDefault();let u;const p=l.beforeAddFile(()=>{!u&&c()});u=p&&typeof p.then=="function",u?p.then(()=>c()).catch(()=>null):p&&c()}else a&&a.enabled&&s?(s.state.encryptDialogConfig.show=!0,s.state.encryptDialogConfig.selectFileMethod=()=>{c()}):c()},su=e=>t=>{t.target===t.currentTarget&&(t.keyCode===Kt.Enter||t.keyCode===Kt.Space)&&e.handleClick(t,"")},du=({props:e,state:t})=>n=>{!e.disabled&&t.updateInput&&(t.updateInput.value="",t.updateId=n.docId,t.updateInput.click())},cu=({state:e,props:t,api:n})=>()=>{let o=document.createElement("input");o.type="file",o.name=t.name,o.accept=t.accept||"",o.onchange=n.handleChange,e.updateInput=Object.freeze(o)},uu=e=>()=>{e.updateInput=null},ro=["state","isImage","handleChange","handlePaste","uploadFiles","upload","abort","post","handleClick","handleKeydown","handleUpdate"],io=(e,{computed:t,inject:n,reactive:o,onMounted:r,onBeforeUnmount:l},{refs:i,service:a,t:s,useBreakpoint:c},{Modal:u})=>{const p={},h=n("uploader"),T=h.$constants,{current:m}=c(),y=o({currentBreakpoint:m,mouseover:!1,reqs:{},uploader:h,accecpt:"",uploadInner:t(()=>y.uploader.$refs[T.FILE_UPLOAD_INNER_TEMPLATE]),isEdm:t(()=>y.uploadInner.state.isEdm),openEdmDownload:t(()=>y.uploadInner.edm.download),headers:t(()=>{if(y.isEdm)return{[T.EDM.EDMTOKEN]:e.edmToken.edmToken||"",[T.EDM.TRACEID]:e.edmToken.traceId||""}}),formData:{},cancelToken:{},updateId:"",updateInput:null,isStopPropagation:!1});return Object.assign(p,{state:y,isImage:Gc,abort:nu({state:y,props:e,constants:T}),getFormData:Jc({state:y,constants:T,props:e}),handleClick:au({props:e,refs:i,state:y}),onBeforeDestroy:uu(y),handleUpdate:du({state:y,props:e}),uploadFiles:eu({constants:T,Modal:u,props:e,state:y,t:s}),post:lu({api:p,constants:T,props:e,state:y,service:a}),handleChange:Qc(p),handlePaste:Xc({api:p,props:e}),handleKeydown:su(p),upload:tu({api:p,props:e,refs:i}),mounted:cu({state:y,props:e,api:p})}),r(p.mounted),l(p.onBeforeDestroy),p},pu=({props:e,state:t})=>()=>!e.disabled&&(t.dragover=!0),hu=({emit:e,props:t,state:n})=>async o=>{if(t.disabled||!n.uploader)return;const r=n.uploader.accept;let l=o.dataTransfer.files;const i=o.dataTransfer.items&&o.dataTransfer.items[0].webkitGetAsEntry().isDirectory;if(n.uploadFiles=[],n.dragover=!1,i){const s=o.dataTransfer.items[0].webkitGetAsEntry();await lo(s,n),l=n.uploadFiles}if(!r){e("file",l);return}const a=[];[].slice.call(l).filter(s=>{const{type:c,name:u}=s,p=u.includes(".")?`.${u.split(".").pop()}`:"",h=c.replace(/\/.*$/,"");let T=r.split(",").map(m=>m.trim()).filter(m=>m).some(m=>/\..+$/.test(m)?p===m:/\/\*$/.test(m)?h===m.replace(/\/\*$/,""):!!/^[^/]+\/[^/]+$/.test(m));return!T&&a.push(s),T}),a.length&&n.uploader.$emit("drop-error",a),e("file",l)},fu=({state:e,constants:t})=>()=>{e.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE].$emit("drag-over",e.dragover)};async function lo(e,t){const n=e.createReader(),o=await new Promise(r=>{n.readEntries(l=>{r(l)})});for(let r=0;r<o.length;r++){const l=o[r];l.isFile?await new Promise(i=>{l.file(a=>{t.uploadFiles.push(a),i(void 0)})}):l.isDirectory&&await lo(l,t)}}const ao=["state","onDragOver","onDrop"],so=(e,{inject:t,reactive:n,ref:o,watch:r},{emit:l})=>{const i=n({dragover:!1,uploadFiles:[],uploader:t("uploader")||o({default:""})}),a=i.uploader.$constants||{},s={state:i,onDragOver:pu({props:e,state:i}),onDrop:hu({emit:l,props:e,state:i}),watchDragover:fu({state:i,constants:a})};return r(()=>i.dragover,()=>s.watchDragover()),s};function mu(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=gu(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gu(e,t){if(e){if(typeof e=="string")return rn(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rn(e,t):void 0}}function rn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var vu=function(t,n){for(var o=t.__vccOpts||t,r=mu(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},yu=Q({name:se+"UploadDragger",emits:["file"],props:[].concat(ue,["disabled"]),setup:function(t,n){return pe({props:t,context:n,renderless:so,api:ao})}});function wu(e,t,n,o,r,l){return f(),w("div",{class:P(["tiny-upload-dragger",{"is-dragover":e.state.dragover}]),onDrop:t[0]||(t[0]=G(function(){return e.onDrop&&e.onDrop.apply(e,arguments)},["prevent"])),onDragover:t[1]||(t[1]=G(function(){return e.onDragOver&&e.onDragOver.apply(e,arguments)},["prevent"])),onDragleave:t[2]||(t[2]=G(function(i){return e.state.dragover=!1},["prevent"]))},[K(e.$slots,"default")],34)}var ln=vu(yu,[["render",wu]]);function Tu(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=bu(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bu(e,t){if(e){if(typeof e=="string")return an(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}function an(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var Su=function(t,n){for(var o=t.__vccOpts||t,r=Tu(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},ku=Q({name:se+"UploadDragger",emits:["file"],props:[].concat(ue,["disabled","customClass"]),setup:function(t,n){return pe({props:t,context:n,renderless:so,api:ao})}});function Eu(e,t,n,o,r,l){return f(),w("div",{"data-tag":"tiny-upload-dragger",class:P(e.m("min-w-[theme(spacing.72)] min-h-[theme(spacing.40)] border border-dashed rounded",e.state.dragover?"border-color-brand":"border-color-none-hover",e.customClass)),onDrop:t[0]||(t[0]=G(function(){return e.onDrop&&e.onDrop.apply(e,arguments)},["prevent"])),onDragover:t[1]||(t[1]=G(function(){return e.onDragOver&&e.onDragOver.apply(e,arguments)},["prevent"])),onDragleave:t[2]||(t[2]=G(function(i){return e.state.dragover=!1},["prevent"]))},[K(e.$slots,"default")],34)}var _u=Su(ku,[["render",Eu]]);function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ot.apply(null,arguments)}var Cu=function(t){var n,o=typeof process=="object"?(n={})==null?void 0:n.TINY_MODE:null;return(o||t)==="pc"?ln:(o||t)==="mobile-first"?_u:ln},Iu=Ot({},Ve,{disabled:Boolean,customClass:[String,Object,Array]}),Oe=Q({name:se+"UploadDragger",props:Iu,setup:function(t,n){return He({props:t,context:n,template:Cu})}}),Uu="3.undefined";Oe.install=function(e){e.component(Oe.name,Oe)};Oe.version=Uu;function Fu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var sn=Q({inheritAttrs:!1,name:se+"Upload",props:[].concat(ue,["accept","action","autoUpload","beforeUpload","pasteUpload","data","disabled","drag","edmToken","fileList","headers","httpRequest","isFolder","limit","listType","multiple","name","onError","onExceed","onPreview","onProgress","onRemove","onStart","onSuccess","type","withCredentials","isHidden","handleTriggerClick"]),setup:function(t,n){return pe({props:t,context:n,renderless:io,api:ro,h:B,extendOptions:{Modal:Ie}})},render:function(){var t=this.accept,n=this.disabled,o=this.drag,r=this.handleChange,l=this.handleClick,i=this.handlePaste,a=this.handleKeydown,s=this.isFolder,c=this.listType,u=this.multiple,p=this.name,h=this.uploadFiles,T=this.fileList,m=this.limit,y=this.isHidden,k=this.type,b=this.slots.default&&this.slots.default()||[],_=this.slots.operate&&this.slots.operate(),S=this.slots.tip&&this.slots.tip(),d=y&&T.length>=m;return!d&&v("div",{class:["tiny-upload","tiny-upload--"+c,n?"is-disabled":""]},[v("div",{class:"tiny-upload-btn",onClick:function(E){return l(E,k)},onPaste:i,onKeydown:a,tabindex:"0"},[o?v(Oe,{disabled:n,onFile:h},Fu(b)?b:{default:function(){return[b]}}):b]),_,S,v("input",{class:"tiny-upload__input",type:"file",webkitdirectory:s,ref:"input",name:p,onChange:r,multiple:s?!0:u,accept:t},null)])}});function dn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var $u=Q({inheritAttrs:!1,name:se+"Upload",components:{TinyTooltip:at,TinyIconHelpCircle:Sn()},props:[].concat(ue,["accept","action","autoUpload","beforeUpload","data","disabled","drag","edmToken","fileList","headers","httpRequest","isFolder","limit","listType","multiple","name","onError","onExceed","onPreview","onProgress","onRemove","onStart","onSuccess","type","withCredentials","scale","sourceType","displayOnly","customClass","handleTriggerClick","mode","showTitle","isHwh5","tipMessage","promptTip","showFileList"]),setup:function(t,n){return pe({props:t,context:n,renderless:io,api:ro,h:B,extendOptions:{Modal:Ie}})},render:function(){var t,n=this.accept,o=this.disabled,r=this.handleChange,l=this.handleClick,i=this.handleKeydown,a=this.isFolder,s=this.multiple,c=this.name,u=this.uploadFiles,p=this.listType,h=this.displayOnly,T=this.customClass,m=this.sourceType,y=this.mode,k=this.showTitle,b=this.state,_=this.tipMessage,S=this.promptTip,d=this.showFileList,C=this.slots.default&&this.slots.default(),E=this.slots.tip&&this.slots.tip(),$=this.slots.operate&&this.slots.operate(),V=y==="bubble",q=k,W={bubbling:!0},A=function(){return v("div",{"data-tag":"tiny-upload-drag-single",class:"h-full",onClick:function(te){return l(te,m)},onKeydown:i,tabindex:"0"},[p==="drag-single"?v(Oe,{customClass:T,disabled:o,onFile:u},dn(C)?C:{default:function(){return[C]}}):C])};return v("div",{"data-tag":"tiny-upload",class:[!h&&p==="text"?"flex mt-4 mb-2 "+(V?"sm:my-0":q?"sm:my-3":"sm:mt-0"):"h-full",d?"sm:mb-3":"sm:mb-0"]},[b.currentBreakpoint==="default"&&E&&v("div",{class:"flex items-center sm:hidden inline-block text-sm"},[E]),b.currentBreakpoint==="default"&&A(),b.currentBreakpoint!=="default"&&!h&&(S&&_?v("div",{class:"hidden sm:inline-flex sm:items-center"},[A(),v(D("tiny-tooltip"),{effect:"light",content:_,placement:"right","popper-options":W},{default:function(){return[v(D("tiny-icon-help-circle"),{"custom-class":"ml-2 cursor-pointer fill-color-icon-tertiary"},null)]}})]):p==="text"?v("div",{class:"hidden sm:inline-flex sm:items-center"},[A(),v("div",{title:typeof _=="string"?_:"",class:"hidden sm:block text-xs leading-4 overflow-hidden whitespace-nowrap text-ellipsis text-color-text-placeholder ml-2 cursor-pointer"},[_])]):v(D("tiny-tooltip"),{effect:"light",content:_,placement:"top","popper-options":W},dn(t=A())?t:{default:function(){return[t]}})),$,v("input",{class:"hidden",type:"file",webkitdirectory:a,ref:"input",name:c,onChange:r,multiple:a?!0:s,accept:n},null)])}});function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Rt.apply(null,arguments)}var Du=function(t){var n,o=typeof process=="object"?(n={})==null?void 0:n.TINY_MODE:null;return(o||t)==="pc"?sn:(o||t)==="mobile-first"?$u:sn},Lu=Rt({},Ve,{accept:String,action:{type:String,default:""},autoUpload:Boolean,beforeUpload:Function,pasteUpload:Boolean,data:Object,disabled:Boolean,drag:Boolean,edmToken:{type:Object,default:function(){return{}}},fileList:{type:Array,default:function(){return[]}},headers:Object,httpRequest:{type:Function,default:mn},isFolder:{type:Boolean,default:!1},limit:Number,listType:String,multiple:Boolean,name:{type:String,default:"file"},onError:Function,onExceed:Function,onPreview:{type:Function,default:function(){}},onProgress:Function,onRemove:{type:Function,default:function(){}},onStart:Function,onSuccess:Function,type:String,withCredentials:Boolean,isHidden:{type:Boolean,default:!1},scale:{type:[Number,String],default:1},sourceType:{type:String,default:"picture",validator:function(t){return t.split("/").every(function(n){return["picture","video","audio"].includes(n)})}},displayOnly:{type:Boolean,default:!1},customClass:[String,Object,Array],handleTriggerClick:{type:Function,default:function(){}},mode:String,showTitle:Boolean,isHwh5:{type:Boolean,default:!1},tipMessage:{type:String,default:""},promptTip:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!0}}),ye=Q({name:se+"Upload",props:Lu,setup:function(t,n){return He({props:t,context:n,template:Du,extend:{ref:"upload-inner-template"}})}}),Au="3.undefined";ye.install=function(e){e.component(ye.name,ye)};ye.version=Au;var co={exports:{}};/*! streamsaver. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */(function(e){((t,n)=>{e.exports=n()})("streamSaver",()=>{const t=typeof window=="object"?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let n=null,o=!1;const r=m=>{try{m()}catch{}},l=t.WebStreamsPolyfill||{},i=t.isSecureContext;let a=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const s=i||"MozAppearance"in document.documentElement.style?"iframe":"navigate",c={createWriteStream:T,WritableStream:t.WritableStream||l.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function u(m){if(!m)throw new Error("meh");const y=document.createElement("iframe");return y.hidden=!0,y.src=m,y.loaded=!1,y.name="iframe",y.isIframe=!0,y.postMessage=(...k)=>y.contentWindow.postMessage(...k),y.addEventListener("load",()=>{y.loaded=!0},{once:!0}),document.body.appendChild(y),y}function p(m){const y="width=200,height=100",k=document.createDocumentFragment(),b={frame:t.open(m,"popup",y),loaded:!1,isIframe:!1,isPopup:!0,remove(){b.frame.close()},addEventListener(...S){k.addEventListener(...S)},dispatchEvent(...S){k.dispatchEvent(...S)},removeEventListener(...S){k.removeEventListener(...S)},postMessage(...S){b.frame.postMessage(...S)}},_=S=>{S.source===b.frame&&(b.loaded=!0,t.removeEventListener("message",_),b.dispatchEvent(new Event("load")))};return t.addEventListener("message",_),b}try{new Response(new ReadableStream),i&&!("serviceWorker"in navigator)&&(a=!0)}catch{a=!0}r(()=>{const{readable:m}=new TransformStream,y=new MessageChannel;y.port1.postMessage(m,[m]),y.port1.close(),y.port2.close(),o=!0,Object.defineProperty(c,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function h(){n||(n=i?u(c.mitm):p(c.mitm))}function T(m,y,k){let b={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},_=0,S=null,d=null,C=null;if(Number.isFinite(y)?([k,y]=[y,k],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),b.size=k,b.writableStrategy=y):y&&y.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),b.size=k,b.writableStrategy=y):b=y||{},!a){h(),d=new MessageChannel,m=encodeURIComponent(m.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const $={transferringReadable:o,pathname:b.pathname||Math.random().toString().slice(-6)+"/"+m,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+m}};b.size&&($.headers["Content-Length"]=b.size);const V=[$,"*",[d.port2]];if(o){const q=s==="iframe"?void 0:{transform(A,ee){if(!(A instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");_+=A.length,ee.enqueue(A),S&&(location.href=S,S=null)},flush(){S&&(location.href=S)}};C=new c.TransformStream(q,b.writableStrategy,b.readableStrategy);const W=C.readable;d.port1.postMessage({readableStream:W},[W])}d.port1.onmessage=q=>{q.data.download?s==="navigate"?(n.remove(),n=null,_?location.href=q.data.download:S=q.data.download):(n.isPopup&&(n.remove(),n=null,s==="iframe"&&u(c.mitm)),u(q.data.download)):q.data.abort&&(E=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null)},n.loaded?n.postMessage(...V):n.addEventListener("load",()=>{n.postMessage(...V)},{once:!0})}let E=[];return!a&&C&&C.writable||new c.WritableStream({write($){if(!($ instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(a){E.push($);return}d.port1.postMessage($),_+=$.length,S&&(location.href=S,S=null)},close(){if(a){const $=new Blob(E,{type:"application/octet-stream; charset=utf-8"}),V=document.createElement("a");V.href=URL.createObjectURL($),V.download=m,V.click()}else d.port1.postMessage("end")},abort(){E=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null}},b.writableStrategy)}return c})})(co);var uo=co.exports;function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mt.apply(null,arguments)}function cn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var Pu=$n(),Ou=Bt(),Ru=jt(),un=ct(),Mu=Ht(),Nu=Fn(),zu=Sn(),pn=Q({inheritAttrs:!1,props:[].concat(ue,["edm","action","headers","data","multiple","name","drag","dragger","withCredentials","showFileList","accept","type","beforeUpload","beforeRemove","fileList","autoUpload","listType","httpRequest","disabled","limit","openDownloadFile","mergeService","fileSize","thumbOption","isFolderTitle","listOption","maxNameLength","isHidden","sourceType","cacheToken","pasteUpload","reUploadable","reUploadTip","encryptConfig","title","showTitle","displayOnly","compact","promptTip"]),emits:["change","hash-progress","progress","success","error","remove","download"],setup:function(t,n){return pe({props:t,context:n,renderless:to,api:Jn,extendOptions:{Modal:Ie,Streamsaver:uo}})},components:{TinyProgress:dt,UploadList:ve,Upload:ye,TinyDialogBox:kn,Popover:Eo,TinyButton:Ce,TinyInput:En,TinySwitch:_n,TinyTooltip:at},render:function(){var t=this,n,o=this.state.listeners,r=o.exceed,l=r===void 0?function(){}:r,i=o.preview,a=i===void 0?void 0:i,s=o["download-all"],c=o["download-file"],u=o["re-upload"],p=this.state,h=p.uploadFiles,T=p.isEdm,m=p.dialogConfigObj,y=p.isSuccess,k=p.uploadDisabled,b=p.url,_=p.accept,S=p.httpRequest,d=p.edmToken,C=p.iframeUrl,E=this.downloadFile,$=this.handleRemove,V=this.handleReUpload,q=this.handleReUploadTotal,W=this.updateFile,A=this.slots,ee=this.edm,Z=ee===void 0?{}:ee,te=this.t,we=this.$attrs,ut=this.a,pt=this.encryptConfig,Ue=this.encryptDialogConfirm,Re=this.handleTriggerClick,ht=this.handleClickFileList,ft=this.handleFileClick,he=this.displayOnly,fe=this.listType,mt=this.compact,We=this.promptTip,Ze=fe==="picture-card",Te=fe==="saas",be=this.thumbOption,Ye=be.showDel,Ke=be.showDownload,gt=be.showTooltip,vt=be.showUpdate,yt=be.icon,wt=this.thumbOption.downloadFile||E,Fe=Z.upload?Z.upload.isFolder:!1,Tt=this.slots.notice&&this.slots.notice(),bt=this.title||te("ui.fileUpload.attachment"),St=function(L,M){return v("div",{class:"tiny-upload-title"},[v("span",{class:[M?"title-show":"title-hide",he?"display-only":""]},[L])])},Me={bubbling:!0},ce=function(L,M){return v("div",{class:"trigger-btn"},[v(D("tiny-button"),{disabled:M,onClick:Re},{default:function(){return[v(Nu,null,null),v("span",null,[L("ui.fileUpload.uploadFile")])]}})])},kt=function(L,M,J){return L&&Te?v("div",{class:"operate-content"},[v(D("tiny-button"),{onClick:function(){return L(M)}},{default:function(){return[v("div",{class:"button-wrap"},[v(un,null,null),v("span",null,[J("ui.fileUpload.downloadAll")])])]}})]):null},Et=function(L){return We?A.tip&&A.tip()||L&&We&&v(D("tiny-tooltip"),{effect:"light",content:A.tip&&A.tip()||L,placement:"right","popper-options":Me},{default:function(){return[v("div",{class:"prompt-tip"},[v(zu,null,null)])]}}):v("div",{class:"tip-wrap"},[v("div",{title:L,class:"tip-content"},[A.tip&&A.tip()||L])])},_t=function(L){return[Ke&&v("span",{class:"thumb-icon",title:te("ui.fileUpload.downloadFile"),onClick:function(){return wt(L)}},[v(un,{class:"download-icon"},null)]),T&&!Fe&&vt&&v("span",{class:"thumb-icon",title:te("ui.fileUpload.updateFile"),onClick:function(){return W(L)}},[v(Mu,{class:"refres-icon"},null)]),Ye&&v("span",{class:"thumb-icon",title:te("ui.fileUpload.deleteFile"),onClick:function(){return $(L)}},[v(Ru,{class:"close-icon"},null)])]},qe=function(L){var M=A.file&&A.file({file:L});return M||[v(Ou,{class:"thumb-success-icon"},null),v("span",{class:["thumb-item-name",Ye?"":"hide-close-icon",Ke?"":"hide-download-icon"]},[L.name]),_t(L)]},$e=function(){return v("span",null,[h.length])};if(this.showFileList)if(fe==="thumb")n=h.length===0?"":B("div",{class:"tiny-upload--thumb__wrap"},[B("Popover",{props:{trigger:"hover",popperClass:this.thumbOption.popperClass,width:this.thumbOption.width},scopedSlots:{reference:function(){return B("div",{class:"tiny-upload--thumb__head"},[B(yt||Pu,{class:"thumb-icon"}),$e()])},default:function(){return B("div",{class:"tiny-upload--thumb__body"},[B("div",{class:"tiny-upload--thumb__list"},[h.map(function(L){return B("Popover",{props:{content:L.name,trigger:gt?"hover":"manual",placement:"top"},scopedSlots:{reference:function(){return B("div",{class:"thumb-item",on:{click:function(){ft(L)}}},[qe(L)])}}})})])])}}})]);else{var Ct={props:{disabled:k,reUploadable:this.reUploadable,reUploadTip:this.reUploadTip,isFolder:Fe,isEdm:T,edm:Z,displayOnly:he,listType:fe,files:h,isFolderTitle:this.isFolderTitle,listOption:this.listOption,maxNameLength:this.maxNameLength,handlePreview:a,handleDownloadFile:c,handleReUpload:u,openDownloadFile:this.openDownloadFile,compact:mt},scopedSlots:{default:function(L){if(A.file)return A.file({file:L.file})},tip:function(){return Se},"assist-content":function(L){if(A["assist-content"])return A["assist-content"]({file:L.file})},operate:function(L){if(A.operate)return A.operate({file:L.file})}},on:{remove:$,reUpload:V,reUploadTotal:q,update:W,start:this.handleStart,"click-file-list":ht,"update:visible":function(L){return t.state.visible=L}},ref:"upload-list-inner"};n=B(ve,Ct)}var Ne={props:{type:this.type,drag:this.drag,action:b,multiple:this.multiple,withCredentials:this.withCredentials,headers:this.headers,name:this.name,data:this.data,edm:this.edm,accept:T?_:this.accept,fileList:h,autoUpload:this.autoUpload,listType:fe,disabled:k,displayOnly:he,limit:this.limit,onExceed:l,onStart:this.handleStart,onProgress:this.handleProgress,onSuccess:this.handleSuccess,onError:this.handleError,onPreview:a,httpRequest:S,isFolder:Fe,edmToken:d,pasteUpload:this.pasteUpload,isHidden:this.isHidden},ref:"upload-inner"},It=this.getTipMessage({accept:T?_:this.accept,fileSize:this.fileSize,limit:this.limit}),Se=!he&&Te?Et(It):null;Se&&Se.data&&(Se.data.slot="tip");var De=he?null:kt(s,h,te);De&&De.data&&(De.data.slot="operate");var Ge=A.default&&A.default(),ne=A.trigger?A.trigger():Ge,Qe=function(){var L=!ne&&Te&&!he?ce(te,t.disabled):ne,M={default:function(){return L},tip:function(){return Se},operate:function(){return De}};return M},ze=B(ye,Ne,Qe()),xe=null,Be=null;T&&y&&(Ne.props.accept=_,Ne.props.edmToken=d),this.edm.preview&&(xe=B("tiny-dialog-box",Mt({minHeight:"600px",width:"60%"},m,{scopedSlots:{default:function(){return v("iframe",{id:"_iframe",style:"display: block;width: 100%;height: 500px;display: inline-block;",allowfullscreen:!0,allowtransparency:"true",frameborder:"0",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",src:C},null)}}}))),pt.enabled&&(Be=B("tiny-dialog-box",{class:"encrypt-config-dialog",style:"",props:{lockScroll:!0,visible:this.state.encryptDialogConfig.show,dragable:!0,title:this.t("ui.fileUpload.encryptDialogTitle"),width:"380px",height:"auto"},on:{"update:visible":function(L){return t.state.encryptDialogConfig.show=L}},scopedSlots:{default:function(){return v("div",{class:"encrypt-config-dialog-body"},[v("div",{class:"encrypt-item"},[t.t("ui.fileUpload.addWatermark")]),v("div",null,[v(D("tiny-input"),{modelValue:t.encryptConfig.watermark,"onUpdate:modelValue":function(M){return t.encryptConfig.watermark=M}},null)]),v("p",null,[Ae("\xA0")]),v("div",{class:"encrypt-item"},[t.t("ui.fileUpload.encrypted")]),v("div",null,[v(D("tiny-switch"),{modelValue:t.encryptConfig.encrypt,"onUpdate:modelValue":function(M){return t.encryptConfig.encrypt=M}},null)])])},footer:function(){var L,M;return[v(Ce,{onClick:function(){return t.state.encryptDialogConfig.show=!1}},cn(L=t.t("ui.base.cancel"))?L:{default:function(){return[L]}}),[v(Ce,{type:"primary",onClick:function(){return Ue()}},cn(M=t.t("ui.popupload.uploadButtonText"))?M:{default:function(){return[M]}})]]}}}));var Xe=ut(we,["^on[A-Z]"]);return v("div",In({class:"tiny-file-upload"},Xe),[Te?St(bt,this.showTitle):"",Tt,Ze?n:"",A.trigger?[ze,Ge]:ze,!Te&&A.tip&&A.tip(),Ze?"":n,xe,Be])}});function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Nt.apply(null,arguments)}function hn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var xu=Q({inheritAttrs:!1,emits:["change","hash-progress","error","progress","success","remove","download","trigger-click","click-file-list"],props:[].concat(ue,["edm","action","headers","data","multiple","name","drag","dragger","withCredentials","showFileList","accept","type","beforeUpload","beforeRemove","fileList","autoUpload","listType","httpRequest","disabled","limit","openDownloadFile","mergeService","fileSize","thumbOption","isFolderTitle","listOption","maxNameLength","scale","showName","sourceType","showTitle","title","displayOnly","customClass","hwh5","mode","cacheToken","lockScroll","compact","encryptConfig","imageBgColor","promptTip"]),setup:function(t,n){return pe({props:t,context:n,renderless:to,api:Jn,extendOptions:{Modal:Ie,Streamsaver:uo}})},components:{TinyProgress:dt,UploadList:ve,Upload:ye,TinyDialogBox:kn,TinyTooltip:at,IconAttachment:$n(),IconSuccessful:Bt(),IconCloseCircle:jt(),IconDownload:ct(),IconFileCloudupload:Ht(),TinyButton:Ce,IconPlus:Fn(),IconPlusCircle:gr(),IconPicture:cr(),IconMic:Pn(),IconStartCircle:xr(),IconHelpQuery:Jo(),TinyModal:Ie},render:function(){var t=this,n=this.state.listeners,o=n.exceed,r=o===void 0?function(){}:o,l=n.preview,i=l===void 0?void 0:l,a=n["download-file"],s=n["download-all"],c=n["re-upload"],u=n["trigger-click"],p=n.play,h=this.state,T=h.uploadFiles,m=h.isEdm,y=h.dialogConfigObj,k=h.isSuccess,b=h.uploadDisabled,_=h.url,S=h.accept,d=h.httpRequest,C=h.edmToken,E=h.iframeUrl,$=h.isDragover,V=h.selected,q=h.types,W=h.isHwh5,A=this.handleRemove,ee=this.updateFile,Z=this.slots,te=this.edm,we=te===void 0?{}:te,ut=this.$attrs,pt=this.a,Ue=this.t,Re=this.showTitle,ht=this.isFolderTitle,ft=this.listOption,he=this.maxNameLength,fe=this.scale,mt=this.showName,We=this.openDownloadFile,Ze=this.type,Te=this.drag,be=this.multiple,Ye=this.withCredentials,Ke=this.headers,gt=this.name,vt=this.data,yt=this.autoUpload,wt=this.limit,Fe=this.handleStart,Tt=this.handleProgress,bt=this.handleSuccess,St=this.handleError,Me=this.fileSize,ce=this.displayOnly,kt=this.customClass,Et=this.handleClickFileList,_t=this.handleTriggerClick,qe=this.showFileList,$e=this.mode,Ct=this.lockScroll,Ne=this.compact,It=this.encryptConfig,Se=this.encryptDialogConfirm,De=this.imageBgColor,Ge=this.promptTip,ne=this.listType==="saas"?"text":this.listType,Qe=this.title||Ue("ui.fileUpload.attachment"),ze=ne==="drag-single",xe=ne==="text",Be=we.upload?we.upload.isFolder:!1,Xe=function(I){var O=I.listType,N=I.title,Y=I.showTitle,oe=I.isInside,re=oe===void 0?!1:oe,X=I.displayOnly,ie=X===void 0?!1:X,ke=I.mode,Ee;if(re)Ee=v("span",{class:Y?"inline-block mr-1 text-sm text-color-text-primary font-bold":"hidden"},[N]);else{var _e="text-sm text-color-text-primary font-bold leading-5.5 ";O!=="text"?_e+="hidden":!ie&&Y?_e+="hidden sm:block":!ie||!Y?_e+="hidden":_e+="mt-4 mb-2",Ee=ke!=="bubble"?v("div",{class:_e},[v("span",{class:"mr-1"},[N]),ie&&L({isEdm:m,fileSize:Me})]):null}return Ee},x=function(I){var O=I.listType,N=I.title,Y=I.showTitle,oe=I.isEdm,re=I.accept,X=I.fileSize,ie=I.slots,ke,Ee=t.getTipMessage({accept:oe?re:t.accept,fileSize:X,limit:t.limit}),_e={bubbling:!0};return O==="text"?ke=v("div",{class:"inline-block w-full sm:pl-4 text-color-none"},[v("div",{class:"block sm:hidden"},[Xe({listType:O,title:N,showTitle:Y,isInside:!0}),v(D("tiny-tooltip"),{effect:"dark",content:Ee,placement:"top","popper-options":_e},{default:function(){return[v(D("icon-help-query"),{class:"-mt-0.5 fill-color-none-hover"},null)]}})])]):O==="drag-single"?ke=v("div",{title:Ee,class:"leading-5 text-color-text-primary overflow-hidden text-ellipsis whitespace-nowrap"},[ie.tip&&ie.tip()||Ee]):ke=ie.tip?v("div",{class:"mb-4 text-color-none"},[ie.tip()]):null,ke},L=function(I){var O=I.isEdm,N=I.fileSize,Y={bubbling:!0};return v(D("tiny-tooltip"),{class:"inline-block sm:hidden",effect:"dark",content:t.getTipMessage({accept:O?S:t.accept,fileSize:N,limit:t.limit}),placement:"top","popper-options":Y},{default:function(){return[v(D("icon-help-query"),{class:"-mt-0.5  fill-color-none-hover"},null)]}})},M=function(I){var O=I.listType,N=I.t,Y=I.type,oe=I.disabled,re={picture:v("div",null,[v(D("icon-picture"),{class:"w-6 h-6 fill-color-icon-secondary"},null),v("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[N("ui.upload.addPicture")])]),audio:v("div",null,[v(D("icon-mic"),{class:"w-6 h-6 fill-color-icon-secondary"},null),v("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[N("ui.upload.addAudio")])]),video:v("div",null,[v(D("icon-start-circle"),{class:"w-6 h-6 fill-color-icon-secondary"},null),v("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[N("ui.upload.addVideo")])])},X;if(O==="text")X=v("div",{class:"inline-block"},[v(D("tiny-button"),{disabled:oe,class:"hidden sm:block"},{default:function(){return[v("div",{class:"flex items-center"},[v(D("icon-plus"),null,null),v("span",{class:"ml-2"},[N("ui.fileUpload.uploadFile")])])]}}),v(D("icon-plus-circle"),{"custom-class":"sm:hidden w-5 h-5"},null)]);else if(O==="drag-single")X=null;else{var ie="relative h-full border border-dashed border-color-border rounded bg-color-bg-2 align-top hover:cursor-pointer";O==="picture-single"&&T.length&&(ie+=" hidden"),X=v("div",{class:ie},[v("div",{class:"absolute w-full top-1/2 left-0 -translate-y-1/2 z-[1] text-center"},[re[Y||"picture"]])])}return X},J=function(I){var O=I.listType,N=I.downloadAll,Y=I.uploadFiles,oe=I.t,re;return O==="text"&&(re=N?v("div",{class:"hidden sm:inline-block align-middle"},[v(D("tiny-button"),{onClick:function(){return N(Y)}},{default:function(){return[v("div",{class:"flex items-center"},[v(D("icon-download"),null,null),v("span",{class:"ml-2"},[oe("ui.fileUpload.downloadAll")])])]}})]):null),re},Ut=function(I){var O=I.displayOnly,N=I.slots,Y=I.listType,oe=I.t,re=I.type,X=I.disabled;return!O||O&&["picture-card","picture-single"].includes(re)?N.trigger?N.trigger():M({listType:Y,t:oe,type:re,disabled:X}):null},je=ce?null:x({listType:ne,title:Qe,showTitle:Re,isEdm:m,accept:S,fileSize:Me,slots:Z});je&&je.data&&(je.data.slot="tip");var Je=ce?null:J({listType:ne,downloadAll:s,uploadFiles:T,t:Ue});Je&&Je.data&&(Je.data.slot="operate");var po=function(I){var O=Ut({displayOnly:ce,slots:Z,listType:ne,t:Ue,type:I,disabled:b}),N={default:function(){return O},tip:function(){return!ze&&je},operate:function(){return Je}};return N},ho=Z.tip&&Z.tip()||this.getTipMessage({accept:m?S:this.accept,fileSize:Me,limit:this.limit}),et={props:{type:Ze,drag:Te,action:_,multiple:be,withCredentials:Ye,headers:Ke,name:gt,data:vt,edm:we,accept:m?S:this.accept,fileList:T,autoUpload:yt,listType:ne,disabled:b,limit:wt,onExceed:r,onStart:Fe,onProgress:Tt,onSuccess:bt,onError:St,onPreview:i,httpRequest:d,isFolder:Be,edmToken:C,scale:fe,displayOnly:ce,customClass:kt,handleTriggerClick:_t,mode:$e,showTitle:Re,isHwh5:W,tipMessage:ho,promptTip:Ge,showFileList:qe},ref:"upload-inner"},Ft=function(I){return et.props.sourceType=I,B(ye,et,po(I))},fo={props:{disabled:b,isFolder:Be,isEdm:m,edm:we,displayOnly:ce,listType:ne,files:T,isFolderTitle:ht,listOption:ft,maxNameLength:he,scale:fe,showName:mt,types:q,isDragover:$,handlePreview:i,handleDownloadFile:a,handleReUpload:c,openDownloadFile:We,selected:V,triggerClick:u,isHwh5:W,triggerPlay:p,mode:$e,lockScroll:Ct,compact:Ne,imageBgColor:De},scopedSlots:{default:function(I){if(Z.file)return Z.file({file:I.file})},upload:function(I){var O=I.type;return xe?null:Ft(O)},tip:function(){return je},"assist-content":function(I){if(Z["assist-content"])return Z["assist-content"]({file:I.file})},operate:function(I){if(Z.operate)return Z.operate({file:I.file})}},on:{remove:A,update:ee,start:Fe,"click-file-list":Et,"update:visible":function(I){return t.state.visible=I}},ref:"upload-list-inner"},tt;qe&&(tt=B(ve,fo),$e==="bubble"&&(tt=B("tiny-modal",{props:{customClass:"sm:w-[theme(spacing.112)]",title:Ue("ui.fileUpload.uploadList"),position:"bottom-right",mask:!1,showClose:!1,showFooter:!1,modelValue:this.state.visible},on:{"update:modelValue":function(I){return t.state.visible=I}}},[tt])));var Vt=null,Wt=null,Zt=this.slots.notice&&this.slots.notice(),mo=this.state.current!=="default"?Zt:"",go=this.state.current==="default"?Zt:"";m&&k&&(et.props.accept=S,et.props.edmToken=C),we.preview&&(Vt=B("tiny-dialog-box",Nt({minHeight:"600px",width:"60%"},y,{scopedSlots:{default:function(){return v("iframe",{id:"_iframe",style:"display: block;width: 100%;height: 500px;display: inline-block;",allowfullscreen:!0,allowtransparency:"true",frameborder:"0",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",src:E},null)}}}))),It.enabled&&(Wt=B("tiny-dialog-box",{style:"",props:{dataTag:"encrypt-config-dialog",lockScroll:!0,visible:this.state.encryptDialogConfig.show,dragable:!0,title:this.t("ui.fileUpload.encryptDialogTitle"),width:"380px",height:"auto","modal-append-to-body":!1},on:{"update:visible":function(I){return t.state.encryptDialogConfig.show=I}},scopedSlots:{default:function(){return v("div",{"data-tag":"encrypt-config-dialog-body"},[v("div",null,[t.t("ui.fileUpload.addWatermark")]),v("div",null,[v(En,{modelValue:t.encryptConfig.watermark,"onUpdate:modelValue":function(O){return t.encryptConfig.watermark=O}},null)]),v("p",null,[Ae("\xA0")]),v("div",null,[t.t("ui.fileUpload.encrypted")]),v("div",null,[v(_n,{modelValue:t.encryptConfig.encrypt,"onUpdate:modelValue":function(O){return t.encryptConfig.encrypt=O}},null)])])},footer:function(){var I,O;return[v(Ce,{onClick:function(){return t.state.encryptDialogConfig.show=!1}},hn(I=t.t("ui.base.cancel"))?I:{default:function(){return[I]}}),[v(Ce,{type:"primary",customClass:"ml-2",onClick:function(){return Se()}},hn(O=t.t("ui.popupload.uploadButtonText"))?O:{default:function(){return[O]}})]]}}}));var vo=pt(ut,["^on[A-Z]"]);return v("div",In(vo,{"data-tag":"tiny-file-upload",class:ze?"relative inline-block":""}),[Xe({listType:ne,title:Qe,showTitle:Re,displayOnly:ce,mode:$e}),mo,xe&&!ce?Z.trigger?[Ft()]:Ft():null,go,tt,Vt,Wt])}});function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zt.apply(null,arguments)}var Bu=function(t){var n,o=typeof process=="object"?(n={})==null?void 0:n.TINY_MODE:null;return(o||t)==="pc"?pn:(o||t)==="mobile-first"?xu:pn},fn={FILE_UPLOAD_INNER_TEMPLATE:"file-upload-inner-template",UPLOAD_INNER:"upload-inner",UPLOAD_INNER_TEMPLATE:"upload-inner-template",UPLOAD_LIST_INNER:"upload-list-inner",UPLOAD_LIST_INNER_TEMPLATE:"upload-list-inner-template",ONLY_SUPPORT:"ui.fileUpload.onlySupport",COMMA:"ui.base.comma",FILE_NOT_LESS_THAN:"ui.fileUpload.fileNotLessThan",FILE_NOT_MORE_THAN:"ui.fileUpload.fileNotMoreThan",FILE_SIZE_RANGE:"ui.fileUpload.fileSizeRange",NUMBER_LIMIT:"ui.fileUpload.numberLimit",FILE_STATUS:{READY:"ready",SUCESS:"success",UPLOADING:"uploading",FAIL:"fail",DOWNLOADING:"downloading"},LIST_TYPE:{TEXT:"text",PICTURE_CARD:"picture-card",PICTURE:"picture",THUMB:"thumb",PICTURE_SINGLE:"picture-single",DRAG_SINGLE:"drag-single",SAAS:"saas"},EDM:{CHUNKINIT:"chunkInit",FILESIZE:"fileSize",CHUNKS:"chunks",FILENAME:"fileName",ISCHECKCODE:"isCheckCode",CHECKCODE:"checkCode",MULTIPART:"multipartFile",DOCID:"docId",CHUNK:"chunk",SINGLEUPLOAD:"uploadFile",LOWERNAME:"filename",FOLDERKEY:"ui.fileUpload.folder",FORMAT:"docFormat=wm&",WATER:"usageScenes=water&wmType=wm&",SOURCE:"usageScenes=source&",URLCONTS:"&type=doc&pageNum=1&docVersion=",EDMTOKEN:"EDM-Authorization",TRACEID:"x-trace-id",TEXT:"edm-text",JSLIB:"./jslib/",I18NKEY:"ui.fileUpload.token",LARGEFILEKEY:"ui.fileUpload.largefile",EXCEED:"ui.fileUpload.exceed",SIZE:"ui.fileUpload.fileSize",SIZE_17G:17*1024*1024,SIZE_2G:2*1024*1024,SIZE_64M:64*1024,SIZE_32M:32*1024,SIZE_20M:20*1024,SIZE_16M:16*1024,SIZE_8M:8*1024,SIZE_4M:4*1024,SIZE_2M:2*1024,SIZE_0M:0*1024,FILEEMPTY:"ui.fileUpload.empty",KIASCANTIP:"ui.fileUpload.kiaScanTip",FILENAMEEXCEEDS:"ui.fileUpload.fileNameExceeds",THEFILENAME:"ui.fileUpload.fileName",CALCHASH:"ui.fileUpload.calcHash",KIASTATUS:12079,NumberExceed:"ui.fileUpload.numberExceed",notSupport:"ui.fileUpload.notSupport",NOT_SUPPORT_NO_SUFFIX:"ui.fileUpload.notSupportNoSuffix",STATUS_SPECIAL_CHARACTERS:11005,NOT_SUPPORT_SPECIAL_CHARACTERS:"ui.fileUpload.notSupportSpecialCharacters",DOC_PREVIEW:"ui.fileUpload.docPreview"},IMAGE_TYPE:"image/*",FILE_TYPE:{EXCEL:"xls/xlsx",FILE:"file",PDF:"pdf",PICTURE:"png/jpg/jpeg/gif/svg/webp/bmp/tif/pjp/apng/xbm/jxl/svgz/ico/tiff/jfif/pjpeg/avif",PPT:"ppt/pptx",TEXT:"txt",WORD:"doc/docx",ZIP:"zip/rar/arj/z/jar/lzh",VIDEO:"mp4/m4v/3gp/mpg/flv/f4v/swf/avi/wmv/rmvb/mov/mts/m2t/ogg/webm/mkv",AUDIO:"mp3/aac/ape/flac/wav/wma/amr/mid/pcm"},SOURCE_TYPE:{SOURCE_VIDEO:"video",SOURCE_AUDIO:"audio",SOURCE_PICTURE:"picture"},MODE:{BUBBLE:"bubble"}},ju=zt({},Ve,{_constants:{type:Object,default:function(){return fn}},accept:String,action:String,autoUpload:{type:Boolean,default:function(){return!0}},beforeRemove:Function,beforeUpload:Function,data:Object,disabled:Boolean,display:{type:Boolean,default:function(){return!0}},drag:Boolean,dragger:Boolean,edm:{type:Object,default:function(){return{}}},fileIconList:{type:Array,default:function(){return[]}},fileList:{type:Array,default:function(){return[]}},fileSize:{type:[Number,Array],validator:function(t){return Array.isArray(t)?t[0]<t[1]:typeof t=="number"}},fileTitle:{type:String,default:function(){return"\u9644\u4EF6"}},headerShow:{type:Boolean,default:function(){return!0}},headers:{type:Object,default:function(){return{}}},httpRequest:Function,limit:Number,listType:{type:String,default:function(){return"text"},validator:function(t){return!!fn.LIST_TYPE[t.toUpperCase().replace("-","_")]}},mergeService:{type:Boolean,default:function(){return!1}},multiple:Boolean,name:{type:String,default:function(){return"file"}},openDownloadFile:{type:Boolean,default:function(){return!1}},showFileList:{type:Boolean,default:function(){return!0}},size:String,successStatistics:{type:Boolean,default:function(){return!0}},thumbOption:{type:Object,default:function(){return{popperClass:"",width:270,showDownload:!1,downloadFile:Function,showDel:!1,icon:"icon-attachment",showTooltip:!1}}},type:{type:String,default:function(){return"select"}},uploadIcon:{type:Boolean,default:function(){return!0}},withCredentials:{type:Boolean,default:function(){return!0}},isFolderTitle:{type:Boolean,default:!1},listOption:{type:Object,default:function(){return{showUpdate:!0,showDel:!0}}},maxNameLength:{type:Number,default:20},scale:{type:[Number,String],default:1},showName:{type:Boolean,default:!1},sourceType:{type:String,default:"picture",validator:function(t){return t.split("/").every(function(n){return["picture","video","audio"].includes(n)})}},showTitle:{type:Boolean,default:!0},title:{type:String,default:""},displayOnly:{type:Boolean,default:!1},customClass:[String,Object,Array],hwh5:Object,mode:{type:String,default:"",validator:function(t){return["","bubble"].includes(t)}},cacheToken:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},beforeAddFile:Function,encryptConfig:{type:Object,default:function(){return{enabled:!1,encrypt:!1,watermark:""}}},promptTip:{type:Boolean,default:!1},isHidden:{type:Boolean,default:!1},pasteUpload:{type:Boolean,default:!1},reUploadable:Boolean,reUploadTip:Function,imageBgColor:String}),nt=Q({name:se+"FileUpload",props:ju,setup:function(t,n){return He({props:t,context:n,template:Bu,extend:{ref:"file-upload-inner-template"}})}}),Hu="3.undefined";nt.install=function(e){e.component(nt.name,nt)};nt.version=Hu;export{nt as F};
