import{l as p,q as w,s as h,t as En,f as $,u as R,E as N,D as Y,K as B,b as _,I as V,x as D,w as U,y as Ye,J as ne,T as Ve,P as lt,F as Ze,z as ee,A,H as vt,G as ae,L as yt,j as rn,a5 as At,B as Sn,d as _r,Y as Ir,Q as Be}from"./vue.fad201d8.js";import{s as z,G as oe,n as Cr,H as wt,q as he,l as at,z as Pe,w as Dt,J as on,K as Er,M as Ue,N as Le,O as Sr,Q as Te,d as Q,p as se,R as Me,S as Ot,a as le,U as kn,W as Pt,b as de,$ as Ie,c as Re,g as $n,B as Ae,X as Mt,Y as kr,Z as Fn,a0 as $r,a1 as Fr,T as _e,a2 as Ur,a3 as Lr,a4 as Ar,j as W,a5 as Fe,a6 as Dr,a7 as Or,I as Pr,a8 as Mr,_ as Rr,F as zr,a9 as Nr,f as xr}from"./index.044b2d75.js";import{a as Br,r as Vr}from"./resize-event.d6a86905.js";import{P as qe}from"./index.391534c5.js";import{i as Rt,a as Un,b as Ln,D as jr,c as Hr,d as Wr,e as Yr}from"./event.68ff4fe6.js";import{i as dt}from"./del.93e43054.js";import{i as Zr}from"./close-circle.708ebd27.js";import{i as qr}from"./right.b44f62d9.js";import{D as An}from"./index.da6b19dd.js";import{i as Xr}from"./plus.22615c9c.js";var Kr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Gr=h("path",{class:"arrow-left_svg__st0",d:"M6.3 11H20c.6 0 1 .4 1 1s-.4 1-1 1H6.3l5.4 5.4c.4.4.4 1 0 1.4-.4.4-1 .4-1.4 0l-7.1-7.1c-.4-.4-.4-1 0-1.4l7.1-7.1c.4-.4 1-.4 1.4 0 .4.4.4 1 0 1.4L6.3 11z"},null,-1),Qr=[Gr];function Jr(e,t){return p(),w("svg",Kr,[].concat(Qr))}var ei={render:Jr},ti=function(){return z({name:"IconArrowLeft",component:ei})()},ni={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},ri=h("path",{class:"arrow-right_svg__st0",d:"m17.7 11-5.4-5.4c-.4-.4-.4-1 0-1.4.4-.4 1-.4 1.4 0l7.1 7.1c.4.4.4 1 0 1.4l-7.1 7.1c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4l5.4-5.4H4c-.6 0-1-.4-1-1s.4-1 1-1h13.7z"},null,-1),ii=[ri];function oi(e,t){return p(),w("svg",ni,[].concat(ii))}var li={render:oi},ai=function(){return z({name:"IconArrowRight",component:li})()},si={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},di=h("path",{class:"attachment_svg__st0",d:"M21.2 6c-1.2-1.1-2.7-1.8-4.4-1.8-.8 0-1.6.1-2.3.4-.8.3-1.4.7-2 1.3l-5.7 5.7c-.7.7-1 1.5-1 2.5 0 .9.4 1.8 1 2.5.7.7 1.5 1 2.5 1 .9 0 1.8-.4 2.5-1l5-5c.2-.2.3-.4.3-.6 0-.2-.1-.5-.3-.6-.2-.2-.4-.3-.6-.3-.2 0-.5.1-.6.3l-5 5c-.3.3-.8.5-1.2.5-.5 0-.9-.2-1.3-.5-.3-.3-.5-.8-.5-1.2 0-.5.2-.9.5-1.2l5.7-5.7c.8-.8 1.9-1.3 3.1-1.3 1.2 0 2.3.5 3.1 1.3.8.8 1.3 1.9 1.3 3.1s-.4 2.3-1.3 3.1l-6.1 6a6.42 6.42 0 0 1-4.6 1.9c-1.7 0-3.4-.7-4.6-1.9s-1.9-2.8-1.9-4.6c0-1.7.7-3.3 1.9-4.5l7.9-7.8c.2-.2.3-.4.3-.6 0-.2-.1-.5-.3-.6-.3-.3-.5-.4-.7-.4s-.5.1-.6.3L3.4 9c-.8.8-1.4 1.7-1.8 2.7-.4 1-.6 2-.6 3.1s.2 2.1.6 3.1c.4 1 1 1.9 1.8 2.7.8.8 1.7 1.4 2.7 1.8 1 .4 2 .6 3.1.6s2.1-.2 3.1-.6c1-.4 1.9-1 2.7-1.8l6.1-6c.6-.6 1-1.3 1.3-2 .3-.7.4-1.5.4-2.3.2-1.6-.4-3.2-1.6-4.3z"},null,-1),ui=[di];function ci(e,t){return p(),w("svg",si,[].concat(ui))}var pi={render:ci},zt=function(){return z({name:"IconAttachment",component:pi})()},fi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},hi=h("path",{class:"cloud-upload_svg__st0",d:"M22.1 11.4c-.5-.7-1-1.2-1.6-1.6 0-.7-.2-1.3-.5-1.9-.3-.7-.8-1.4-1.5-2-.6-.6-1.3-1.1-2.1-1.4-.8-.3-1.6-.5-2.5-.5-1.3 0-2.6.4-3.7 1.1-.6.4-1.2.9-1.6 1.4-.3-.1-.7-.1-1-.1-.5 0-1.1.1-1.5.3-.5.2-.9.5-1.3.8-.4.4-.7.8-.9 1.2-.2.5-.3 1-.3 1.5v.4c-.5.3-1 .7-1.4 1.1-.8 1-1.2 2.1-1.2 3.3 0 .7.1 1.3.4 1.9.3.6.7 1.1 1.2 1.6s1.1.8 1.7 1.1c.6.2 1.3.4 2 .4H17c.8 0 1.6-.1 2.3-.4.7-.3 1.4-.7 1.9-1.2.6-.5 1-1.2 1.3-1.8.3-.7.4-1.4.4-2.2.1-1.1-.2-2.1-.8-3zM3.3 16c-.2-.4-.3-.8-.3-1.2 0-.4.1-.7.2-1.1.1-.3.3-.6.6-.9.3-.3.6-.6 1-.8l.9-.5-.2-1v-.3c0-.3.1-.5.2-.8.1-.2.3-.4.5-.6.2-.2.5-.4.7-.5.3-.1.6-.2.9-.2.2 0 .5 0 .7.1l1 .3.6-.8c.3-.4.7-.8 1.2-1.1.8-.5 1.7-.7 2.6-.7.7 0 1.3.1 1.8.3.6.2 1.1.5 1.5.9.5.4.8.9 1 1.4.2.4.3.9.3 1.4v.7l.6.4c.4.3.8.6 1.1 1l.1.1c.2.3.4.6.5 1 .1.3.2.7.2 1.1 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.2-.4.4-.8.6-1.3.8-.5.2-1 .3-1.6.3H6.5c-.5 0-.9-.1-1.3-.2-.4-.2-.8-.4-1.1-.7-.4-.2-.7-.6-.8-1zm7.6-3.5c.2 0 .4-.1.6-.2l1.7-1.5v5.5c0 .4.4.8.9.8s.9-.4.9-.8v-5.5l1.7 1.5c.2.2.4.2.6.2s.4-.1.6-.2c.3-.3.3-.8 0-1.1l-3.1-2.9c-.4-.2-.6-.3-.8-.3-.2 0-.4.1-.6.2l-3.1 2.9c-.3.3-.3.8 0 1.1.1.2.3.3.6.3z"},null,-1),mi=[hi];function gi(e,t){return p(),w("svg",fi,[].concat(mi))}var vi={render:gi},yi=function(){return z({name:"IconCloudUpload",component:vi})()},wi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},bi=h("path",{class:"download_svg__st0",d:"M3 21h18v-4c0-.6.4-1 1-1s1 .4 1 1v5c0 .6-.4 1-1 1H2c-.6 0-1-.4-1-1v-5c0-.6.4-1 1-1s1 .4 1 1v4zm10-6.3 3.4-3.4c.4-.4 1-.4 1.4 0 .4.4.4 1 0 1.4l-5.1 5.1c-.4.4-1 .4-1.4 0 .2.2.4.3.7.3.6 0 1-.4 1-1v-.3c.1.4.1.8-.2 1.1-.4.4-1 .4-1.4 0l-5.1-5.1c-.4-.4-.4-1 0-1.4.4-.4 1-.4 1.4 0l3.3 3.3V2c0-.6.4-1 1-1s1 .4 1 1v12.7z"},null,-1),Ti=[bi];function _i(e,t){return p(),w("svg",wi,[].concat(Ti))}var Ii={render:_i},Xe=function(){return z({name:"IconDownload",component:Ii})()},Ci={viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Ei=h("path",{d:"M13.5 12.833a.5.5 0 0 1 .068.996l-.068.004h-11a.5.5 0 0 1-.068-.995l.068-.005h11ZM2.167 5.598c0-.297.358-.446.569-.236l2.26 2.261a.532.532 0 0 1 0 .754l-2.26 2.261a.333.333 0 0 1-.57-.235ZM13.5 9.278a.5.5 0 0 1 .068.995l-.068.005H6.833a.5.5 0 0 1-.068-.995l.068-.005H13.5Zm0-3.556a.5.5 0 0 1 .068.996l-.068.004H6.833a.5.5 0 0 1-.068-.995l.068-.005H13.5Zm0-3.555a.5.5 0 0 1 .068.995l-.068.005h-11a.5.5 0 0 1-.068-.996l.068-.004h11Z"},null,-1),Si=[Ei];function ki(e,t){return p(),w("svg",Ci,[].concat(Si))}var $i={render:ki},Fi=function(){return z({name:"EditorMenuRight",component:$i})()},Ui={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Li=h("path",{class:"file-cloudupload_svg__st0",d:"M22.3 5.1H11.5l-.6-1.9C10.7 2.5 10 2 9.3 2H1.7C.8 2 0 2.8 0 3.7v16.5c0 1 .8 1.7 1.7 1.7H13c.5 0 1-.5 1-1s-.5-.9-1-.9H2V7h20v3c0 .5.5 1 1 1s1-.5 1-1V6.8c0-.9-.8-1.7-1.7-1.7zM2 4h6.6L9 5H2V4zm13.9 12.5c.2 0 .4-.1.6-.2l1.7-1.5v6.5c0 .4.4.8.9.8s.9-.4.9-.8v-6.5l1.7 1.5c.2.2.4.2.6.2s.4-.1.6-.2c.3-.3.3-.8 0-1.1l-3.1-2.9c-.4-.2-.6-.3-.8-.3-.2 0-.4.1-.6.2l-3.1 2.9c-.3.3-.3.8 0 1.1.1.2.3.3.6.3z"},null,-1),Ai=[Li];function Di(e,t){return p(),w("svg",Ui,[].concat(Ai))}var Oi={render:Di},Nt=function(){return z({name:"IconFileCloudupload",component:Oi})()},Pi={viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Mi=h("path",{d:"M8 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8Zm4.86 12.86a6.84 6.84 0 0 1-2.185 1.474c-.847.36-1.747.541-2.675.541a6.835 6.835 0 0 1-4.86-2.012 6.84 6.84 0 0 1-1.474-2.186A6.822 6.822 0 0 1 1.125 8a6.835 6.835 0 0 1 2.013-4.86 6.84 6.84 0 0 1 2.185-1.474A6.822 6.822 0 0 1 8 1.125a6.835 6.835 0 0 1 4.86 2.013 6.84 6.84 0 0 1 1.474 2.185c.36.849.541 1.749.541 2.677a6.835 6.835 0 0 1-2.014 4.86ZM7.92 10.374a.563.563 0 0 1-.56-.619c.075-.779.647-1.409 1.277-2.038C9.644 6.708 9.66 6.387 9.678 6.048a1.447 1.447 0 0 0-.412-1.08 1.756 1.756 0 0 0-1.27-.54h-.002a1.682 1.682 0 0 0-1.677 1.68.562.562 0 1 1-1.125 0c0-.749.29-1.452.819-1.981a2.785 2.785 0 0 1 1.98-.824 2.887 2.887 0 0 1 2.09.89c.502.529.758 1.209.72 1.915-.039.723-.26 1.294-1.37 2.403-.562.562-.917.984-.953 1.355a.563.563 0 0 1-.56.507Zm-.697 1.646a.677.677 0 1 0 1.353 0 .677.677 0 0 0-1.353 0Z","fill-rule":"nonzero"},null,-1),Ri=[Mi];function zi(e,t){return p(),w("svg",Pi,[].concat(Ri))}var Ni={render:zi},xi=function(){return z({name:"IconHelpQuery",component:Ni})()},Bi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Vi=h("path",{class:"pause_svg__st0",d:"M17 4c-.6 0-1 .5-1 1v14c0 .5.5 1 1 1s1-.5 1-1V5c0-.5-.4-1-1-1zM7 4c-.6 0-1 .5-1 1v14c0 .5.5 1 1 1s1-.5 1-1V5c0-.5-.4-1-1-1z"},null,-1),ji=[Vi];function Hi(e,t){return p(),w("svg",Bi,[].concat(ji))}var Wi={render:Hi},Yi=function(){return z({name:"IconPause",component:Wi})()},Zi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},qi=h("path",{class:"picture_svg__st0",d:"M20.8 3H3.2c-.9 0-1.7.7-1.7 1.7v14.7c0 .9.8 1.7 1.7 1.7h17.6c.9 0 1.7-.8 1.7-1.7V4.7c0-1-.8-1.7-1.7-1.7zm0 16.3H3.2v-5l4.3-4.4 5.1 6.3c.3.3.8.4 1.1.1l3.8-2.5 3.3 1.6v3.9zm0-6.1L18 12.1c-.3-.2-.7-.2-1 0l-3.7 2.5-5.2-6.4c-.1-.3-.3-.4-.5-.4s-.5.1-.6.3L3.2 12V4.7h17.6v8.5zm-4.4-6.8c-1.3 0-2.4 1.1-2.4 2.4s1.1 2.4 2.4 2.4 2.4-1.1 2.4-2.4-1.1-2.4-2.4-2.4zm0 3c-.4 0-.7-.3-.7-.7s.3-.7.7-.7.7.3.7.7-.4.7-.7.7z"},null,-1),Xi=[qi];function Ki(e,t){return p(),w("svg",Zi,[].concat(Xi))}var Gi={render:Ki},Dn=function(){return z({name:"IconPicture",component:Gi})()},Qi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Ji=h("path",{class:"plus-circle_svg__st0",d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm7.1 19.1c-.9.9-2 1.6-3.2 2.1-1.2.5-2.5.8-3.9.8s-2.7-.3-3.9-.8c-1.2-.5-2.3-1.2-3.2-2.1-.9-.9-1.6-2-2.1-3.2-.5-1.2-.8-2.5-.8-3.9s.3-2.7.8-3.9C3.3 6.9 4 5.8 4.9 4.9c.9-.9 2-1.6 3.2-2.1C9.3 2.3 10.6 2 12 2s2.7.3 3.9.8c1.2.5 2.3 1.2 3.2 2.1.9.9 1.6 2 2.1 3.2.5 1.2.8 2.5.8 3.9s-.3 2.7-.8 3.9c-.5 1.2-1.2 2.3-2.1 3.2zM17 11h-4V7c0-.5-.5-1-1-1s-1 .5-1 1v4H7c-.5 0-1 .5-1 1s.6 1 1 1h4v4c0 .5.5 1 1 1s1-.5 1-1v-4h4c.5 0 1-.5 1-1s-.5-1-1-1z"},null,-1),eo=[Ji];function to(e,t){return p(),w("svg",Qi,[].concat(eo))}var no={render:to},ro=function(){return z({name:"IconPlusCircle",component:no})()},io={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},oo=h("path",{class:"refres_svg__st0",d:"M12.2 22.9c.5-.1.8-.5.7-1-.1-.5-.5-.8-1-.7-.4.1-.9.1-1.4.1-2.4 0-4.6-1-6.2-2.7S1.7 14.5 1.7 12s.9-4.8 2.6-6.5 3.9-2.7 6.2-2.7 4.6 1 6.2 2.7 2.6 4.1 2.6 6.5v.3l-1.9-2c-.3-.3-.9-.3-1.2 0-.3.3-.3.9 0 1.2l3.2 3.3c.3.3.9.3 1.2 0l3.2-3.3c.3-.3.3-.9 0-1.2-.3-.3-.9-.3-1.2 0L21 11.9c0-1.5-.3-2.9-.8-4.2-.5-1.3-1.3-2.5-2.2-3.5s-2.1-1.8-3.3-2.4c-1.4-.5-2.8-.8-4.2-.8s-2.8.3-4.1.9C5.2 2.4 4 3.2 3.1 4.2c-1 1-1.7 2.2-2.2 3.5C.3 9.1 0 10.5 0 12s.3 2.9.8 4.3c.5 1.3 1.3 2.5 2.2 3.5 1 1 2.1 1.8 3.3 2.4 1.3.6 2.7.9 4.1.9.7-.1 1.2-.1 1.8-.2z"},null,-1),lo=[oo];function ao(e,t){return p(),w("svg",io,[].concat(lo))}var so={render:ao},Ke=function(){return z({name:"IconRefres",component:so})()},uo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},co=h("path",{class:"repeat_svg__st0",d:"M11.8 22.9c-.5-.1-.8-.5-.7-1 .1-.5.5-.8 1-.7.4.1.9.1 1.4.1 2.4 0 4.6-1 6.2-2.7s2.6-4.1 2.6-6.5c0-2.5-.9-4.8-2.6-6.5s-3.9-2.7-6.2-2.7-4.6 1-6.2 2.7S4.7 9.5 4.7 12v.3l1.9-2c.3-.3.9-.3 1.2 0 .3.3.3.9 0 1.2l-3.2 3.3c-.3.3-.9.3-1.2 0L.2 11.5c-.3-.3-.3-.9 0-1.2.3-.3.9-.3 1.2 0L3 11.9c0-1.5.3-2.9.8-4.2.5-1.3 1.3-2.5 2.2-3.5s2.1-1.8 3.3-2.4c1.4-.5 2.8-.8 4.2-.8s2.8.3 4.1.9c1.3.6 2.4 1.3 3.3 2.4 1 1 1.7 2.2 2.2 3.5.5 1.4.8 2.8.8 4.3s-.3 2.9-.8 4.3c-.5 1.3-1.3 2.5-2.2 3.5-1 1-2.1 1.8-3.3 2.4-1.3.6-2.7.9-4.1.9-.6-.2-1.1-.2-1.7-.3z"},null,-1),po=[co];function fo(e,t){return p(),w("svg",uo,[].concat(po))}var ho={render:fo},xt=function(){return z({name:"IconRepeat",component:ho})()},mo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},go=h("path",{class:"start-circle_svg__st0",d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm7.1 19.1c-.9.9-2 1.6-3.2 2.1-1.2.5-2.5.8-3.9.8s-2.7-.3-3.9-.8c-1.2-.5-2.3-1.2-3.2-2.1-.9-.9-1.6-2-2.1-3.2-.5-1.2-.8-2.5-.8-3.9s.3-2.7.8-3.9C3.3 6.9 4 5.8 4.9 4.9c.9-.9 2-1.6 3.2-2.1C9.3 2.3 10.6 2 12 2s2.7.3 3.9.8c1.2.5 2.3 1.2 3.2 2.1.9.9 1.6 2 2.1 3.2.5 1.2.8 2.5.8 3.9s-.3 2.7-.8 3.9c-.5 1.2-1.2 2.3-2.1 3.2zm-2.3-7.4-7-5.6c0-.1-.1-.1-.3-.1-.2 0-.5.2-.5.4v11.1c0 .3.3.5.5.5.1 0 .2 0 .3-.1l7-5.6c.3-.2.3-.4 0-.6z"},null,-1),vo=[go];function yo(e,t){return p(),w("svg",mo,[].concat(vo))}var wo={render:yo},bo=function(){return z({name:"IconStartCircle",component:wo})()},To={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_o=h("path",{d:"m408.992 168.992-256 256L131.008 448l21.984 23.008 256 256 46.016-46.016L254.016 480H672c88.16 0 160 71.84 160 160v224h64V640c0-123.04-100.96-224-224-224H253.984l201.024-200.992-46.048-46.048z"},null,-1),Io=[_o];function Co(e,t){return p(),w("svg",To,[].concat(Io))}var Eo={render:Co},So=function(){return z({name:"IconUndo",component:Eo})()},ko={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},$o=h("path",{class:"upload_svg__st0",d:"M3 21h18v-4c0-.6.4-1 1-1s1 .4 1 1v5c0 .6-.4 1-1 1H2c-.6 0-1-.4-1-1v-5c0-.6.4-1 1-1s1 .4 1 1v4zM13 4.3V17c0 .6-.4 1-1 1s-1-.4-1-1V4.5L7.7 7.8c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4l5.1-5.1c.4-.4 1-.4 1.4 0l5.1 5.1c.4.4.4 1 0 1.4-.4.4-1 .4-1.4 0L13 4.3z"},null,-1),Fo=[$o];function Uo(e,t){return p(),w("svg",ko,[].concat(Fo))}var Lo={render:Uo},Ao=function(){return z({name:"IconUpload",component:Lo})()},Do={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Oo=h("path",{class:"view_svg__st0",d:"M11.7 9.3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1s-1-.4-1-1v-3h-3c-.6 0-1-.4-1-1s.4-1 1-1h3v-3c0-.6.4-1 1-1s1 .4 1 1v3z"},null,-1),Po=h("path",{class:"view_svg__st0",d:"M22.4 20.8 17.6 16c1.3-1.6 2.1-3.6 2.1-5.7 0-5-4-9-9-9s-9 4-9 9 4 9 9 9c2.2 0 4.2-.8 5.7-2.1l4.8 4.8c.2.2.4.2.6.2s.4-.1.6-.2c.3-.3.3-.8 0-1.2zm-9-4.1c-.9.4-1.8.5-2.7.5S8.8 17 8 16.7c-.8-.4-1.6-.9-2.2-1.5-.6-.6-1.1-1.4-1.5-2.2-.4-.9-.5-1.8-.5-2.7s.2-1.9.5-2.7c.3-.9.8-1.6 1.4-2.3s1.4-1.1 2.2-1.5c.9-.4 1.8-.5 2.7-.5s1.9.2 2.7.5c.8.4 1.6.9 2.2 1.5.6.6 1.1 1.4 1.5 2.2.4.9.5 1.8.5 2.7s-.2 1.9-.5 2.7c-.4.8-.9 1.6-1.5 2.2-.5.8-1.3 1.3-2.1 1.6z"},null,-1),Mo=[Oo,Po];function Ro(e,t){return p(),w("svg",Do,[].concat(Mo))}var zo={render:Ro},No=function(){return z({name:"IconView",component:zo})()},xo={class:"zoom-in_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Bo=h("path",{d:"M943.616 892.416 742.4 691.712c24.064-29.184 44.032-61.44 58.88-96.256 19.968-47.104 30.208-97.792 30.208-149.504s-10.24-101.888-30.208-149.504c-19.456-45.568-47.104-86.528-81.92-121.856A385.587 385.587 0 0 0 597.504 92.16C550.4 72.192 500.224 61.952 448 61.952S346.112 72.192 298.496 92.16c-45.568 19.456-86.528 47.104-121.856 82.432s-62.976 76.288-81.92 121.856c-19.968 47.104-30.208 97.792-30.208 149.504S74.752 547.84 94.72 595.456c19.456 45.568 47.104 86.528 81.92 121.856 35.328 35.328 76.288 62.976 121.856 82.432 47.104 19.968 97.28 30.208 149.504 30.208 51.712 0 101.888-10.24 149.504-30.208 34.816-14.848 66.56-34.304 95.232-57.856l201.728 201.216c6.656 6.656 15.872 10.24 25.088 10.24 9.216 0 17.92-3.584 25.088-10.24 12.8-14.336 12.8-36.864-1.024-50.688zm-273.92-225.792c-.512.512-1.024.512-1.024 1.024l-1.024 1.024C608.768 727.04 530.432 759.296 448 759.296c-83.456 0-162.304-32.768-221.184-91.648s-91.648-137.728-91.648-221.184 32.256-162.304 91.648-221.184S364.544 133.632 448 133.632 610.304 166.4 669.184 225.28c58.88 58.88 91.648 137.728 91.648 221.184 0 82.944-32.768 161.28-91.136 220.16z"},null,-1),Vo=h("path",{d:"M573.952 418.816H473.088v-97.792c0-19.456-12.8-35.328-32.256-35.328s-32.256 15.872-32.256 35.328v97.792H305.152c-19.456 0-35.328 12.8-35.328 32.256s15.872 32.256 35.328 32.256h102.912V588.8c0 19.456 12.8 35.328 32.256 35.328s32.256-15.872 32.256-35.328V483.84H573.44c19.456 0 35.328-12.8 35.328-32.256s-15.36-32.768-34.816-32.768z"},null,-1),jo=[Bo,Vo];function Ho(e,t){return p(),w("svg",xo,[].concat(jo))}var Wo={render:Ho},Bt=function(){return z({name:"IconZoomIn",component:Wo})()},Yo={class:"zoom-out_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Zo=h("path",{d:"M948.522 896.4 715.467 663.347c58.54-70.264 95.164-159.438 95.164-258.044C810.63 181.458 629.166 0 405.32 0 181.486.001.022 181.458.022 405.301c0 223.838 181.465 405.302 405.3 405.302 98.6 0 187.773-36.617 258.038-95.15l233.056 233.056c14.391 14.384 37.715 14.384 52.106 0s14.393-37.73.001-52.108zm-543.2-159.489c-183.136 0-331.601-148.465-331.601-331.61S222.186 73.69 405.323 73.69c183.144 0 331.61 148.466 331.61 331.61 0 160.64-129.895 331.61-331.61 331.61z"},null,-1),qo=h("path",{d:"M552.706 368.456H257.948c-20.353 0-36.853 16.5-36.853 36.845s16.5 36.845 36.853 36.845h294.758c20.353 0 36.845-16.5 36.845-36.845s-16.492-36.845-36.845-36.845z"},null,-1),Xo=[Zo,qo];function Ko(e,t){return p(),w("svg",Yo,[].concat(Xo))}var Go={render:Ko},Vt=function(){return z({name:"IconZoomOut",component:Go})()},Qo={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Jo=h("path",{d:"M2.857 10.25a.75.75 0 0 1 .744.648l.006.102v2a.75.75 0 0 1-1.493.102L2.108 13v-2a.75.75 0 0 1 .75-.75Zm3.857-2.5a.75.75 0 0 1 .743.648l.007.102v7a.75.75 0 0 1-1.493.102l-.007-.102v-7a.75.75 0 0 1 .75-.75Zm11.571 1a.75.75 0 0 1 .743.648l.007.102v5a.75.75 0 0 1-1.493.102l-.007-.102v-5a.75.75 0 0 1 .75-.75Zm2.858 2a.75.75 0 0 1 .743.648l.007.102v1a.75.75 0 0 1-1.494.102l-.006-.102v-1a.75.75 0 0 1 .75-.75Zm-6.714-4a.75.75 0 0 1 .743.648l.007.102v9a.75.75 0 0 1-1.493.102l-.007-.102v-9a.75.75 0 0 1 .75-.75Zm-3.858-3a.75.75 0 0 1 .744.648l.006.102v15a.75.75 0 0 1-1.493.102l-.007-.102v-15a.75.75 0 0 1 .75-.75Z"},null,-1),el=[Jo];function tl(e,t){return p(),w("svg",Qo,[].concat(el))}var nl={render:tl},rl=function(){return z({name:"IconAudio",component:nl})()},il={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ol=h("path",{d:"M18.006 11.41a.75.75 0 0 1 .75.75 6.757 6.757 0 0 1-6.005 6.715V20.5h1.248a.75.75 0 0 1 .101 1.494L14 22h-3.997a.75.75 0 0 1-.102-1.493l.102-.007h1.248v-1.625a6.758 6.758 0 0 1-6.006-6.715.75.75 0 1 1 1.5 0 5.257 5.257 0 0 0 10.512 0 .75.75 0 0 1 .75-.75ZM12.002 2a3.833 3.833 0 0 1 3.833 3.833V12a3.833 3.833 0 0 1-7.667 0V5.833A3.833 3.833 0 0 1 12 2Zm0 1.5a2.333 2.333 0 0 0-2.334 2.333V12a2.333 2.333 0 0 0 4.667 0V5.833A2.333 2.333 0 0 0 12 3.5Z"},null,-1),ll=[ol];function al(e,t){return p(),w("svg",il,[].concat(ll))}var sl={render:al},On=function(){return z({name:"IconMic",component:sl})()},dl={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},ul=h("g",null,[h("rect",{width:"30",height:"30",rx:"2"}),h("path",{fill:"#FFF",d:"M18.805 22 19 19.989h-5.674v-4.274h5.079V13.85h-5.08V9.992h5.387L18.935 8H11v14z"})],-1),cl=[ul];function pl(e,t){return p(),w("svg",dl,[].concat(cl))}var fl={render:pl},hl=function(){return z({name:"IconExcelType",component:fl})()},ml={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},gl=h("g",null,[h("rect",{width:"30",height:"30",rx:"2"}),h("path",{d:"M19.583 10.21c.575 0 1.042.467 1.042 1.04v.417h-5.28a.827.827 0 0 1-.59-.243l-1.213-1.215h6.041Zm2.292 1.477v-.436a2.294 2.294 0 0 0-2.292-2.292h-7.291l-.381-.381a.827.827 0 0 0-.59-.245H8.334c-.51 0-.962.238-1.269.602A1.65 1.65 0 0 0 6.667 10v9.167c0 1.375 1.126 2.5 2.5 2.5h11.666c.766 0 1.445-.356 1.905-.902a2.47 2.47 0 0 0 .595-1.598v-5.834c0-.845-.64-1.541-1.458-1.646Z",fill:"#FFF"})],-1),vl=[gl];function yl(e,t){return p(),w("svg",ml,[].concat(vl))}var wl={render:yl},bl=function(){return z({name:"IconFileType",component:wl})()},Tl={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},_l=h("g",null,[h("rect",{width:"30",height:"30",rx:"2"}),h("path",{d:"M20.774 18.946a5.662 5.662 0 0 1-3.288-1.337c-1.821.4-3.554.98-5.287 1.693C10.82 21.752 9.533 23 8.422 23c-.222 0-.489-.045-.667-.178A1.313 1.313 0 0 1 7 21.619c0-.401.089-1.515 4.31-3.342.978-1.782 1.733-3.609 2.355-5.525-.533-1.069-1.688-3.698-.889-5.034.267-.49.8-.758 1.378-.713.444 0 .888.223 1.155.579.578.802.533 2.495-.222 4.99a13.434 13.434 0 0 0 2.755 3.565c.933-.179 1.866-.312 2.8-.312 2.088.044 2.399 1.024 2.354 1.604 0 1.515-1.466 1.515-2.222 1.515ZM8.333 21.708l.133-.045c.622-.222 1.111-.668 1.467-1.247-.667.267-1.2.713-1.6 1.292Zm5.91-13.367h-.134c-.044 0-.133 0-.177.045-.178.757-.045 1.56.266 2.272.267-.757.267-1.56.045-2.317Zm.31 6.46-.044.09-.044-.045c-.4 1.025-.844 2.05-1.333 3.03l.089-.044v.089a25.823 25.823 0 0 1 3.021-.891l-.044-.045h.133a13.645 13.645 0 0 1-1.777-2.183Zm6.044 2.362c-.4 0-.756 0-1.156.09.445.222.89.311 1.333.356.311.044.623 0 .89-.09 0-.133-.179-.356-1.067-.356Z",fill:"#FFF"})],-1),Il=[_l];function Cl(e,t){return p(),w("svg",Tl,[].concat(Il))}var El={render:Cl},Sl=function(){return z({name:"IconPdfType",component:El})()},kl={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},$l=h("g",null,[h("rect",{width:"30",height:"30",rx:"2"}),h("path",{d:"M7 10v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2Zm14.165 2.632a1 1 0 0 1 .335.747v6.616a.5.5 0 0 1-.5.5H10.468a.5.5 0 0 1-.407-.79l2.37-3.338a1 1 0 0 1 1.449-.195l1.249 1.02a.5.5 0 0 0 .69-.055l3.934-4.423a1 1 0 0 1 1.412-.082ZM10.5 10a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#FFF"})],-1),Fl=[$l];function Ul(e,t){return p(),w("svg",kl,[].concat(Fl))}var Ll={render:Ul},Al=function(){return z({name:"IconPictureType",component:Ll})()},Dl={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Ol=h("g",null,[h("rect",{width:"30",height:"30",rx:"2"}),h("path",{d:"M13.851 22v-5.395c.67.129 1.267.193 1.787.193.953 0 1.796-.185 2.53-.556a4.1 4.1 0 0 0 1.716-1.595c.41-.693.616-1.503.616-2.432 0-1.366-.458-2.41-1.373-3.132S16.892 8 15.167 8H11.5v14h2.351Zm1.354-7.048c-.313 0-.765-.049-1.354-.145v-4.97h1.28c.99 0 1.74.19 2.251.57.511.38.767 1.003.767 1.866 0 .851-.25 1.51-.752 1.978-.502.467-1.232.7-2.192.7Z",fill:"#FFF"})],-1),Pl=[Ol];function Ml(e,t){return p(),w("svg",Dl,[].concat(Pl))}var Rl={render:Ml},zl=function(){return z({name:"IconPptType",component:Rl})()},Nl={class:"text-type_svg__tiny-icon-text-type",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},xl=h("g",null,[h("rect",{width:"30",height:"30",rx:"2"}),h("path",{fill:"#FFF",d:"M16.3 22.5V9.665h4.46L21 7.5H9.23L9 9.665h4.69V22.5z"})],-1),Bl=[xl];function Vl(e,t){return p(),w("svg",Nl,[].concat(Bl))}var jl={render:Vl},Hl=function(){return z({name:"IconTextType",component:jl})()},Wl={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Yl=h("g",null,[h("rect",{width:"30",height:"30",rx:"2"}),h("path",{d:"M23.257 10.647a1.519 1.519 0 0 0-1.507-.042l-2.035 1.079v-.668a2.516 2.516 0 0 0-2.51-2.516H8.51A2.516 2.516 0 0 0 6 11.016v7.968A2.516 2.516 0 0 0 8.51 21.5h8.695a2.516 2.516 0 0 0 2.51-2.516v-.65l2.035 1.06c.479.255 1.041.24 1.507-.041.465-.281.743-.773.743-1.318v-6.07c0-.545-.278-1.037-.743-1.318m-7.66 4.986-3.388 1.769a.87.87 0 0 1-.806 0A.711.711 0 0 1 11 16.77v-3.54c0-.263.15-.499.403-.63a.863.863 0 0 1 .806 0l3.388 1.769A.713.713 0 0 1 16 15c0 .264-.15.5-.403.633",fill:"#FFF"})],-1),Zl=[Yl];function ql(e,t){return p(),w("svg",Wl,[].concat(Zl))}var Xl={render:ql},Kl=function(){return z({name:"IconVideoType",component:Xl})()},Gl={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Ql=h("g",null,[h("rect",{width:"30",height:"30",rx:"2"}),h("path",{d:"m12.077 21.5 2.174-7.532c.155-.527.287-1.009.397-1.446.11-.437.224-.937.343-1.5a27.753 27.753 0 0 0 .74 3l2.21 7.478h2.299L24 8.5h-2.237l-2.076 8.044a34.23 34.23 0 0 0-.561 2.29c-.095-.653-.291-1.46-.588-2.424L16.185 8.5h-2.317l-2.236 7.82c-.19.634-.404 1.472-.642 2.514a22.638 22.638 0 0 0-.517-2.37L8.353 8.5H6l3.805 13h2.272Z",fill:"#FFF"})],-1),Jl=[Ql];function ea(e,t){return p(),w("svg",Gl,[].concat(Jl))}var ta={render:ea},na=function(){return z({name:"IconWordType",component:ta})()},ra={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},ia=En('<g><rect width="30" height="30" rx="2"></rect><g transform="translate(11 4)" fill="#FFF"><rect width="4" height="4" rx=".5"></rect><rect x="4" y="4" width="4" height="4" rx=".5"></rect><rect y="8" width="4" height="4" rx=".5"></rect><path d="M7 14a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h6Zm-.5 4h-5a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Z"></path></g></g>',1),oa=[ia];function la(e,t){return p(),w("svg",ra,[].concat(oa))}var aa={render:la},sa=function(){return z({name:"IconZipType",component:aa})()};const da=()=>e=>parseInt(e,10),ua=({props:e,api:t,parent:n})=>(r,i)=>{if(r.preventDefault(),n.state.isEdm){const{downloadFile:o}=t.getApi();e.openDownloadFile&&o&&o(i)}else e.openDownloadFile&&t.downloadFile(i);return e.handlePreview&&e.handlePreview(i)},Pn=e=>t=>{const n=t&&t.response&&t.response.data;let r;if(Array.isArray(n))r=n[0];else if(n&&typeof n=="object")for(let i in n){r=n[i];break}if(r)e.getFileDownloadUrl().then(i=>{window.open(oe.filterUrl(i+"&id="+r.attachmentId+"&type=AttachmentDemo")).opener=null});else if(t.url)window.open(oe.filterUrl(t.url)).opener=null;else throw new Error("[TINY Error][FileUpload]file.url must not be empty")},ca=e=>t=>{e.startPostion=t,e.shows=!0},pa=e=>t=>{e("remove",t)},fa=({state:e})=>t=>{e.currentFile=t,e.showPanel=!0},ha=({emit:e,props:t,parent:n})=>r=>{n.state.isEdm?e("start",[r&&r.raw],"",!0):t.handleReUpload&&t.handleReUpload(r)},ma=({type:e,el:t},n)=>t&&t.addEventListener(e,n),st=({type:e,el:t},n)=>t&&t.removeEventListener(e,n),ga=({vm:e,api:t,props:n})=>({file:r,index:i,type:o})=>{if(n.isHwh5)return n.triggerPlay(r,o,"play");const l=e.$refs[o+(r.uid||i)]&&e.$refs[o+(r.uid||i)][0];if(r.isPlay)return t.pause({file:r,index:i,type:o});l&&l.play&&(r.playEvent=()=>{r&&(r.isPlay=!1,st({type:"ended",el:l},r.playEvent))},r.el=l,st({type:"ended",el:l},r.playEvent),ma({type:"ended",el:l},r.playEvent),e.$set(r,"isPlay",!0),l.play())},va=({vm:e,props:t})=>({file:n,index:r,type:i})=>{if(t.isHwh5)return t.triggerPlay(n,i,"pause");const o=e.$refs[i+(n.uid||r)]&&e.$refs[i+(n.uid||r)][0];o&&o.pause&&(st({type:"ended",el:o},n.playEvent),n.isPlay=!1,o.pause())},ya=({vm:e})=>({e:t,file:n})=>{var r,i;e.$set(n,"totalSecond",parseInt((r=t.target)==null?void 0:r.duration)),e.$set(n,"currentSecond",parseInt((i=t.target)==null?void 0:i.currentTime))},wa=()=>({e,file:t})=>{var n;t.currentSecond=parseInt((n=e.target)==null?void 0:n.currentTime)},ba=()=>({file:e})=>e.name&&e.name.split(".")[e.name.split(".").length-1].toLowerCase(),Ta=({constants:e})=>({type:t})=>{const{EXCEL:n,FILE:r,PDF:i,PICTURE:o,PPT:l,TEXT:a,WORD:s,ZIP:d,VIDEO:u,AUDIO:f}=e.FILE_TYPE;let m={[n]:{name:"icon-excel-type",color:"#00A2B5"},[r]:{name:"icon-file-type",color:"#71C14C"},[i]:{name:"icon-pdf-type",color:"#FC916E"},[o]:{name:"icon-picture-type",color:"#2E94FF"},[l]:{name:"icon-ppt-type",color:"#F46087"},[a]:{name:"icon-text-type",color:"#9185F0"},[s]:{name:"icon-word-type",color:"#2070F3"},[d]:{name:"icon-zip-type",color:"#FDC000"},[u]:{name:"icon-video-type",color:"#2E94FF"},[f]:{name:"icon-audio",color:"#2E94FF"},default:{name:"icon-other-type",color:"#9185F0"}};for(const I in m)if(Object.hasOwnProperty.call(m,I)){const v=m[I];delete m[I],I.split("/").forEach(g=>m[g]=v)}return m[t]||m.default},_a=({emit:e})=>({file:t})=>e("remove",t),Ia=({vm:e,nextTick:t,props:n,constants:r})=>()=>{const{listType:i}=n,{LIST_TYPE:o}=r;t(()=>{const l=e.$refs["upload-list"],a=e.$refs["upload-list-li"];if(!(!l||!(a&&a[0]))&&i===o.TEXT){const{minWidth:s}=window.getComputedStyle(a&&a[0]),d=8,u=Math.floor(l.offsetWidth/(parseFloat(s)+d));Array.from(a).forEach((f,m)=>{!((m+1)%u)||u===1?(f.style.marginRight=0,f.style.width=`${100/u}%`):(f.style.marginRight=`${d}px`,f.style.width=`calc(${100/u}% - ${d}px)`)})}})},Ca=({props:e,constants:t,emit:n})=>()=>{const{SUCESS:r}=t.FILE_STATUS,i=e.files.every(({status:o})=>o===r||!o);n("update:visible",!i)},Ea=({props:e,constants:t})=>()=>{const{SUCESS:n}=t.FILE_STATUS;let r=e.files;return e.mode===t.MODE.BUBBLE&&e.listType===t.LIST_TYPE.TEXT&&(r=e.files.filter(({status:i})=>i!==n)),r},Sa=({state:e,constants:t})=>n=>{const{SOURCE_AUDIO:r}=t.SOURCE_TYPE;n===r?e.showAudioPanel=!0:e.showTriggerPanel=!0,e.triggerClickType=n},ka=({state:e,props:t})=>(n,r)=>new Promise(i=>{let o=t.triggerClick(n,e.triggerClickType,r);o&&o.then?o.then(()=>{e.showTriggerPanel=!1,i()}).catch(()=>{e.showTriggerPanel=!1,e.showAudioPanel=!1}):(e.showTriggerPanel=!1,i())}),$a=({api:e,vm:t})=>()=>{const n=t.$refs["upload-list"];n&&Br(n,e.calcUploadListLiWidth)},Fa=({api:e,props:t,vm:n})=>()=>{Vr(n.$refs["upload-list"],e.calcUploadListLiWidth),t.files.forEach(r=>{st({type:"ended",el:r.el},r.playEvent),delete r.playEvent,delete r.isPlay,delete r.el})},Ua=e=>{const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}},La=(e,t,n)=>{let r;n.response?r=n.response.error||n.response:n.responseText?r=n.responseText:r=`fail to post ${e} ${n.status}`;const i=new Error(r);return i.status=n.status,i.method="post",i.url=e,i};var Mn=e=>{if(typeof XMLHttpRequest=="undefined")return;const t=new XMLHttpRequest,n=oe.filterUrl(e.action);t.upload&&(t.upload.onprogress=o=>{o.total>0&&(o.percent=o.loaded/o.total*100),e.onProgress(o)});const r=new FormData;e.data&&Object.keys(e.data).forEach(o=>{r.append(o,e.data[o])}),Array.isArray(e.file)?e.file.forEach(o=>{r.append(e.filename,o,o.name)}):r.append(e.filename,e.file,e.file.name),t.onerror=o=>{e.onError(o)},t.onload=()=>{if(t.status<200||t.status>=300)return e.onError(La(n,e,t));e.onSuccess(Ua(t))},t.open("post",n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const i=e.headers||{};for(let o in i)Cr.call(i,o)&&i[o]!==null&&t.setRequestHeader(o,i[o]);return t.send(r),t};let gt=null;const K=(e,t)=>e||(()=>t?Promise.reject(new Error(`[TINY Error][FileUpload] Prop ${t} is mandatory when the framework service is not used`)):Promise.reject(new Error("[TINY Error][FileUpload] Prop action is mandatory when the framework service is not used"))),Rn=({props:e,service:t})=>{const{network:n={},common:r={}}=t||{},{request:i,get:o,post:l,all:a,spread:s,CancelToken:d={}}=n;let u;if(wt(e.hwh5))i?u=e.httpRequest||i:u=e.httpRequest||Mn;else{const{HWH5:f}=e.hwh5,{uploadToEDM:m}=f();u=e.httpRequest||m}return{get:K(o),post:K(l),request:K(i),all:K(a),spread:K(s),cancelToken:K(d.source),getSingleUploadUrl:K(r.getSingleUploadUrl),getFileUploadUrl:K(r.getFileUploadUrl),getFileDownloadUrl:K(r.getFileDownloadUrl),getSingleDownloadUrl:K(r.getSingleDownloadUrl),getPackageDownloadUrl:K(r.getPackageDownloadUrl),getAsyncPackageDownload:K(r.getAsyncPackageDownload),getLargeFileInitUrl:K(r.getLargeFileInitUrl),getChunkUploadUrl:K(r.getChunkUploadUrl),getPreviewUrl:K(r.getPreviewUrl),getDocumentInfoUrl:K(r.getDocumentInfoUrl),getPreviewUrlBatch:K(r.getPreviewUrlBatch),httpRequest:K(u,"httpRequest")}},Aa=({props:e,state:t})=>()=>e.disabled||(t.form||{}).disabled,Da=({state:e,constants:t})=>()=>e.uploadingFiles.reduce((n,r)=>n+r.status!==t.FILE_STATUS.FAIL?r.size:0,0),Oa=({constants:e,state:t,api:n})=>r=>{[e.LIST_TYPE.PICTURE_CARD,e.LIST_TYPE.PICTURE,e.LIST_TYPE.PICTURE_SINGLE,e.LIST_TYPE.DRAG_SINGLE].includes(r)&&(t.uploadFiles=t.uploadFiles.map(i=>{if(i.type=n.getFileSourceType({file:i}),!i.url&&i.raw)try{i.url=URL.createObjectURL(i.raw)}catch{return}return i}))},Pa=({constants:e,state:t,props:n,api:r})=>i=>{let o=i&&i.map(l=>(l.uid=l.uid||Date.now()+t.tempIndex++,l.status=l.status||e.FILE_STATUS.SUCESS,l.type=r.getFileSourceType({file:l}),l));[e.LIST_TYPE.PICTURE_SINGLE,e.LIST_TYPE.DRAG_SINGLE].includes(n.listType)&&(o=o.slice(0,1)),t.uploadFiles=o},Ma=({flag:e,doUpload:t,file:n})=>!e&&t(n),Ra=({before:e,rawFile:t,file:n,doUpload:r,autoRemove:i,api:o})=>{e.then(l=>{const a=Object.prototype.toString.call(l);if(a==="[object File]"||a==="[object Blob]"){a==="[object Blob]"&&(l=new File([l],t.name,{type:t.type}));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(l[s]=t[s]);n.raw=l}r(n)},()=>{i&&(Array.isArray(t)?t.forEach(l=>o.handleRemove(null,l)):o.handleRemove(null,t))})},zn=({file:e})=>{const{name:t,url:n}=e;let r="";return t&&/\.[^.]+$/.test(t)?r=t.split(".")[t.split(".").length-1].toLowerCase():n&&/\.[.]+$/.test(n)&&(r=n.split(".")[n.split(".").length-1].toLowerCase()),r},ln=({api:e,file:t,autoRemove:n})=>{if(n){const r=t.raw;Array.isArray(r)?r.forEach(i=>e.handleRemove(null,i)):e.handleRemove(null,r)}},za=({props:e,api:t,Modal:n,constants:r,t:i,state:o})=>(l,a,s)=>{if(o.isEdm&&l.name.length>255)return ln({api:t,file:l,autoRemove:a}),n.message({message:`${i(r.EDM.THEFILENAME)}"${l.name}"${i(r.EDM.FILENAMEEXCEEDS)}`,status:"warning"});if(l){let u=!0;const f=o.isEdm?o.accept:e.accept,m=r.FILE_TYPE[o.triggerClickType.toUpperCase()],I=zn({file:l});if(f&&!f.split(",").some(g=>g.toLowerCase()===r.IMAGE_TYPE?r.FILE_TYPE.PICTURE.split("/").includes(I):new RegExp(`(${g.trim()})$`,"i").test(l.name))&&(u=!1),o.triggerClickType&&m&&!m.split("/").includes(I)&&(u=!1),!u)return ln({api:t,file:l,autoRemove:a}),n.message({message:I?i(r.EDM.notSupport,{format:I}):i(r.EDM.NOT_SUPPORT_NO_SUFFIX),status:"warning"})}let d=typeof e.beforeUpload=="function";if(Ma({flag:d,doUpload:s,file:l}),d){const{rawFile:u=l.raw,before:f=e.beforeUpload(u)}={};f&&f.then?Ra({before:f,rawFile:u,file:l,doUpload:s,autoRemove:a,api:t}):f!==!1?s(l):a&&(Array.isArray(u)?u.forEach(m=>t.handleRemove(null,m)):t.handleRemove(null,u))}},Na=({state:e,constants:t,vm:n,Modal:r,api:i,t:o})=>(l,a)=>{if(e.isHwh5){n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(l.raw);return}l.size>e.docSize&&l.size>e.chunkSize?(l.isLargeFile=!0,a&&e.uploadFiles.forEach(s=>{s.cacheSign===l.cacheSign&&(s.percentage=0)}),i.largeDocumentUpload(l),r.message({message:`${l.name}${o(t.EDM.LARGEFILEKEY)}`,status:"warning"})):n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(l.raw)},xa=(e,t)=>{const n=e.name.lastIndexOf("."),r=e.name.length;t.fileType=e.name.substring(n+1,r);const i=e.size/1024;if(i<1024)t.size=Math.round(i*10**1)/10**1+"KB";else{const o=i/1024;t.size=Math.round(o*10**1)/10**1+"MB"}},Ba=({props:e,state:t,api:n,constants:r,Modal:i,t:o})=>l=>{if([void 0,null].includes(l.size))return!0;let a=0;if(Array.isArray(e.fileSize)&&e.fileSize[1]?a=Math.min(t.singleMaxSize,e.fileSize[1]/1024).toFixed(2):a=Math.min(t.singleMaxSize),(t.isEdm||!t.isEdm&&Array.isArray(e.fileSize)&&e.fileSize[1])&&l.size>a*1024*1024)return i.message({message:o(r.EDM.EXCEED,{maxSize:n.formatFileSize(Number(a),"M")}),status:"warning"}),!1;if(l.size<=0)return i.message({message:`${l.name} ${o(r.EDM.FILEEMPTY)}`,status:"warning"}),!1;const s=e.fileSize&&(e.fileSize[0]||e.fileSize)||0;return l.size<=s*1024?(i.message({message:`${o(r.EDM.SIZE,{minSize:n.formatFileSize(Number(s),"K"),sizeUnit:""})}`,status:"warning"}),!1):!0},Va=({api:e,constants:t,emit:n,props:r,state:i,mode:o})=>(l,a,s)=>{!s&&(l.uid=Date.now()+i.tempIndex++);let d={status:t.FILE_STATUS.READY,name:l.name,size:l.size};if(Object.assign(d,{percentage:0,uid:l.uid,raw:l,response:{}}),d.type=e.getFileSourceType({file:d}),i.isEdm){let u={serverName:"",docRelativePath:"",docId:"",docVersion:"",cacheSign:l.uid};d=Object.assign(d,u),r.edm.upload.isFolder&&(d.path=l.webkitRelativePath.match(/.*\//g)[0])}if(i.cacheDocuments[d.uid]=d,o==="mobile"&&xa(l,d),[t.LIST_TYPE.PICTURE_CARD,t.LIST_TYPE.PICTURE,t.LIST_TYPE.PICTURE_SINGLE,t.LIST_TYPE.DRAG_SINGLE].includes(r.listType))try{i.isHwh5?d.url=l.filePath:d.url=URL.createObjectURL(l)}catch{return}if(i.isEdm&&i.isSuccess){if(!e.properFileSize(d))return;if(i.updateId=a||r.edm.updateId||"",s){const f=i.uploadFiles.findIndex(m=>m.uid===d.uid);i.uploadFiles.splice(f,1)}else if(i.updateId){const f=i.uploadFiles.findIndex(m=>m.docId===a);i.uploadFiles.splice(f,1,d),n("change",d,i.uploadFiles);return}}!i.isEdm&&!e.properFileSize(d)||(i.uploadFiles.push(d),i.currentUploadingFileUids.push(d.uid),n("change",d,i.uploadFiles))},ja=({emit:e,Modal:t,constants:n,t:r,CryptoJS:i,state:o})=>({file:l,chunkSize:a,showTips:s})=>{s&&t.message({message:`${r(n.EDM.CALCHASH)}`,status:"warning"});const d=Math.ceil(l.size/a);let u=0,f=u*a,m=Math.min(l.size,f+a),I=l.raw.slice(f,m);const v=i.algo.SHA256.create();let g=0;return new Promise(E=>{const S=new FileReader;S.readAsArrayBuffer(I),S.onload=y=>{if(l.status===n.FILE_STATUS.FAIL)return;u++;let T=i.lib.WordArray.create(y.target.result);if(v.update(T),T=null,u<d)f=u*a,m=Math.min(l.size,f+a),g+=m-f,e("hash-progress",Math.min(Math.floor(g/l.size*100),100)),I=l.raw.slice(f,m),S.readAsArrayBuffer(I);else{const c=v.finalize().toString();l.hash=l.raw.hash=c,E(c),e("hash-progress",100)}},S.onerror=y=>{l.status=n.FILE_STATUS.FAIL,e("error",y,l,o.uploadFiles)}})},Ha=e=>e.map(t=>{if(t instanceof File)return t;let n,r={};Pe(t)?(n=t.url,r=t):n=t;const[i,o]=n.match(/[^/]*$/),[l]=n.match(/\.[^.]*$/),a=n.substring(0,o);return Dt(he({},r),{type:l,name:i,filePath:a,webkitRelativePath:a})}),Wa=({api:e,constants:t,props:n,state:r,vm:i})=>(o,l,a=!1)=>{r.isHwh5&&(o=Ha(o)),r.currentUploadingFileUids=[],o.forEach(u=>e.addFileToList(u,l,a));const{UPLOADING:s,READY:d}=t.FILE_STATUS;if(r.uploadingFiles=r.uploadFiles.filter(u=>[s,d].includes(u.status)),r.isEdm&&r.isSuccess&&o.forEach(u=>{const f=e.getFile(u);!f||e.beforeUpload(f,!0,m=>{typeof n.edm.upload.loading=="function"&&n.edm.upload.loading(m),new Promise(I=>{if(r.isHwh5)return I();let v=!1;if(n.edm.isCheckCode!==!0)return I();if(m.size>r.docSize&&m.size>r.chunkSize)if(r.isEntireCheckCode)v=!0;else return I();e.getFileHash({file:m,chunkSize:r.chunkSize,showTips:v}).then(g=>I(g))}).then(()=>{if(n.autoUpload){const I={token:n.edm.upload.token,file:m,type:"upload"};e.getToken(I).then(v=>{v&&(m.status=t.FILE_STATUS.UPLOADING,e.startUpload(m,!0))})}})})}),!r.isEdm&&n.autoUpload)if(n.multiple&&n.mergeService){const u=f=>(i.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(f.raw),void 0);o.length&&e.beforeUpload({raw:o},!0,u)}else o.forEach(u=>{const f=e.getFile(u);if(!f)return;const m=I=>(i.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(I.raw),void 0);e.beforeUpload(f,!0,m)})},Ya=({state:e,constants:t})=>()=>{let n;if(e.isHwh5){const i=e.uploadingFiles.reduce((o,l)=>{const a=l.status!==t.FILE_STATUS.FAIL?l.percentage/100:0;return o+a},0);n=Math.floor(i/e.uploadingFiles.length*100)}else{const i=e.uploadingFiles.reduce((o,l)=>{const a=l.status!==t.FILE_STATUS.FAIL?l.size*l.percentage/100:0;return o+a},0);n=Math.floor(i/e.uploadingSize*100)}n=Math.min(n,100);const r=e.uploadingFiles.filter(i=>i.percentage===100);return{percentage:n,uploadList:e.uploadingFiles,uploadedCount:r.length}},Za=({api:e,constants:t,emit:n,state:r})=>(i,o)=>{if(Array.isArray(o))r.uploadFiles.forEach(l=>{o.some(a=>l.uid===a.uid)&&(l.status=t.FILE_STATUS.UPLOADING,i.lengthComputable&&(l.percentage=Math.floor(i.loaded*100/i.total)||0),n("progress",l,r.uploadFiles,e.calcUploadingFilesInfo()))});else{const l=e.getFile(o);if(l)if(l.status=t.FILE_STATUS.UPLOADING,r.isHwh5){const{progress:a}=JSON.parse(i);l.percentage=a,l.percentage>=100&&(l.isFinished=!0),n("progress",l,r.uploadFiles,e.calcUploadingFilesInfo())}else i.lengthComputable&&!l.isLargeFile&&(l.percentage=Math.floor(i.loaded*100/i.total)||0,l.percentage>=100&&(l.isFinished=!0),n("progress",l,r.uploadFiles,e.calcUploadingFilesInfo()))}},qa=({api:e,constants:t,emit:n,state:r,props:i,Modal:o,t:l})=>(a,s)=>{const d=r.uploadFiles.filter(u=>r.currentUploadingFileUids.includes(u.uid));if(Array.isArray(s))r.uploadFiles.forEach(u=>{s.some(f=>u.uid===f.uid)&&(u.status=t.FILE_STATUS.SUCESS,u.percentage=100,u.response=a,n("success",a,u,d),n("change",u,r.uploadFiles),delete u.cancelToken)});else{const u=e.getFile(s),f=a.data&&a.data.status,{STATUS_SPECIAL_CHARACTERS:m,NOT_SUPPORT_SPECIAL_CHARACTERS:I}=t.EDM;if(delete u.cancelToken,i.edm.upload&&u&&a.data&&f!==200){f===m&&o.message({message:`${l(I)}`,status:"warning"}),u.status=t.FILE_STATUS.FAIL,n("error",a,u,r.uploadFiles);return}if(u){if(u.status=t.FILE_STATUS.SUCESS,u.percentage=100,u.isFinished||n("progress",u,r.uploadFiles,e.calcUploadingFilesInfo()),u.isLargeFile&&delete a.config,u.response=a,r.isEdm){const v=r.isHwh5?a:a.data.result;if(!v)return;u.serverName=v.serverName,u.docRelativePath=v.docRelativePath,u.docId=v.docId,u.docVersion=v.version,u.docSize=v.docSize,u.isLargeFile&&delete u.raw,Object.assign(u,v)}n("success",a,u,d),n("change",u,r.uploadFiles)}}e.clearUploadingFiles()},Xa=({api:e,constants:t,emit:n,state:r,props:i})=>(o,l)=>{const a=e.getFile(l);!a||(a.status=t.FILE_STATUS.FAIL,a.percentage=100,!r.isEdm&&!i.reUploadable&&r.uploadFiles.splice(r.uploadFiles.indexOf(a),1),e.clearUploadingFiles(),n("error",o,a,r.uploadFiles),n("change",a,r.uploadFiles))},Ka=({api:e,emit:t,props:n,state:r,constants:i})=>(o,l)=>{l&&(o=e.getFile(l));let a=()=>{e.abort(o);let s=r.uploadFiles;s.splice(s.indexOf(o),1),t("remove",Dt(he({},o),{status:i.FILE_STATUS.FAIL}),s)};if(!n.beforeRemove)a();else if(typeof n.beforeRemove=="function"){const s=n.beforeRemove(o,r.uploadFiles);s&&s.then?s.then(()=>{a()},()=>{}):s!==!1&&a()}},Ga=({vm:e,constants:t})=>n=>{const{READY:r}=t.FILE_STATUS;n.status=r,n.percentage=0,e.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(n.raw)},Qa=e=>t=>{t.forEach(n=>{n.status==="fail"&&e.handleReUpload(n)})},Ja=({constants:e,state:t})=>()=>{const{SUCESS:n,FAIL:r}=e.FILE_STATUS;t.uploadingFiles.every(o=>[n,r].includes(o.status))&&(t.uploadingFiles=[])},es=e=>t=>{let n=e.uploadFiles,r;return n.every(i=>(r=t.uid===i.uid?i:null,!r)),r},ts=({constants:e,vm:t,state:n})=>r=>{const{READY:i,UPLOADING:o,FAIL:l}=e.FILE_STATUS;r?n.uploadingFiles.forEach(a=>{const s=r.uid||r;a.uid===s&&[i,o].includes(a.status)&&(a.status=l)}):n.uploadingFiles.forEach(a=>{[i,o].includes(a.status)&&(a.status=l)}),t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].abort(r)},ns=({state:e})=>(t,n=!1)=>{const r=i=>{if(!i)return;const o=e.downloadCancelToken[i];o&&o.forEach(a=>a()),delete e.downloadCancelToken[i];const l=e.downloadCancelData[i];l&&l(i)};Array.isArray(t)?n?r(t.map(i=>i.docId||i).sort().join(",")):t.forEach(i=>i&&r(t.docId||t)):t?r(t.docId||t):Object.keys(e.downloadCancelToken).forEach(i=>{r(i)})},rs=e=>()=>{e.uploadFiles=[]},is=({api:e,constants:t,vm:n,state:r,props:i})=>()=>{const o=r.uploadFiles.filter(l=>l.status===t.FILE_STATUS.READY);if(r.isEdm&&r.isSuccess)o.forEach(l=>{e.getToken({token:i.edm.upload.token,file:l,type:"upload"}).then(a=>{a&&e.beforeUpload(l,!1,s=>{e.startUpload(s)})})});else if(i.multiple&&i.mergeService){const l=o.map(a=>a.raw);l.length&&e.beforeUpload({raw:l},!1,a=>{n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(a.raw)})}else o.forEach(l=>{e.beforeUpload(l,!1,a=>{n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(a.raw)})})},os=({constants:e,vm:t})=>()=>t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].handleClick(),ls=e=>()=>e.getFileUploadUrl(),as=({api:e,props:t,state:n})=>()=>{t.action?n.url=t.action:e.getFileUploadUrl().then(r=>n.url=r)},Nn=({api:e,isChunk:t,isLessThan17G:n,file:r,state:i})=>(o,l,a)=>{if(t)a===0&&(i.downloadCancelData[r.docId]=e.setWriterFile({data:o,index:a,isLessThan17G:n,file:r}));else{const s=o.headers["content-disposition"],d=s?s.match(/fileName.?=(.*)/)[1]||s.match(/fileName=(.*)/)[1]:"",u=d.includes(".")?u!=="zip"?"application / x - xls":"application/zip":o.headers["content-type"],f=new Blob([o.data],{type:u});xn({blob:f,name:d})}},xn=({blob:e,name:t})=>{if(window&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(e,decodeURIComponent(t));return}const n=window.URL||window.webkitURL||window.moxURL,r=oe.filterUrl(n.createObjectURL(e));let i=document.createElement("a");i.href=r,i.download=decodeURIComponent(t),i.click(),n.revokeObjectURL&&n.revokeObjectURL(r)},Bn=({state:e,downloadOps:t,file:n,translateFile:r,isChunk:i,isLessThan17G:o})=>(l,a,s)=>{if(i){const d=o?l.data:new Uint8Array(l.data);let u=e.downloadChunkFile[n.docId];u||(u={}),u[s]=d,r(l,a,s)}else typeof t.loading=="function"&&t.loading(n),r(l,a);return!0},Vn=()=>e=>{let t;e.target&&e.target.getResponseHeader?t=Number(e.target.getResponseHeader("Content-Size")):t=Number(e.total),t=Math.max(t,e.loaded);let n=Math.ceil(e.loaded/t*100)||0;return n=Math.max(n,0),n=Math.min(n,100),n},ss=({state:e,props:t,constants:n})=>({file:r,serviceUrl:i,range:o})=>{if(typeof r=="object"){const l=t.edm.download||{},a=Array.isArray(l.paramsWhitelist)?l.paramsWhitelist:[],s=e.downloadParamsWhitelist.concat(a);let d={};s.forEach(u=>d[u]=r[u]),d=Object.assign(d,o),delete d.docId,delete d.docVersion,delete d["x-download-sign"];for(let u in d){const f=d[u],m=typeof f;~["undefined","object","function"].indexOf(m)||(i+=`&${u}=${f}`)}r.status=n.FILE_STATUS.DOWNLOADING,r.percentage=0}return i},ds=({Modal:e,constants:t,t:n})=>({data:r})=>{if(r.status===t.EDM.KIASTATUS)return e.message({message:`${n(t.EDM.KIASCANTIP)}`,status:"warning"})},us=({state:e,Modal:t})=>({downloadOps:n,file:r,isLessThan17G:i,data:o})=>{const l=({state:a,file:s,errRes:d,Modal:u,downloadOps:f})=>{a.currentDownloadFiles&&a.currentDownloadFiles.docId===s.docId||(d&&d.message&&u.message({message:d.message,status:"warning"}),a.currentDownloadFiles=s,typeof f.fail=="function"&&f.fail(d,s))};if(o.data&&o.data.type&&o.data.type.includes("application/json")){const a=new FileReader;return a.onload=s=>{const d=JSON.parse(s.target.result);l({state:e,file:r,errRes:d,Modal:t,downloadOps:n})},a.readAsText(o.data),!0}if(!i&&o.headers["content-type"].includes("application/json")){const a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(o.data)));return l({state:e,file:r,errRes:a,Modal:t,downloadOps:n}),!0}},cs=({state:e,service:t})=>n=>{let r;Array.isArray(n)?r=n.map(l=>l.docId||l).sort().join(","):r=n.docId||n,e.downloadCancelToken[r]||(e.downloadCancelToken[r]=[]);const{cancel:i,token:o}=t.cancelToken();return e.downloadCancelToken[r].push(i),o},ps=({service:e,constants:t,props:n,state:r,api:i,emit:o})=>l=>{let{file:a,batchIndex:s,isChunk:d,calcProgress:u,handleSuccess:f,range:m={},isBatch:I,isLessThan17G:v,url:g}=l;(g?Promise.resolve(g):e.getSingleDownloadUrl().then(S=>{let y=S.replace(/{docId}/,a.docId||a)+`${~S.indexOf("?")?"&":"?"}x-download-sign=true&docVersion=${a.docVersion||""}${a.decryptKey?"&decryptKey="+a.decryptKey:""}`;return y=i.modifyServiceUrlSingle({file:a,serviceUrl:y,range:m}),y})).then(S=>{S=oe.filterUrl(S);let y={withCredentials:n.withCredentials,headers:Object.assign(n.headers,r.headers),responseType:d&&!v?"arraybuffer":"blob",hideErr:!0,cancelToken:i.createDownloadCancelToken(a),onDownloadProgress(T){let c=u(T,d);c!==100&&!d&&o("download",c,T),typeof a=="object"&&(a.percentage=c)}};e.get(S,y).then(T=>{if(i.getKiaScanTip({data:T})||i.validateDownloadStatus({downloadOps:n.edm.download||{},file:a,isLessThan17G:v,data:T}))return;f(T,"",m.index);const{checkcode:c,"content-size":F}=T.headers;!d&&o("download",100,"",{checkcode:c,fileSize:F}),typeof a=="object"&&(a.percentage=100,setTimeout(()=>a.status=t.FILE_STATUS.SUCESS,1e3)),i.afterDownload({batchIndex:s,data:T,file:a})}).catch(T=>{if(T.response&&r.errorStatusCodes.includes(T.response.status)){const F={token:(n.edm.download||{}).token,file:a,type:"download"};i.getToken(F).then(b=>{i.afterDownload({batchIndex:s,data:b,file:a,range:m,isChunk:d,isBatch:I,isLessThan17G:v})})}})})},fs=({api:e,service:t,props:n,state:r,emit:i})=>o=>{let{downloadOps:l,file:a,calcProgress:s,handleSuccess:d,range:u={}}=o,f={token:l.packageToken,file:a,type:"download"};const{asyncPackages:m}=l||{};e.getToken(f).then(I=>{if(!I)return;const v={downloadTOs:[],attachdownloadTOs:[],isZip:"true",transformType:"sync",type:"package"};if(a.forEach(g=>{g.wmType?v.attachdownloadTOs.push(g):v.downloadTOs.push(g)}),m){e.downloadAsyncPackage(v);return}t.getPackageDownloadUrl().then(g=>{g=oe.filterUrl(g+`${~g.indexOf("?")?"&":"?"}x-download-sign=true`),t.post(g,he(he({},v),u),{withCredentials:n.withCredentials,headers:Object.assign(n.headers,r.headers),responseType:"blob",cancelToken:e.createDownloadCancelToken(a),onDownloadProgress(E){let S=s(E);S!==100&&i("download",S,E)}}).then(E=>{if(e.getKiaScanTip({data:E}))return;const{"content-size":S,checkcode:y}=E.headers;i("download",100,"",{fileSize:S,checkcode:y}),d(E,"zip")})})})},hs=({state:e,props:t,service:n,api:r,constants:i})=>o=>n.getAsyncPackageDownload().then(l=>{n.request({method:"post",url:oe.filterUrl(l),withCredentials:t.withCredentials,headers:Object.assign(t.headers,e.headers),data:o}).then(a=>{if(a&&a.data&&a.data.status===200){const s=(a.data.result||[]).map(({downloadLink:I,fileSize:v})=>({url:I,fileSize:v})),{SIZE_17G:d}=i.EDM,u=!1,f=!1,m=t.edm.download||{};s.forEach(I=>{const v=!I.fileSize||I.fileSize<d*1024,g=Nn({api:r,isChunk:f,isLessThan17G:v,file:I,state:e}),E=Bn({downloadOps:m,file:I,translateFile:g,isChunk:f,state:e,isLessThan17G:v}),S=Vn(),y={url:I.url,calcProgress:S,handleSuccess:E,downloadOps:m,file:I,isLessThan17G:v,isFinished:!1,range:{},batchIndex:0,isBatch:u,isChunk:f};r.downloadFileSingle(y)})}})}),ms=({state:e,props:t,emit:n,constants:r})=>({file:i})=>{const{HWH5:o,appId:l}=t.hwh5,{downloadToEDM:a}=o(),s={edmAuth:{edmToken:e.headers[r.EDM.EDMTOKEN],appId:l},docId:i.docId||i,docVersion:i.docVersion,filePath:i.filePath,progress:1,onProgress:d=>{const{progress:u}=JSON.parse(d);u*1!==100&&n("download",u)}};a(s).then(d=>{n("download",100,"",{data:d})})},gs=({api:e,state:t})=>n=>{if(t.currentDownloadFiles="",!t.isEdm)e.ordinaryDownload(n);else{const r=Array.isArray(n);if(t.isHwh5){let i=n;r||(i=[n]),i.forEach(o=>e.downloadFileSingleInner({file:o,isBatch:!1}));return}r?e.downloadFileInner({file:n,isBatch:r}):e.downloadFileSingleInner({file:n,isBatch:r})}},vs=({props:e,state:t,api:n,constants:r})=>({file:i,isBatch:o})=>{const{SIZE_17G:l}=r.EDM;let s={token:(e.edm.download||{}).token,file:i,type:"download"};n.getToken(s).then(d=>{if(!d)return;if(t.isHwh5){n.downloadFileSingleHwh5({file:i});return}(t.hasFileInfoInterface?n.getDownloadFileInfo({docId:i.docId}):Promise.resolve()).then(f=>{const{fileSize:m}=f||{},I=m>t.docSize&&m>t.chunkSize;m&&I?n.largeDocumentDownload({file:f,isBatch:o,isLessThan17G:m<l*1024}):n.downloadFileInner({file:i,isBatch:o})})})},ys=({api:e,state:t,props:n,service:r})=>({docId:i})=>r.getDocumentInfoUrl().then(o=>new Promise((l,a)=>{r.request({method:"post",url:oe.filterUrl(o),withCredentials:n.withCredentials,headers:Object.assign(n.headers,t.headers),cancelToken:e.createDownloadCancelToken({docId:i}),data:{docInfoVO:{ids:[i],docType:"",docVersion:""}}}).then(s=>{const{data:d,outDocQueryList:u}=s||{};if(d&&d.status===200){const f=u&&u[0].verInfo[0].docInfo[0];l(f)}else a(s)})})),ws=({api:e,state:t})=>({file:n,isBatch:r,isLessThan17G:i})=>{const{fileSize:o,docId:l,docName:a}=n,s=Math.ceil(o/t.chunkSize);t.downloadChunkFile[l]={chunkNum:s,fileSize:o,docName:a},n.chunkSize=s;const d=e.sliceDownloadChunk(n);e.batchSegmentDownload({batchIndex:0,batches:d,docId:n.docId,isBatch:r,isLessThan17G:i})},bs=({state:e})=>t=>{const n=t.chunkSize,r=[[]];e.downloadBatchQueue[t.docId+"-0"]=0,e.downloadBatchQueueListen[t.docId+"-0"]=0;let i=0,o=-1;for(let l=0;l<n;l++){if(i=o+1,o=Math.min(t.fileSize,i+e.chunkSize),o<i)return r;const a=r.length-1;r[a].length<e.downloadChunkLimit?r[a].push({startRange:i,endRange:o,index:l}):(e.downloadBatchQueue[t.docId+"-"+r.length]=0,e.downloadBatchQueueListen[t.docId+"-"+r.length]=0,r.push([]),r[a+1].push({startRange:i,endRange:o,index:l}))}return r},Ts=({state:e,api:t})=>({batchIndex:n,batches:r,docId:i,isBatch:o,isLessThan17G:l})=>{if(n<r.length){const a=r[n],s=i+"-"+n;Object.defineProperty(e.downloadBatchQueue,s,{get(){return e.downloadBatchQueueListen[s]},set(u){e.downloadBatchQueueListen[s]=u,u>=a.length&&t.batchSegmentDownload({docId:i,batchIndex:++n,batches:r,isBatch:o,isLessThan17G:l})}});let d=0;for(;a.length-d>0;)t.downloadFileInner({batchIndex:n,range:a[d++],file:{docId:i},isBatch:o,isChunk:!0,isLessThan17G:l})}},_s=({api:e,props:t,state:n})=>({batchIndex:r,file:i,range:o,isBatch:l,isChunk:a,isLessThan17G:s})=>{const d=t.edm.download||{},u=Nn({api:e,isChunk:a,isLessThan17G:s,file:i,state:n}),f=Bn({downloadOps:d,file:i,translateFile:u,isChunk:a,state:n,isLessThan17G:s}),m=Vn();let{isFinished:I=!1}={};if(!l){const g={calcProgress:m,isFinished:I,handleSuccess:f,range:o,batchIndex:r,isBatch:l,downloadOps:d,file:i,isChunk:a,isLessThan17G:s};e.downloadFileSingle(g);return}const v={downloadOps:d,file:i,calcProgress:m,handleSuccess:f,range:o};l&&e.downloadFileBatch(v)},Is=({api:e,state:t})=>({batchIndex:n,range:r,data:i,file:o,isBatch:l,isChunk:a,isLessThan17G:s})=>{if(i.status===200){const d=o.docId+"-"+n,u=t.downloadBatchQueue[d];t.downloadBatchQueue[d]=u+1}else{const d=t.downloadReplayAtoms[o.docId+"-"+r.index];if(d&&d>=2){const u=["The number of retry times exceeds the threshold! [docId:",o.docId,", chunk:",r.index,"]"];at.logger.warn(u.join("")),delete t.downloadReplayAtoms[o.docId+"-"+r.index]}else{const u=["replay ",d,"! [docId:",o.docId,", chunk:",r.index,"]"];at.logger.warn(u.join("")),t.downloadReplayAtoms[o.docId+"-"+r.index]=d+1,e.downloadFileInner({batchIndex:n,range:r,file:o,isBatch:l,isChunk:a,isLessThan17G:s})}}},Cs=({state:e,emit:t,Streamsaver:n})=>({data:r,index:i,isLessThan17G:o,file:l})=>{let{fileStream:a,writer:s,fileData:d=[],downloaded:u=0}={};const{checkcode:f}=r.headers,m=r.headers["content-disposition"];let{chunkNum:I,fileSize:v,docName:g}=e.downloadChunkFile[l.docId];m&&(g=m.match(/fileName.?=(.*)/)[1]||m.match(/fileName=(.*)/)[1]||g),o||(a=n.createWriteStream(g,{size:r.byteLength}),s=a.getWriter());const E=()=>{const S=e.downloadChunkFile[l.docId]||{};let y=S[i];if(y)if(!o)s.write(y).then(()=>{if(u+=y.byteLength,S[i]=null,delete S[i],i+1>=I)delete e.downloadChunkFile[l.docId],t("download",100,"",{fileSize:v,checkcode:f}),s.close();else{const T=Math.ceil(u/v*100)||0;T!==100&&t("download",T),i++,E()}});else if(d.push(y),u+=y.size,e.downloadChunkFile[l.docId][i]=null,delete e.downloadChunkFile[l.docId][i],i+1>=I)delete e.downloadChunkFile[l.docId],xn({blob:new Blob(d),name:g}),t("download",100,"",{fileSize:v,checkcode:f});else{const T=Math.ceil(u/v*100)||0;T!==100&&t("download",T),i++,E()}else setTimeout(()=>E(),1e3)};return E(),S=>{const y=e.downloadChunkFile[S];Object.keys(y).forEach(T=>y[T]=null),delete e.downloadChunkFile[S],o?d=[]:s&&s.close()}},Es=({constants:e,props:t,state:n})=>({formData:r,file:i,type:o})=>{if(n.isEdm&&t.edm.upload){const a=Object.assign({},t.data||{},t.edm.upload.params||{});for(let s in a)r.set(s,a[s]||"")}t.edm.isCheckCode===!0?(r.append(e.EDM.ISCHECKCODE,"Y"),i.hash&&r.append(e.EDM.CHECKCODE,i.hash)):r.append(e.EDM.ISCHECKCODE,"N");const l=n.updateId||t.edm.updateId;if(o===e.EDM.CHUNKINIT)r.append(e.EDM.FILESIZE,i.size),r.append(e.EDM.CHUNKS,i.chunkSize),r.append(e.EDM.FILENAME,i.name),l&&r.append(e.EDM.DOCID,l);else{r.append(e.EDM.MULTIPART,i,i.filename),r.append(e.EDM.CHUNK,i.chunk),r.append(e.EDM.LOWERNAME,i.filename);const a=l||i.docId;r.append(e.EDM.DOCID,a)}return l&&r.append("updateFile",!0),r},Ss=({api:e,Modal:t,state:n,t:r,emit:i,constants:o})=>l=>{const a=Math.ceil(l.size/n.chunkSize);l.chunkSize=a,l.cancelToken=[],e.segmentUploadInit(l).then(s=>{if(s){l.records=s.chunks,l.docId=s.docId,n.largeFileInfo[s.docId]=l;const d=e.sliceChunk(l);e.batchSegmentUpload({docId:s.docId,batchIndex:0,batches:d,progress:{size:l.size,trunks:[],file:l}})}else{t.message({message:r("ui.fileUpload.init"),status:"warning",duration:"1000"});const d=e.getFile(d);n.uploadFiles.splice(n.uploadFiles.indexOf(d),1)}}).catch(s=>{l.status=o.FILE_STATUS.FAIL,i("error",s,l,n.uploadFiles)})},ks=({api:e,props:t,service:n,state:r,constants:i})=>o=>{const l=new FormData;return new Promise((a,s)=>{n.getLargeFileInitUrl().then(d=>{n.request({method:"post",url:oe.filterUrl(d),data:e.getFormData({formData:l,file:o,type:i.EDM.CHUNKINIT}),withCredentials:t.withCredentials,headers:Object.assign(t.headers,r.headers)}).then(u=>{u.data.status===200?a(u.data.result):s(u)})})})},an=({data:e,file:t,batchIndex:n,state:r,api:i,progress:o})=>{if(e.status===200){const l=t.docId+"-"+n,a=r.batchQueue[l];r.batchQueue[l]=a+1}else{const l=r.replayAtoms[t.docId+"-"+t.chunk];if(l&&l>=2){const a=["The number of retry times exceeds the threshold! [docId:",t.docId,", chunk:",t.chunk,"]"];at.logger.warn(a.join("")),delete r.replayAtoms[t.docId+"-"+t.chunk]}else{const a=["replay ",l,"! [docId:",t.docId,", chunk:",t.chunk,"]"];at.logger.warn(a.join("")),r.replayAtoms[t.docId+"-"+t.chunk]=l+1,i.segmentUpload(n,t,o)}}},sn=({api:e,props:t,service:n,state:r,emit:i,constants:o,batchIndex:l,file:a,progress:s})=>{const d=new FormData,u=f=>{const m=n.cancelToken();if(s.file.cancelToken){s.file.cancelToken.push(m.cancel);const{SUCESS:I,FAIL:v}=o.FILE_STATUS;n.request({method:"post",url:oe.filterUrl(f),data:e.getFormData({formData:d,file:a,type:""}),withCredentials:t.withCredentials,headers:Object.assign(t.headers,r.headers),cancelToken:m.token,hideErr:!0,onUploadProgress(g){s.trunks[a.chunk]=g.loaded;const E=s.trunks.reduce((y,T)=>y+T);let S=Math.floor(E/s.size*100)||0;a.percentage=Math.floor(g.loaded/g.total*100),g.percentage=s.file.percentage=S>100?100:S,S>=100&&(s.file.isFinished=!0),i("progress",s.file,r.uploadFiles,e.calcUploadingFilesInfo())}}).then(g=>{an({data:g,file:a,batchIndex:l,state:r,api:e,progress:s}),s.file.percentage===100&&(s.file.status=I)}).catch(g=>{if(g.response&&r.errorStatusCodes.includes(g.response.status)){const E={token:t.edm.upload.token,file:a,type:"upload"};e.getToken(E).then(S=>an({data:S,file:a,batchIndex:l,state:r,api:e,progress:s}))}else s.file.status!==v&&i("error",g,s.file,r.uploadFiles),s.file.status=v,s.file.docId=""})}};r.chunkUploadUrl?u(r.chunkUploadUrl):n.getChunkUploadUrl().then(f=>{r.chunkUploadUrl=f,u(f)})},$s=({api:e,props:t,service:n,state:r,emit:i,constants:o,CryptoJS:l})=>(a,s,d)=>{typeof s.then=="function"?s.then(u=>new Promise(f=>{if(t.edm.isCheckCode!==!0)return f(u);const m=new FileReader;m.readAsArrayBuffer(u),m.onload=I=>{if(t.edm.isCheckCode===!0){let v=l.lib.WordArray.create(I.target.result);const g=l.SHA256(v).toString();u.hash=g}f(u)}})).then(u=>{sn({batchIndex:a,api:e,service:n,state:r,emit:i,props:t,file:u,constants:o,progress:d})}):sn({api:e,props:t,service:n,state:r,emit:i,constants:o,batchIndex:a,file:s,progress:d})},Fs=({api:e,constants:t,props:n,vm:r,state:i})=>({docId:o,batchIndex:l,batches:a,progress:s})=>{if(l<a.length&&s.file.cancelToken){const d=o+"-"+l,u=a[l];Object.defineProperty(i.batchQueue,d,{get(){return i.batchQueueListen[d]},set(m){i.batchQueueListen[d]=m,m>=u.length&&e.batchSegmentUpload({docId:o,batchIndex:++l,batches:a,progress:s})}});let f=0;for(;u.length-f>0;)e.segmentUpload(l,u[f++],s)}else typeof n.edm.upload.closeloading=="function"&&n.edm.upload.closeloading(),r.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(i.largeFileInfo[o])},Us=({state:e})=>t=>{const n=t.chunkSize,r=[[]];e.batchQueue[t.docId+"-0"]=0,e.batchQueueListen[t.docId+"-0"]=0;for(let i=0;i<n;i++){if(t.records.includes(i.toString()))continue;const o=i*e.chunkSize,l=Math.min(t.size,o+e.chunkSize),a=t.raw.slice(o,l);a.chunk=i+1,a.filename=t.name,a.docId=t.docId,a.chunkSize=n,a.cacheSign=t.cacheSign,a.records=t.records,a.percentage=t.percentage;const s=Promise.resolve(a),d=r.length-1;r[d].length<e.chunkBatchLimit?r[d].push(s):(e.batchQueue[t.docId+"-"+r.length]=0,e.batchQueueListen[t.docId+"-"+r.length]=0,r.push([]),r[d+1].push(s))}return r},jn=({constants:e,props:t,state:n,t:r,Modal:i})=>({token:o,file:l,isOnlinePreview:a=!1,type:s="",isinit:d=!1})=>t.edm.isExtranet&&!a?(n.isSuccess=!0,n.accept=t.accept,n.singleMaxSize=t.edm.singleFileMaxSize||200,Promise.resolve(!0)):n.isEdm&&!o||typeof o!="function"?(i.message({message:r(e.EDM.I18NKEY),status:"warning",duration:"2000"}),new Promise(u=>{u(!1)})):new Promise((u,f)=>{try{let m;d&&t.cacheToken?(!gt&&(gt=o(l)),m=gt):m=o(l),m.then(I=>{const v=I||{},g=v.config&&v.config.fileWhiteList||"";n.isSuccess=!0,n.accept=s==="download"||s==="preview"?t.accept:`${g}${t.accept?`,${t.accept}`:""}`,n.headers[e.EDM.EDMTOKEN]=v.edmToken||"",n.headers[e.EDM.TRACEID]=v.traceId||"",v.config&&(n.singleMaxSize=v.config.singleFileMaxSize),n.edmToken=v,u(!0)})}catch(m){f(new Error(m))}}),Ls=({api:e,props:t})=>(n,r=!1)=>new Promise((i,o)=>{try{const l={isOnlinePreview:!0,file:n,type:"preview",token:t.edm.preview.token};e.getToken(l).then(a=>{if(!a){const s="[TINY Error][FileUpload] No edm token";o(new Error(s));return}Pe(n)||Array.isArray(n)&&n.length===1?e.previewFileSingle({file:Array.isArray(n)?he({},n[0]):n,resolve:i,open:r}):Array.isArray(n)&&n.length>1&&e.previewFileBatch({file:n,resolve:i,open:r})}).catch(a=>o(new Error(a)))}catch(l){o(new Error(l))}}),As=({api:e})=>t=>e.previewFile(t,!0),Ds=({api:e,state:t,props:n,constants:r,service:i})=>({file:o,resolve:l,open:a})=>{const s=e.getPreviewUrlSync(o);if(a)return l(s);if(s){t.showPreview=!0,t.iframeUrl=s,l(t.iframeUrl);return}const d=n.edm.preview.watermark||{},u=t.fileWater?r.EDM.FORMAT:"",f=t.fileWater?r.EDM.WATER:r.EDM.SOURCE,m=n.edm.preview.plugin;i.all([i.getPreviewUrl(),i.getSingleDownloadUrl()]).then(i.spread((I,v)=>{const g=n.edm.preview.serviceUrl,E=g||I.replace(/{docId}/,o.docId)+`?${u}docVersion=${o.docVersion}`,S=g||I.replace(/{docId}/,o.docId)+`?type=doc&pageNum=1&${u}docVersion=${o.docVersion}`,y=g+v.replace(/{docId}/,o.docId)+`?docId=${o.docId}&docVersion=${o.docVersion}&${f}from=Experience&`;m.setIsEDM3(!0),m.setDocumentInfoUrl(E),m.setDownloadUrl(y,!0),m.setPageUrl(S),m.setWatermarkParameters({showWatermark:d.showWatermark||1,rotation:d.rotation||30,text:d.text||""}),m.setPdfjsPaht(n.edm.preview.packageName||r.EDM.JSLIB),m.setAuthToken(t.headers[r.EDM.EDMTOKEN]),t.showPreview=!0,t.iframeUrl=n.edm.preview.previewUrl+`${r.EDM.URLCONTS}${o.docVersion}&docId=${o.docId}`,l(t.iframeUrl)}))},Os=({service:e,props:t,state:n,api:r})=>({file:i,resolve:o,open:l})=>{e.getPreviewUrlBatch().then(a=>{const d=(t.edm||{}).preview||{},u=d.online||{},{jslibhtml:f,baseurl:m}=u,{text:I}=d.watermark||{};e.request({method:"post",url:oe.filterUrl(a),withCredentials:t.withCredentials,headers:n.headers,data:{documents:i,asposeClient:f,asposeService:m,watermark:I}}).then(({data:v})=>{const g=r.getPreviewUrlSync({generate:v.result.generate,size:i.length},!0);if(l)return o(g);g&&(n.showPreview=!0,n.iframeUrl=g,o(n.iframeUrl))})})},Ps=({constants:e,props:t,state:n})=>(r,i)=>{const l=(t.edm||{}).preview||{},{watermark:a,online:s,bar:d={},lang:u}=l,{webPreview:f=!1,http:m=!1,jslibhtml:I,appid:v,baseurl:g}=s;let E;f?E=`${m?"http:":"https:"}${g.replace(/\/$/,"")}/edm/projects/${v}/web/preview`:E=I.split("?").shift();const S=[];let y;const T=n.headers[e.EDM.EDMTOKEN];if(i){E=E=`${g.replace(/\/$/,"")}/edm/projects/${v}/web/batchPreview`;const{generate:c,size:F}=r;y={generate:c,"EDM-Authorization":T,docIndex:1,size:F}}else if(f){const{styles:c}=d;y=Object.assign({},a,{"EDM-Authorization":T,lang:u,bar:window.btoa(JSON.stringify(Dt(he({},d),{styles:JSON.stringify(c)}))),docId:r.docId})}else y=Object.assign({},s,a,{authToken:T,jslibhtml:E,docId:r.docId,docVersion:r.docVersion||r.version||"V1",type:"doc",pageNum:"1"});for(let c in y){const F=y[c];Pe(F)||(c==="text"&&S.push(`watermark=${encodeURIComponent(F)}`),S.push(`${c}=${F}`))}return E+"?"+S.join("&")},Ms=({api:e,props:t,service:n})=>r=>new Promise((i,o)=>{try{e.getToken({token:t.edm.preview.token,file:r,type:"preview"}).then(l=>{if(!l){o(new Error("[TINY Error][FileUpload] No edm token"));return}n.getPreviewUrl().then(a=>{Pe(r)||Array.isArray(r)&&r.length===1?e.previewImageSingle({url:a,file:Array.isArray(r)?he({},r[0]):r}).then(s=>i(s)):Array.isArray(r)&&r.length>1&&e.previewImageBatch({url:a,file:r}).then(s=>i(s))})})}catch(l){o(new Error(l))}}),Rs=({service:e,state:t,props:n})=>({file:r,url:i})=>{const l=(n.edm||{}).preview||{};let{text:a,textStyle:s}=l.watermark||{};s=he({tile:!0},s);const d=Object.assign(r,{type:"image",imageType:"image",watermark:a,textStyle:s});return e.post(oe.filterUrl(i.replace(/{docId}/,r.docId)),d,{withCredentials:n.withCredentials,headers:Object.assign(n.headers,t.headers),responseType:"blob"}).then(u=>{const f=new Blob([u.data]);return(window.URL||window.webkitURL).createObjectURL(f)})},zs=({service:e,api:t})=>({url:n,file:r})=>{const i=[];return r.forEach(o=>{i.push(t.previewImageSingle({url:n,file:o}))}),e.all(i)},Ns=({props:e,state:t})=>()=>{const n={class:"single-download-modal single-download-modal1",style:"",props:{lockScroll:!0,visible:t.showPreview,dragable:!0,title:"\u6587\u6863\u9884\u89C8",width:"60%"},on:{"update:visible":s=>t.showPreview=s}};let r={};e.edm&&e.edm.preview&&typeof e.edm.preview.dialogConfig=="object"&&(r=e.edm.preview.dialogConfig||{});const i=on(!0,{},r),o=i.events||{},l=i.class||"",a=i.style||"";return delete i.events,delete i.class,delete i.style,on(!0,{},n,{class:`${n.class} ${l}`,style:`${a}`,props:he({},i),on:he({},o)})},xs=({props:e,state:t,constants:n})=>()=>{const r=!(e.edm&&e.edm.chunkSize),{SIZE_0M:i,SIZE_2M:o,SIZE_4M:l,SIZE_8M:a,SIZE_16M:s,SIZE_20M:d,SIZE_32M:u,SIZE_64M:f,SIZE_2G:m}=n.EDM;let{docSize:I=d,chunkSize:v=a}=e.edm||{};I=I<0?0:I,I=I>m?m:I,I&&(v=v<0?0:v),r||[f,u,s,a,l,o,i].some(E=>{if(v>=E)return v=Math.max(E,o),!0}),t.docSize=I*1024,t.chunkSize=v*1024},Bs=({props:e,constants:t})=>()=>{const{sourceType:n,listType:r}=e;let i=n.split("/");return r!==t.LIST_TYPE.PICTURE_CARD&&(i=i.slice(0,1)),i},Vs=({state:e,props:t,constants:n})=>({file:r})=>{const{PICTURE_SINGLE:i,PICTURE_CARD:o}=n.LIST_TYPE,{listType:l}=t;if(![i,o].includes(l))return;let a=e.types[0];if(r.type)a=r.type;else if(l===o){const{VIDEO:s,AUDIO:d,PICTURE:u}=n.FILE_TYPE,{SOURCE_VIDEO:f,SOURCE_AUDIO:m,SOURCE_PICTURE:I}=n.SOURCE_TYPE,v={[s]:f,[d]:m,[u]:I},g=zn({file:r}),E=Object.keys(v).find(S=>S.split("/").includes(g));v[E]&&(a=v[E])}return a},js=({constants:e,vm:t})=>n=>{t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].handleUpdate(n)},Hs=({vm:e,constants:t})=>n=>{if(typeof n=="object"&&n!==null&&n!==void 0){let r=n;Array.isArray(n)||(r=[n]),e.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].handleChange({target:{files:r}})}},Ws=({vm:e,state:t,constants:n,props:r,emit:i})=>(o,l)=>{const{PICTURE_CARD:a,PICTURE_SINGLE:s}=n.LIST_TYPE,{isHwh5:d}=t,{listType:u}=r;if([a,s].includes(u)||(l=""),t.triggerClickType=l,u===a&&d){e.$refs[n.UPLOAD_LIST_INNER].$refs[n.UPLOAD_LIST_INNER_TEMPLATE].chooseFile(l);return}i("trigger-click",o,l)},Ys=e=>()=>{e.uploadFiles.forEach(t=>{t.url&&t.url.indexOf("blob:")===0&&URL.revokeObjectURL(t.url)})},Zs=({state:e,emit:t})=>n=>{e.selected=n,t("click-file-list",n)},qs=({vm:e,state:t})=>()=>{e.$on("drag-over",n=>t.isDragover=n)},Xs=({state:e})=>()=>{const t=e.encryptDialogConfig.selectFileMethod;e.encryptDialogConfig.show=!1,typeof t=="function"&&t()},jt=["state","getNewTabPreviewUrl","previewFile","downloadFile","abort","clearFiles","getFile","handleStart","handleProgress","handleSuccess","handleError","handleRemove","handleReUpload","handleReUploadTotal","submit","handleClick","getFileUploadUrl","updateUrl","previewImage","updateFile","handleChange","abortDownload","handleClickFileList","handleTriggerClick","encryptDialogConfirm","formatFileSize"],Ks=({api:e,reactive:t,computed:n,inject:r,ref:i,vm:o,props:l,httpRequest:a,service:s})=>t({url:"",updateId:"",currentDownloadFiles:"",tempIndex:1,draging:!1,uploadFiles:[],dragOver:!1,httpRequest:a,form:r("form",i({default:""})),listeners:o.$listeners,docSize:0,chunkSize:0,chunkBatchLimit:5,downloadChunkLimit:5,batchQueue:{},batchQueueListen:{},batchCancelToken:{},replayAtoms:{},chunkUploadUrl:"",largeFileInfo:{},headers:{},accept:"",edmToken:{},isSuccess:!1,singleMaxSize:200,formData:{},showPreview:!1,iframeUrl:"",fileWater:!1,tabUrl:"",cacheDocuments:{},isEdm:n(()=>!wt(l.edm)),uploadDisabled:n(()=>e.computedUploadDisabled()),dialogConfigObj:n(()=>e.getDialogConfigObj()),uploadingFiles:[],currentUploadingFileUids:[],uploadingSize:n(()=>e.computedUploadingSize()),isEntireCheckCode:n(()=>!("isEntireCheckCode"in l.edm&&l.edm.isEntireCheckCode!==!0)),downloadBatchQueue:{},downloadBatchQueueListen:{},downloadChunkFile:{},downloadReplayAtoms:{},errorStatusCodes:[0,401,429],hasFileInfoInterface:n(()=>s.setting.services.EDM&&s.setting.services.EDM.DocumentInfoUrl),currentDownloadFile:"",isDragover:!1,downloadCancelToken:{},downloadCancelData:{},isHwh5:n(()=>!wt(l.hwh5)),selected:null,types:n(()=>e.computedSourcetype()),triggerClickType:"",visible:!1,downloadParamsWhitelist:["docId","wmType","docVersion"],encryptDialogConfig:{show:!1,selectFileMethod:null}}),Gs=({api:e,state:t,props:n,constants:r,vm:i,$service:o,t:l,Modal:a})=>{Object.assign(e,{state:t,sliceChunk:Us({state:t}),getFormData:Es({constants:r,props:n,state:t}),abort:ts({constants:r,vm:i,state:t}),handleClick:os({constants:r,vm:i}),getFile:es(t),clearFiles:rs(t),watchFileList:Pa({constants:r,state:t,props:n,api:e}),watchListType:Oa({constants:r,state:t,api:e}),onBeforeDestroy:Ys(t),computedUploadDisabled:Aa({props:n,state:t}),computedUploadingSize:Da({state:t,constants:r}),getFileUploadUrl:ls(o),getToken:jn({constants:r,props:n,state:t,t:l,Modal:a}),getDialogConfigObj:Ns({props:n,state:t}),computeDocChunkSize:xs({props:n,state:t,constants:r}),updateFile:js({constants:r,vm:i}),getPreviewUrlSync:Ps({constants:r,props:n,state:t}),ordinaryDownload:Pn(o),clearUploadingFiles:Ja({constants:r,state:t}),calcUploadingFilesInfo:Ya({state:t,constants:r}),properFileSize:Ba({props:n,state:t,api:e,constants:r,Modal:a,t:l}),mounted:qs({vm:i,state:t}),previewFileSingle:Ds({api:e,state:t,props:n,constants:r,service:o}),previewFileBatch:Os({service:o,props:n,state:t,api:e}),previewImageSingle:Rs({state:t,props:n,service:o}),previewImageBatch:zs({service:o,api:e}),abortDownload:ns({state:t}),createDownloadCancelToken:cs({state:t,service:o}),computedSourcetype:Bs({props:n,constants:r}),getFileSourceType:Vs({state:t,props:n,constants:r}),encryptDialogConfirm:Xs({state:t}),formatFileSize:Er})},Qs=({api:e,props:t,$service:n,state:r,constants:i,emit:o,mode:l,Modal:a,t:s,vm:d,CryptoJS:u,Streamsaver:f})=>{Object.assign(e,{segmentUploadInit:ks({api:e,props:t,service:n,state:r,constants:i}),segmentUpload:$s({api:e,props:t,service:n,state:r,emit:o,constants:i,CryptoJS:u}),addFileToList:Va({api:e,constants:i,emit:o,props:t,state:r,mode:l}),downloadFile:gs({api:e,state:r}),downloadFileSingleInner:vs({props:t,state:r,api:e,constants:i}),previewImage:Ms({api:e,props:t,service:n}),previewFile:Ls({api:e,props:t}),getNewTabPreviewUrl:As({api:e}),submit:is({api:e,constants:i,vm:d,props:t,state:r}),handleStart:Wa({api:e,constants:i,props:t,state:r,vm:d}),batchSegmentUpload:Fs({api:e,constants:i,props:t,vm:d,state:r}),largeDocumentUpload:Ss({api:e,Modal:a,state:r,emit:o,constants:i,t:s}),handleProgress:Za({api:e,constants:i,emit:o,state:r}),handleSuccess:qa({api:e,constants:i,emit:o,Modal:a,props:t,state:r,t:s}),handleError:Xa({api:e,constants:i,emit:o,state:r,props:t}),handleRemove:Ka({api:e,emit:o,props:t,state:r,constants:i}),handleReUpload:Ga({vm:d,constants:i}),handleReUploadTotal:Qa(e),updateUrl:as({api:e,props:t,state:r}),startUpload:Na({api:e,state:r,constants:i,vm:d,Modal:a,t:s}),beforeUpload:za({api:e,props:t,Modal:a,constants:i,t:s,state:r}),getDownloadFileInfo:ys({api:e,props:t,state:r,service:n}),largeDocumentDownload:ws({api:e,state:r}),sliceDownloadChunk:bs({state:r}),batchSegmentDownload:Ts({state:r,api:e}),downloadFileInner:_s({api:e,props:t,state:r}),setWriterFile:Cs({state:r,emit:o,Streamsaver:f}),afterDownload:Is({api:e,state:r}),getFileHash:ja({emit:o,Modal:a,constants:i,t:s,CryptoJS:u,state:r}),modifyServiceUrlSingle:ss({state:r,props:t,constants:i}),getKiaScanTip:ds({Modal:a,constants:i,t:s}),downloadFileSingle:ps({service:n,constants:i,props:t,state:r,api:e,emit:o}),downloadFileBatch:fs({api:e,service:n,props:t,state:r,emit:o}),downloadFileSingleHwh5:ms({state:r,props:t,emit:o,constants:i}),downloadAsyncPackage:hs({state:r,props:t,api:e,constants:i,service:n}),validateDownloadStatus:us({state:r,Modal:a}),handleChange:Hs({vm:d,constants:i}),handleClickFileList:Zs({state:r,emit:o}),handleTriggerClick:Ws({vm:d,state:r,constants:i,props:t,emit:o})})},Js=({watch:e,state:t,api:n,props:r,$service:i})=>{e(()=>r.edm.upload,o=>o&&n.getToken({token:o.token,isinit:!0}),{immediate:!0,deep:!0}),e(()=>r.listType,n.watchListType),e(()=>r.fileList,o=>n.watchFileList(o),{immediate:!0,deep:!0}),e(()=>r.action,()=>{!r.httpRequest&&!t.isEdm&&n.updateUrl()},{immediate:!0}),e(()=>t.isSuccess,o=>o&&i.getSingleUploadUrl().then(l=>t.url=l),{immediate:!0}),e(()=>r.edm,n.computeDocChunkSize,{deep:!0,immediate:!0})};let Hn=()=>({});const Ht=(e,{computed:t,inject:n,onBeforeUnmount:r,provide:i,reactive:o,ref:l,watch:a,onMounted:s},{t:d,vm:u,parent:f,emit:m,service:I,mode:v,constants:g},{Modal:E,CryptoJS:S,Streamsaver:y})=>{let T={};const c=Rn({props:e,service:I}),F=c.httpRequest,b=Ks({reactive:o,computed:t,api:T,inject:n,ref:l,vm:u,props:e,httpRequest:F,service:I});return Gs({api:T,state:b,props:e,constants:g,vm:u,$service:c,t:d,Modal:E}),Qs({api:T,props:e,$service:c,state:b,constants:g,emit:m,mode:v,Modal:E,t:d,vm:u,CryptoJS:S,Streamsaver:y}),Hn=()=>T,i("uploader",f),s(T.mounted),r(()=>{T.onBeforeDestroy(),T={}}),Js({watch:a,state:b,api:T,props:e,$service:c}),T},Wn=["t","state","parsePercentage","handleClick","handlePreview","picturefilePreview","getDeleteData","downloadFile","play","pause","handleLoadedmetadata","handleTimeupdate","showOperatePanel","getFileType","getFileIcon","reUpload","remove","handleTriggerClick","chooseFile"],Yn=(e,{reactive:t,onMounted:n,onUnmounted:r,watch:i,inject:o,computed:l},{t:a,parent:s,mode:d,emit:u,service:f,vm:m,nextTick:I,designConfig:v},{Modal:g})=>{var E,S,y,T,c,F;const b={getApi:Hn};s=o("uploader").$children[0];const C=s.$constants,k=Rn({props:e,service:f}),O=t({focusing:!1,shows:!1,progressType:((E=v==null?void 0:v.state)==null?void 0:E.progressType)||"circle",progressWidth:(S=v==null?void 0:v.state)==null?void 0:S.progressWidth,progressStrokeWidth:((y=v==null?void 0:v.state)==null?void 0:y.progressStrokeWidth)||6,tooltipDisabled:((T=v==null?void 0:v.state)==null?void 0:T.tooltipDisabled)!==!1,closeComponent:((c=v==null?void 0:v.icons)==null?void 0:c.closeComponent)||"icon-close",preViewComponent:(F=v==null?void 0:v.icons)==null?void 0:F.preViewComponent,failUploadFileCount:l(()=>e.files.reduce((x,X)=>x+=X.status==="fail"?1:0,0)),startPostion:0,screenType:d==="mobile",showPanel:!1,showTriggerPanel:!1,triggerClickType:"",showAudioPanel:!1,files:l(()=>b.getNotSuccessFiles()),currentFile:null});return s.getToken=jn({constants:C,props:s,state:s.state,t:a,Modal:g}),Object.assign(b,{state:O,getDeleteData:pa(u),parsePercentage:da(),downloadFile:Pn(k),picturefilePreview:ca(O),handleClick:ua({props:e,api:b,parent:s}),play:ga({vm:m,api:b,props:e}),pause:va({vm:m,props:e}),handleLoadedmetadata:ya({vm:m}),handleTimeupdate:wa(),destroyed:Fa({api:b,props:e,vm:m}),showOperatePanel:fa({state:O}),getFileType:ba(),getFileIcon:Ta({constants:C}),mounted:$a({api:b,vm:m}),calcUploadListLiWidth:Ia({vm:m,nextTick:I,props:e,constants:C}),reUpload:ha({emit:u,props:e,parent:s}),remove:_a({emit:u}),handleTriggerClick:ka({state:O,props:e}),chooseFile:Sa({state:O,constants:C}),calcVisible:Ca({props:e,constants:C,emit:u}),getNotSuccessFiles:Ea({props:e,constants:C})}),e.listType===C.LIST_TYPE.DRAG_SINGLE&&i(()=>e.files&&e.files[0],x=>{x&&x.status===C.FILE_STATUS.FAIL&&setTimeout(()=>{b.remove({file:x})},2e3)},{immediate:!0,deep:!0}),i(()=>e.files,b.calcUploadListLiWidth),e.mode===C.MODE.BUBBLE&&e.listType===C.LIST_TYPE.TEXT&&C&&i(()=>e.files,b.calcVisible,{immediate:!0,deep:!0}),n(b.mounted),r(b.destroyed),b},ed=()=>!!window.navigator.userAgent.match(/firefox/i),Zn=ed()?"DOMMouseScroll":"mousewheel",bt=e=>{let t=!1;return function(...n){t||(t=!0,window.requestAnimationFrame(()=>{e.apply(this,n),t=!1}))}},td=({props:e,api:t,state:n})=>()=>{t.deviceSupportUninstall(),e.onClose(),n.showImageViewer=!1},nd=({state:e,api:t,mode:n})=>()=>{Ue(window,"resize",t.initPage),e.urlList=e.urlList.map(r=>oe.filterUrl(r)),e.urlList=e.urlList.map(r=>{let i={},o="";if(typeof r=="string")return r=oe.filterUrl(r),e.isThumbnail||e.isMenuView?(o=r.lastIndexOf("/"),e.fileName=r.substring(o+1),i.url=r,i.name=e.fileName,i):(o=r.lastIndexOf("/"),e.fileName=r.substring(o+1),{url:r,name:e.fileName});if(typeof r=="object"&&r!==null)return r.name||(o=r.url.lastIndexOf("/"),e.fileName=r.url.substring(o+1),r.name=e.fileName),r}),e._keyDownHandler=bt(r=>{switch(r.keyCode){case Te.Escape:t.hide();break;case Te.Space:t.toggleMode();break;case Te.ArrowLeft:t.prev();break;case Te.ArrowUp:t.handleActions("zoomIn");break;case Te.ArrowRight:t.next();break;case Te.ArrowDown:t.handleActions("zoomOut");break}}),e._mouseWheelHandler=bt(r=>{(r.wheelDelta?r.wheelDelta:-r.detail)>0?t.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):t.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})}),Ue(document,"keydown",e._keyDownHandler),n!=="mobile-first"&&Ue(document,Zn,e._mouseWheelHandler)},rd=({state:e,mode:t})=>()=>{Le(document,"keydown",e._keyDownHandler),t!=="mobile-first"&&Le(document,Zn,e._mouseWheelHandler),e._keyDownHandler=null,e._mouseWheelHandler=null},id=e=>()=>e.loading=!1,od=({state:e,t})=>n=>{e.loading=!1,n.target.alt=t("ui.imageViewer.loadErrorAlt")},ld=e=>t=>{if(e.loading||t.button!==0)return;const{offsetX:n,offsetY:r}=e.transform,i=t.pageX,o=t.pageY;e._dragHandler=bt(l=>{e.transform.offsetX=n+l.pageX-i,e.transform.offsetY=r+l.pageY-o}),Ue(document,"mousemove",e._dragHandler),e._removeDrag=()=>Le(document,"mousemove",e._dragHandler),e._clearMouse&&(e._clearMouse(),e._clearMouse=void 0),Ue(document,"mouseup",e._removeDrag),Ue(document,"mouseleave",e._removeDrag),e._clearMouse=()=>{Le(document,"mouseup",e._removeDrag),Le(document,"mouseleave",e._removeDrag)},t.preventDefault()},ad=e=>()=>e.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1},sd=({state:e,constants:t,api:n})=>()=>{if(e.loading)return;const r=t.MODE,i=Object.keys(r),o=[];i.forEach(s=>{o.push(r[s])});let l=-1;o.forEach((s,d)=>{s.name===e.mode.name&&(l=d)});const a=(l+1)%i.length;e.mode=r[i[a]],n.reset()},dd=({state:e,api:t,vm:n})=>()=>{if(e.isFirst&&!e.infinite)return;const r=e.urlList.length;let i="";switch(e.index=(e.index-1+r)%r,t.activeItems(e.index),e.isThumbnail?i=n.$refs[`isThumbnail_${e.index}`][0]||n.$refs[`isThumbnail_${e.index}`]:e.isMenuView&&(i=n.$refs[`isMenuView_${e.index}`][0]||n.$refs[`isMenuView_${e.index}`]),e.index){case 1:e.isThumbnail&&n.$refs.isThumbnailContent&&(n.$refs.isThumbnailContent.scrollTop=0),e.isMenuView&&n.$refs.isMenuViewContent&&(n.$refs.isMenuViewContent.scrollTop=0),e.scrollTop=0;break;case e.urlList.length-1:t.getLastPrev(i);break;case e.urlList.length-2:break;case e.urlList.length-3:e.scrollTop=i.offsetHeight;break;default:t.getDefaultPrev(i);break}},ud=({state:e,vm:t})=>n=>{e.isThumbnail&&t.$refs.isThumbnailContent&&(t.$refs.isThumbnailContent.scrollTop=n.offsetTop),e.isMenuView&&t.$refs.isMenuViewContent&&(t.$refs.isMenuViewContent.scrollTop=n.offsetTop),e.scrollTop=n.offsetTop},cd=({state:e,vm:t})=>n=>{e.scrollTop<=n.offsetHeight?e.scrollTop=n.offsetTop-e.scrollTop-(e.isThumbnail?e.thumbnailTop:e.menuTop):e.scrollTop=e.scrollTop-n.offsetHeight-(e.isThumbnail?e.thumbnailTop:e.menuTop),e.isThumbnail&&t.$refs.isThumbnailContent&&(t.$refs.isThumbnailContent.scrollTop=e.scrollTop),e.isMenuView&&t.$refs.isMenuViewContent.scrollTop&&(t.$refs.isMenuViewContent.scrollTop=e.scrollTop)},pd=({state:e,api:t,vm:n})=>()=>{if(e.isLast&&!e.infinite)return;const r=e.urlList.length;let i="";e.index=(e.index+1)%r,t.activeItems(e.index),e.isThumbnail?i=n.$refs[`isThumbnail_${e.index}`][0]||n.$refs[`isThumbnail_${e.index}`]:e.isMenuView&&(i=n.$refs[`isMenuView_${e.index}`][0]||n.$refs[`isMenuView_${e.index}`]);const l=(i&&i.getBoundingClientRect()).height;switch(e.index){case 0:e.isThumbnail&&n.$refs.isThumbnailContent&&(n.$refs.isThumbnailContent.scrollTop=0),e.isMenuView&&n.$refs.isMenuViewContent&&(n.$refs.isMenuViewContent.scrollTop=0),e.scrollTop=0;break;case 1:break;case 2:break;case 3:e.scrollTop=l;break;default:e.isThumbnail?(n.$refs.isThumbnailContent&&(n.$refs.isThumbnailContent.scrollTop=e.scrollTop),e.scrollTop=e.scrollTop+i.offsetHeight+e.thumbnailTop):e.isMenuView&&(n.$refs.isMenuViewContent&&(n.$refs.isMenuViewContent.scrollTop=e.scrollTop),e.scrollTop=e.scrollTop+i.offsetHeight+e.menuTop);break}},fd=(e,t,n)=>(r,i={})=>{const{zoomRate:o,rotateDeg:l,enableTransition:a}=he({zoomRate:.2,rotateDeg:90,enableTransition:!0},i),{transform:s}=e;let d="",u=[];d=e.currentImg.lastIndexOf("/");let f=e.currentImg.substring(d+1);r==="delImage"&&(typeof e.urlList[0]=="string"?u=e.urlList:typeof e.urlList[0]=="object"&&e.urlList[0]!==null&&(f=e.urlList[e.index].name,e.urlList.forEach(m=>{u.push(m.url)})),u.includes(e.currentImg)&&(e.index===e.urlList.length-1?(e.urlList.splice(e.index,1),e.index=e.urlList.length-1):e.urlList.splice(e.index,1)),e.imageName=f,n("delete",e.imageName)),!e.loading&&(r==="zoomOut"?s.scale>.2&&(s.scale=parseFloat((s.scale-o).toFixed(3))):r==="zoomIn"?s.scale=parseFloat((s.scale+o).toFixed(3)):r==="clocelise"?s.deg+=l:r==="anticlocelise"&&(s.deg-=l),s.enableTransition=a)},hd=e=>()=>e.urlList.length<=1,md=e=>()=>e.index===0,gd=({state:e,props:t})=>()=>e.index===t.urlList.length-1,vd=e=>()=>{if(typeof e.urlList[0]=="string")return e.urlList[e.index];if(typeof e.urlList[0]=="object"&&e.urlList[0]!==null)return e.urlList[e.index].url},yd=({state:e,constants:t})=>()=>{const{offsetX:n,offsetY:r,scale:i,deg:o,enableTransition:l}=e.transform,a=l?"transform .3s":"",s={transform:`scale(${i}) rotate(${o}deg)`,transition:a,"margin-top":`${r}px`,"margin-left":`${n}px`};return JSON.stringify(e.mode)===JSON.stringify(t.MODE.CONTAIN)&&(s.maxWidth=s.maxHeight="100%"),s},wd=e=>t=>e.previewVisible=t,bd=({state:e,emit:t,props:n})=>()=>{e.transform.scale=1,e.transform.deg=0,setTimeout(()=>{n.startPosition>0?(e.index=(n.startPosition-1+e.urlList.length)%e.urlList.length,e.imageTransform=e.index*e.imageItemWidth,e.imageTransformSize=-e.index*e.imageItemWidth):(e.index=0,e.imageTransform=e.index*e.imageItemWidth,e.imageTransformSize=-e.index*e.imageItemWidth)},300),t("update:preview-visible",!1),t("close",e.index,e.urlList[e.index])},Td=({state:e,parent:t,props:n,vm:r,mode:i})=>()=>{let o=0;const l=e.urlList.length;if(i==="mobile-first"?(e.isThumbnail&&e.isImagePreview?o=r.$refs.thumbnailCanvasBox.offsetWidth:o=r.$refs.canvasBox&&r.$refs.canvasBox.offsetWidth,e.imageList=r.$refs.viewerItem):i==="mobile"?(o=t.$el.querySelector(".tiny-mobile-image-viewer__canvas").offsetWidth,e.imageList=t.$el.querySelectorAll(".tiny-mobile-image-viewer__item")):(o=t.$el.querySelector(".tiny-image-viewer__canvas").offsetWidth,e.imageList=t.$el.querySelectorAll(".tiny-image-viewer__img")),e.imageItemWidth=o,e.imageAllWidth=e.urlList.length*o,i!=="mobile-first"){if(n.startPosition>0){e.index=n.startPosition,e.imageTransition=0;const a=e.index*e.imageItemWidth;e.imageTransform=a,e.imageTransformSize=-a}if(e.index===0&&n.deleteButton&&e.delete){e.imageTransition=0;const a=e.index*e.imageItemWidth;e.imageTransform=a,e.imageTransformSize=-a}}setTimeout(()=>{e.imageTransition=300},0),n.startPosition===0&&(e.arrowStyle="N"),n.startPosition===l-1&&(e.arrowStyle="Y")},_d=({state:e,emit:t})=>()=>{if(e.isLast&&!e.infinite)return;const n=e.urlList.length;if(e.index>=e.urlList.length-2?e.arrowStyle="Y":e.arrowStyle=null,e.imageTransform===e.imageAllWidth){e.imageTransformSize=e.imageTransform=0,e.imageList[0].style.transform=null;return}if(e.imageTransform===e.imageAllWidth-e.imageItemWidth&&e.index===e.urlList.length-1)return;e.index=(e.index+1)%n;const r=e.index*e.imageItemWidth;e.imageTransform=r,e.imageTransformSize=-r,t("change",e.index,e.urlList[e.index])},Id=({state:e,emit:t})=>()=>{if(e.isFirst&&!e.infinite)return;const n=e.urlList.length;if(e.index<=1?e.arrowStyle="N":e.arrowStyle=null,e.imageTransform==0&&e.index==0)return;e.index=(e.index-1+n)%n;const r=e.index*e.imageItemWidth;e.imageTransform=r,e.imageTransformSize=-r,t("change",e.index,e.urlList[e.index])},Cd=({api:e,emit:t,state:n})=>()=>{if(n.urlList.length<=1){n.delete=!1;return}n.delete=!0;const r=n.index,i=n.urlList;i.splice(r,1),n.urlList=i,n.index=0,e.getImageWidth(),t("newImageList",n.urlList,r)},Ed=e=>()=>{if(window.navigator.msSaveOrOpenBlob){let t=atob(e.currentImg.split(",")[1]),n=t.length,r=new Uint8Array(n);for(;n--;)r[n]=t.charCodeAt(n);let i=new Blob([r]);window.navigator.msSaveOrOpenBlob(i,"img.png")}else{const t=document.createElement("a");t.href=e.currentImg,t.setAttribute("download","img"),t.click()}},Sd=({state:e,mode:t,api:n})=>r=>{e.firstX=r.targetTouches[0].clientX,t==="mobile-first"&&(e.time=setTimeout(()=>{e.isImagePreview?e.boxVisibility=!0:n.langClick()},1e3));const i=r.touches,o=i[0],l=i[1];qn(r),e.pageX=o.pageX,e.pageY=o.pageY,e.moveable=!0,l&&(e.pageX2=l.pageX,e.pageY2=l.pageY),e.originScale=e.scale||1},qn=(e,t)=>{(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&e.stopPropagation()},kd=e=>t=>{if(!e.moveable)return;qn(t);const n=t.touches,r=n[0],i=n[1];if(i){e.pageX2||(e.pageX2=i.pageX),e.pageY2||(e.pageY2=i.pageY);const o=(s,d)=>Math.hypot(d.x-s.x,d.y-s.y),l=o({x:r.pageX,y:r.pageY},{x:i.pageX,y:i.pageY})/o({x:e.pageX,y:e.pageY},{x:e.pageX2,y:e.pageY2});let a=e.originScale*l;a>3&&(a=3),e.scale=a,e.transform.scale=a}clearTimeout(e.time)},$d=e=>t=>{let n=0;e.endX=t.changedTouches[0].clientX,n=e.endX-e.firstX,e.boxVisibility||n===0&&(e.isImagePreview=!1,e.hiddenThumbnail=!1),e.moveable=!1,e.pageX2=0,e.pageY2=0,clearTimeout(e.time)},Fd=({constants:e,props:t})=>()=>t.zIndex===e.DEFAULT_POPPER_ZINDEX||t.zIndex<1?Sr.nextZIndex():t.zIndex,Ud=e=>t=>{e.index=t,e.currentIndex=t},Ld=e=>t=>{e.index=t,e.mobileCurrentIndex&&(e.isImagePreview=!0)},Ad=({state:e,nextTick:t,api:n})=>()=>{e.isImagePreview=!1,e.hiddenThumbnail=!1,t(()=>{n.getImageWidth()})},Dd=({api:e,state:t})=>()=>{Le(window,"resize",e.initPage),t._clearMouse&&(t._clearMouse(),t._clearMouse=void 0),t._dragHandler&&(t._dragHandler=void 0),t._removeDrag&&(t._removeDrag=void 0)},Od=({state:e,vm:t,nextTick:n})=>r=>{switch(e.isThumbnail?e.showFlag=1:e.isMenuView&&(e.showFlag=2),r){case"1":e.isThumbnail=!1,e.isMenuView=!1;break;case"2":e.isThumbnail=!0,e.isMenuView=!1,n(()=>{e.currentIndex=0,e.index=0,t.$refs.isThumbnailContent.scrollTop=0});break;case"3":e.isThumbnail=!1,e.isMenuView=!0,n(()=>{e.currentIndex=0,e.index=0,t.$refs.isMenuViewContent.scrollTop=0});break;case"4":e.showFlag===1?e.isThumbnail=!0:e.showFlag===2&&(e.isMenuView=!0);break}},Pd=({state:e,api:t})=>(n,r)=>{switch(r){case 0:t.langClick();break;case 1:e.isThumbnail=!0,e.isImagePreview=!1;break;case 2:t.handleActions("delImage"),t.getImageWidth();break}},Wt=["state","zIndex","touchstart","touchmove","touchend","urlList","hide","prev","next","handleActions","toggleMode","handleImgLoad","handleImgError","handleMouseDown","handleVisible","swipeLeft","swipeRight","handleDelete","activeItems","imagePreview","itemClick","selectOption","langClick"],Md=({reactive:e,computed:t,api:n,mode:r,props:i,constants:o,inject:l})=>e({originScale:"",moveable:!1,pageX:"",pageY:"",pageY2:"",pageX2:"",mfPreviewVisible:l("mfPreviewVisible",null),scale:1,time:null,index:r=="pc"||r=="mobile-first"?0:i.startPosition,imageName:"",isShow:!1,infinite:!0,loading:!1,transform:{scale:1,deg:0,offsetX:0,offsetY:0,objfit:"contain",enableTransition:!1},urlList:i.urlList||l("urlList",null),mode:o.MODE.CONTAIN,previewVisible:i.previewVisible,fullScreen:i.imageFullCurrent,hammer:null,imageItemWidth:0,imageAllWidth:0,imageTransform:0,imageTransformSize:0,imageTransition:300,imageList:null,arrowStyle:null,delete:!1,isLast:t(()=>n.computedIsLast()),isFirst:t(()=>n.computedIsFirst()),isSingle:t(()=>n.computedIsSingle()),imgStyle:t(()=>n.computedImgStyle()),currentImg:t(()=>n.computedCurrentImg()),zIndex:t(()=>n.computeZIndex()),currentIndex:0,mobileCurrentIndex:-1,isImagePreview:!1,hiddenThumbnail:!1,firstX:0,endX:0,showImageViewer:!0,isThumbnail:i.isThumbnail,isMenuView:i.isMenuView,showFlag:0,boxVisibility:!1,fileName:"",scrollTop:0,thumbnailTop:o.THUMBNAILTOP,menuTop:o.MENUTOP}),Rd=({api:e,state:t,props:n,parent:r,nextTick:i,emit:o,t:l,constants:a,vm:s,mode:d})=>{Object.assign(e,{state:t,touchstart:Sd({state:t,mode:d,api:e}),touchmove:kd(t),touchend:$d(t),reset:ad(t),prev:dd({state:t,api:e,vm:s}),next:pd({state:t,api:e,vm:s}),getImageWidth:Td({state:t,parent:r,props:n,nextTick:i,vm:s,mode:d}),handleVisible:bd({state:t,emit:o,props:n}),handleActions:fd(t,n,o),handleImgLoad:id(t),handleMouseDown:ld(t),computedIsFirst:md(t),computedIsSingle:hd(n),handleImgError:od({state:t,t:l}),computedIsLast:gd({state:t,props:n}),watchVisible:wd(t),deviceSupportUninstall:rd({state:t,mode:d}),computedCurrentImg:vd(t),computedImgStyle:yd({state:t,constants:a}),computeZIndex:Fd({constants:a,props:n}),hide:td({props:n,api:e,state:t}),deviceSupportInstall:nd({state:t,api:e,mode:d}),toggleMode:sd({state:t,constants:a,api:e}),swipeRight:Id({api:e,state:t,emit:o}),swipeLeft:_d({api:e,state:t,emit:o}),handleDelete:Cd({api:e,state:t,emit:o}),activeItems:Ud(t),imagePreview:Ld(t),initPage:Ad({state:t,nextTick:i,api:e}),beforeDestroy:Dd({api:e,state:t}),itemClick:Od({state:t,vm:s,nextTick:i}),selectOption:Pd({state:t,api:e}),langClick:Ed(t),getLastPrev:ud({state:t,vm:s}),getDefaultPrev:cd({state:t,vm:s})})},zd=({watch:e,state:t,api:n,props:r,nextTick:i,vm:o})=>{e(()=>t.index,l=>{n.reset(),r.onSwitch(l)},{immediate:!0}),e(()=>r.previewVisible,l=>{n.watchVisible(l),(r.previewVisible||t.mfPreviewVisible)&&i(()=>{n.getImageWidth()})},{immediate:!0}),e(()=>t.currentImg,l=>{i(()=>{const a=t.urlList.indexOf(l);let s=o.$refs[`img_${a}`];Array.isArray(s)&&(s=s[0]),s&&(t.loading=!s.complete)})},{immediate:!0}),e(()=>t.isImagePreview,()=>i(()=>{n.getImageWidth()}))},Yt=(e,{computed:t,onMounted:n,onBeforeUnmount:r,onUpdated:i,reactive:o,watch:l,inject:a,provide:s},{t:d,parent:u,nextTick:f,emit:m,constants:I,vm:v,mode:g})=>{const E={},S=Md({reactive:o,computed:t,api:E,mode:g,props:e,constants:I,inject:a});return Rd({api:E,state:S,props:e,parent:u,nextTick:f,emit:m,t:d,constants:I,vm:v,mode:g}),zd({watch:l,state:S,api:E,props:e,nextTick:f,vm:v}),n(E.deviceSupportInstall),i(()=>{e.asyncClose&&setTimeout(()=>{S.previewVisible=!1,m("update:preview-visible",!1)},3e3)}),r(E.beforeDestroy),s("change-size",!0),E};function Nd(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=xd(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xd(e,t){if(!!e){if(typeof e=="string")return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}}function dn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bd=function(t,n){for(var r=t.__vccOpts||t,i=Nd(n),o;!(o=i()).done;){var l=o.value,a=l[0],s=l[1];r[a]=s}return r},Vd=Q({emits:["close","update:preview-visible","delete","change","newImageList"],props:[].concat(se,["urlList","zIndex","onSwitch","onClose"]),components:{IconClose:Me(),IconChevronLeft:Rt(),IconChevronRight:Ot(),IconZoomOut:Vt(),IconZoomIn:Bt(),IconFullscreen:Un(),IconMinscreen:Ln(),IconRepeat:xt(),IconRefres:Ke()},setup:function(t,n){return le({props:t,context:n,renderless:Yt,api:Wt})}}),jd=h("div",{class:"tiny-image-viewer__mask"},null,-1),Hd={class:"tiny-image-viewer__btn tiny-image-viewer__actions"},Wd={class:"tiny-image-viewer__actions-inner"},Yd=h("i",{class:"tiny-image-viewer__actions-divider"},null,-1),Zd=h("i",{class:"tiny-image-viewer__actions-divider"},null,-1),qd={class:"tiny-image-viewer__canvas"},Xd=["src"];function Kd(e,t,n,r,i,o){var l=$("icon-close"),a=$("icon-chevron-left"),s=$("icon-chevron-right"),d=$("icon-zoom-out"),u=$("icon-zoom-in"),f=$("icon-repeat"),m=$("icon-refres");return p(),R(Ve,{name:"viewer-fade"},{default:N(function(){return[h("div",{class:"tiny-image-viewer tiny-image-viewer__wrapper",style:Y({"z-index":e.state.zIndex}),onMousewheel:t[10]||(t[10]=B(function(){},["prevent"]))},[jd,h("span",{class:"tiny-image-viewer__btn tiny-image-viewer__close",onClick:t[0]||(t[0]=function(){return e.hide&&e.hide.apply(e,arguments)})},[_(l,{class:"tiny-svg-size"})]),e.state.isSingle?U("v-if",!0):(p(),w(V,{key:0},[h("span",{class:D(["tiny-image-viewer__btn tiny-image-viewer__prev",{"is-disabled":!e.state.infinite&&e.state.isFirst}]),onClick:t[1]||(t[1]=function(){return e.prev&&e.prev.apply(e,arguments)})},[_(a,{class:"tiny-svg-size"})],2),h("span",{class:D(["tiny-image-viewer__btn tiny-image-viewer__next",{"is-disabled":!e.state.infinite&&e.state.isLast}]),onClick:t[2]||(t[2]=function(){return e.next&&e.next.apply(e,arguments)})},[_(s,{class:"tiny-svg-size"})],2)],64)),h("div",Hd,[h("div",Wd,[_(d,{class:"tiny-svg-size",onClick:t[3]||(t[3]=function(I){return e.handleActions("zoomOut")})}),_(u,{class:"tiny-svg-size",onClick:t[4]||(t[4]=function(I){return e.handleActions("zoomIn")})}),Yd,(p(),R(Ye(e.state.mode.icon),{class:"tiny-svg-size",onClick:e.toggleMode},null,8,["onClick"])),Zd,_(f,{class:"tiny-svg-size",onClick:t[5]||(t[5]=function(I){return e.handleActions("anticlocelise")})}),_(m,{class:"tiny-svg-size",onClick:t[6]||(t[6]=function(I){return e.handleActions("clocelise")})})])]),h("div",qd,[(p(!0),w(V,null,ne(e.urlList,function(I,v){return p(),w(V,null,[v===e.state.index?(p(),w("img",{ref_for:!0,ref:"img_"+v,class:"tiny-image-viewer__img",key:I,src:e.state.currentImg,style:Y(e.state.imgStyle),onError:t[7]||(t[7]=function(){return e.handleImgError&&e.handleImgError.apply(e,arguments)}),onMousedown:t[8]||(t[8]=function(){return e.handleMouseDown&&e.handleMouseDown.apply(e,arguments)}),onLoad:t[9]||(t[9]=function(){return e.handleImgLoad&&e.handleImgLoad.apply(e,arguments)})},null,44,Xd)):U("v-if",!0)],64)}),256))])],36)]}),_:1})}var un=Bd(Vd,[["render",Kd]]);function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}var Gd=function(){function e(n,r,i){var o=this;o.element=n,o.tinyBinding=r,o.touchType=i,o.tinyVueTouches={x:0,y:0},o.tinyVueMoves=!0,o.tinyVueLeave=!0,o.tinyLongTouch=!0,o.tinyVueCallBack=Pe(r.value)?r.value.fn:r.value,o.element.addEventListener("touchstart",function(l){o.start(l)}),o.element.addEventListener("touchend",function(l){o.end(l)}),o.element.addEventListener("touchmove",function(l){o.move(l)})}var t=e.prototype;return t.start=function(r){var i=this;r.touches>=2||(this.tinyVueMoves=!0,this.tinyVueLeave=!0,this.tinyLongTouch=!0,this.tinyVueTouches={x:r.changedTouches[0].pageX,y:r.changedTouches[0].pageY},this.time=setTimeout(function(){i.tinyVueLeave&&i.tinyVueMoves&&(i.touchType=="longtap"&&i.tinyVueCallBack(i.tinyBinding.value,r),i.tinyLongTouch=!1)},1e3))},t.end=function(r){if(!(r.touches>=2)){var i=r.changedTouches[0].pageX-this.tinyVueTouches.x,o=r.changedTouches[0].pageY-this.tinyVueTouches.y;clearTimeout(this.time),Math.abs(i)>10||Math.abs(o)>100?(this.touchType=="swipe"&&this.tinyVueCallBack(this.tinyBinding.value,r),Math.abs(i)>Math.abs(o)?(i>10&&this.touchType=="swiperight"&&this.tinyVueCallBack(this.tinyBinding.value,r),i<-10&&this.touchType=="swipeleft"&&this.tinyVueCallBack(this.tinyBinding.value,r)):(o>10&&this.touchType=="swipedown"&&this.tinyVueCallBack(this.tinyBinding.value,r),o<-10&&this.touchType=="swipeup"&&this.tinyVueCallBack(this.tinyBinding.value,r))):this.tinyLongTouch&&this.tinyVueMoves&&(this.touchType=="tap"&&this.tinyVueCallBack(this.tinyBinding.value,r),this.tinyVueLeave=!1)}},t.move=function(){this.tinyVueMoves=!1},e}(),Qd=function(){var t={},n=["tap","swipe","swipeleft","swiperight","swipedown","swipeup","longtap"];return n.forEach(function(r){t[r]=kn({vTouch:{bind:function(o,l){new Gd(o,l,r)}}}).vTouch}),t},Jd=Qd();function eu(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=tu(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tu(e,t){if(!!e){if(typeof e=="string")return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}}function cn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nu=function(t,n){for(var r=t.__vccOpts||t,i=eu(n),o;!(o=i()).done;){var l=o.value,a=l[0],s=l[1];r[a]=s}return r},ru=Q({props:[].concat(se,["urlList","zIndex","onSwitch","onClose","previewVisible","closeShow","arrowShow","toolShow","showIndex","imageFullCurrent","startPosition","asyncClose","deleteButton"]),components:{IconClose:Me(),IconChevronLeft:Rt(),IconChevronRight:Ot(),IconZoomOut:Vt(),IconZoomIn:Bt(),IconRepeat:xt(),IconRefres:Ke(),IconDel:dt()},directives:Tt({},Jd),setup:function(t,n){return le({props:t,context:n,renderless:Yt,api:Wt})}}),iu=h("div",{class:"tiny-mobile-image-viewer__mask"},null,-1),ou={key:1,class:"tiny-mobile-image-viewer__btn tiny-mobile-image-viewer__index"},lu={class:"tiny-mobile-image-viewer__index--curren"},au=h("span",null,"/",-1),su={class:"tiny-mobile-image-viewer__index--total"},du={key:3,class:"tiny-mobile-image-viewer__btn tiny-mobile-image-viewer__actions"},uu={class:"tiny-mobile-image-viewer__actions-inner"},cu={class:"tiny-mobile-image-viewer__canvas"},pu={class:"tiny-mobile-image-viewer__detail",style:{"transition-duration":"0.3s"}},fu=["src"];function hu(e,t,n,r,i,o){var l=$("icon-close"),a=$("icon-chevron-left"),s=$("icon-chevron-right"),d=$("icon-zoom-out"),u=$("icon-zoom-in"),f=$("icon-repeat"),m=$("icon-refres"),I=$("icon-del"),v=lt("swipeleft"),g=lt("swiperight");return p(),R(Ve,{name:"viewer-fade",persisted:""},{default:N(function(){return[Ze((p(),w("div",{class:"tiny-mobile-image-viewer__wrapper",ref:"imagePreview",style:Y({"z-index":e.zIndex}),onClick:t[14]||(t[14]=function(){return e.handleVisible&&e.handleVisible.apply(e,arguments)})},[iu,e.closeShow?(p(),w("span",{key:0,class:"tiny-mobile-image-viewer__btn tiny-mobile-image-viewer__close",onClick:t[0]||(t[0]=B(function(){return e.handleVisible&&e.handleVisible.apply(e,arguments)},["stop"]))},[_(l,{class:"tiny-svg-size"})])):U("v-if",!0),e.showIndex?(p(),w("div",ou,[ee(e.$slots,"index",{value:e.state.index+1},function(){return[h("span",lu,A(e.state.index+1),1),au,h("span",su,A(e.urlList.length),1)]})])):U("v-if",!0),!e.state.isSingle&&e.arrowShow?(p(),w(V,{key:2},[h("span",{class:D(["tiny-mobile-image-viewer__btn tiny-mobile-image-viewer__prev",{"is-disabled":!e.state.infinite&&e.state.isFirst,"is-arrow-disabled":e.state.arrowStyle==="N"}]),onClick:t[1]||(t[1]=B(function(){return e.swipeRight&&e.swipeRight.apply(e,arguments)},["stop"]))},[_(a,{class:"tiny-svg-size"})],2),h("span",{class:D(["tiny-mobile-image-viewer__btn tiny-mobile-image-viewer__next",{"is-disabled":!e.state.infinite&&e.state.isLast,"is-arrow-disabled":e.state.arrowStyle==="Y"}]),onClick:t[2]||(t[2]=B(function(){return e.swipeLeft&&e.swipeLeft.apply(e,arguments)},["stop"]))},[_(s,{class:"tiny-svg-size"})],2)],64)):U("v-if",!0),e.toolShow?(p(),w("div",du,[h("div",uu,[ee(e.$slots,"tool",{},function(){return[_(d,{class:"tiny-svg-size",onClick:t[3]||(t[3]=B(function(E){return e.handleActions("zoomOut")},["stop"]))}),_(u,{class:"tiny-svg-size",onClick:t[4]||(t[4]=B(function(E){return e.handleActions("zoomIn")},["stop"]))}),_(f,{class:"tiny-svg-size",onClick:t[5]||(t[5]=B(function(E){return e.handleActions("anticlocelise")},["stop"]))}),_(m,{class:"tiny-svg-size",onClick:t[6]||(t[6]=B(function(E){return e.handleActions("clocelise")},["stop"]))}),e.deleteButton?(p(),R(I,{key:0,class:"tiny-svg-size",onClick:t[7]||(t[7]=B(function(E){return e.handleDelete()},["stop"]))})):U("v-if",!0)]})])])):U("v-if",!0),h("div",cu,[h("div",{class:"tiny-mobile-image-viewer__wrap",style:Y({width:e.state.iamgeAllWidth+"px","transition-duration":e.state.imageTransition+"ms",transform:"translateX("+e.state.imageTransformSize+"px)"})},[(p(!0),w(V,null,ne(e.state.urlList,function(E,S){return p(),w("div",{class:"tiny-mobile-image-viewer__item",key:S,style:Y(Object.assign({width:e.state.imageItemWidth+"px"},S===e.state.index?e.state.imgStyle:""))},[h("div",pu,[(p(),w("img",{ref_for:!0,ref:"img_"+S,class:D(["tiny-mobile-image-viewer__img",{"is-full-screen":e.state.fullScreen}]),key:E,src:E,onLoad:t[8]||(t[8]=function(){return e.handleImgLoad&&e.handleImgLoad.apply(e,arguments)}),onError:t[9]||(t[9]=function(){return e.handleImgError&&e.handleImgError.apply(e,arguments)}),onMousedown:t[10]||(t[10]=function(){return e.handleMouseDown&&e.handleMouseDown.apply(e,arguments)}),onTouchstart:t[11]||(t[11]=function(){return e.touchstart&&e.touchstart.apply(e,arguments)}),onTouchmove:t[12]||(t[12]=function(){return e.touchmove&&e.touchmove.apply(e,arguments)}),onTouchend:t[13]||(t[13]=function(){return e.touchend&&e.touchend.apply(e,arguments)})},null,42,fu))])],4)}),128))],4)])],4)),[[vt,e.state.previewVisible],[v,e.swipeLeft],[g,e.swipeRight]])]}),_:3})}var mu=nu(ru,[["render",hu]]);function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_t.apply(this,arguments)}var gu=function(){function e(n,r,i){var o=this;o.element=n,o.tinyBinding=r,o.touchType=i,o.tinyVueTouches={x:0,y:0},o.tinyVueMoves=!0,o.tinyVueLeave=!0,o.tinyLongTouch=!0,o.tinyVueCallBack=Pe(r.value)?r.value.fn:r.value,o.element.addEventListener("touchstart",function(l){o.start(l)}),o.element.addEventListener("touchend",function(l){o.end(l)}),o.element.addEventListener("touchmove",function(l){o.move(l)})}var t=e.prototype;return t.start=function(r){var i=this;r.touches>=2||(this.tinyVueMoves=!0,this.tinyVueLeave=!0,this.tinyLongTouch=!0,this.tinyVueTouches={x:r.changedTouches[0].pageX,y:r.changedTouches[0].pageY},this.time=setTimeout(function(){i.tinyVueLeave&&i.tinyVueMoves&&(i.touchType=="longtap"&&i.tinyVueCallBack(i.tinyBinding.value,r),i.tinyLongTouch=!1)},1e3))},t.end=function(r){if(!(r.touches>=2)){var i=r.changedTouches[0].pageX-this.tinyVueTouches.x,o=r.changedTouches[0].pageY-this.tinyVueTouches.y;clearTimeout(this.time),Math.abs(i)>10||Math.abs(o)>100?(this.touchType=="swipe"&&this.tinyVueCallBack(this.tinyBinding.value,r),Math.abs(i)>Math.abs(o)?(i>10&&this.touchType=="swiperight"&&this.tinyVueCallBack(this.tinyBinding.value,r),i<-10&&this.touchType=="swipeleft"&&this.tinyVueCallBack(this.tinyBinding.value,r)):(o>10&&this.touchType=="swipedown"&&this.tinyVueCallBack(this.tinyBinding.value,r),o<-10&&this.touchType=="swipeup"&&this.tinyVueCallBack(this.tinyBinding.value,r))):this.tinyLongTouch&&this.tinyVueMoves&&(this.touchType=="tap"&&this.tinyVueCallBack(this.tinyBinding.value,r),this.tinyVueLeave=!1)}},t.move=function(){this.tinyVueMoves=!1},e}(),vu=function(){var t={},n=["tap","swipe","swipeleft","swiperight","swipedown","swipeup","longtap"];return n.forEach(function(r){t[r]=kn({vTouch:{bind:function(o,l){new gu(o,l,r)}}}).vTouch}),t},yu=vu();function wu(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=bu(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bu(e,t){if(!!e){if(typeof e=="string")return pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pn(e,t)}}function pn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tu=function(t,n){for(var r=t.__vccOpts||t,i=wu(n),o;!(o=i()).done;){var l=o.value,a=l[0],s=l[1];r[a]=s}return r},_u=Q({emits:["close","update:preview-visible","delete","change","newImageList"],props:[].concat(se,["urlList","zIndex","onSwitch","onClose","showIndex","isThumbnail","isMenuView","modalView","modalHeight","bgColor"]),components:{TinyActionSheet:Pt,TinyDropdown:jr,TinyDropdownMenu:Hr,TinyDropdownItem:Wr,IconClose:Me(),IconChevronLeft:Rt(),IconChevronRight:Ot(),IconZoomOut:Vt(),IconZoomIn:Bt(),IconFullscreen:Un(),IconMinscreen:Ln(),IconRepeat:xt(),IconRefres:Ke(),IconDel:dt(),IconDownload:Xe(),IconArrowLeft:ti(),IconArrowRight:ai(),IconEditorMenuRight:Fi(),IconPicture:Dn()},directives:_t({},yu),setup:function(t,n){return le({props:t,context:n,renderless:Yt,api:Wt})}}),Iu={key:0,"data-tag":"tiny-image-viewer"},Cu=["onClick"],Eu=["src"],Su=["title"],ku=["onClick"],$u=["title"],Fu={class:"flex-auto h-full relative","data-tag":"tiny-image-tools"},Uu=h("div",{"data-tag":"tiny-image-pc-mask",class:"absolute w-full h-full top-0 left-0 bg-color-bg-7"},null,-1),Lu={"data-tag":"tiny-image-pc-actions",class:"z-[1] absolute inline-flex items-center justify-center box-border select-none left-1/2 bottom-12 -translate-x-1/2 w-80 h-10 px-4 bg-color-bg-7 rounded cursor-pointer"},Au={class:"w-full h-full text-justify cursor-default text-2xl flex items-center justify-between fill-color-bg-1"},Du=["href"],Ou={key:1,"data-tag":"tiny-image-pc-index",class:"z-10 absolute flex items-center justify-center box-border left-1/2 -translate-x-1/2 px-4 bottom-5"},Pu={class:"h-4.5 inline-flex items-center text-color-text-primary"},Mu={"data-tag":"tiny-image-pc-canvas",class:"z-10 flex w-full h-full items-center justify-center"},Ru=["src"],zu={class:"bg-color-bg-1 w-screen h-screen overflow-auto"},Nu=["onTouchstart"],xu=["src"],Bu=["title"],Vu={key:1,"data-tag":"tiny-image-mobile-common",class:"w-screen h-screen fixed top-0 left-0 z-50 sm:hidden"},ju=h("div",{"data-tag":"tiny-image-mobile-mask",class:"absolute w-full h-full top-0 left-0 bg-black"},null,-1),Hu={"data-tag":"tiny-image-mobile-index",class:"left-0 right-0 top-0 bottom-0 fixed"},Wu={key:0,class:"absolute flex items-center justify-center box-border left-1/2 -translate-x-1/2 px-4 bottom-12"},Yu={class:"h-4.5 inline-flex items-center text-color-bg-1"},Zu={"data-tag":"tiny-image-mobile-canvas",ref:"canvasBox",class:"w-full h-full"},qu={class:"absolute top-0 left-0 right-0 bottom-0 text-center transition-transform inline-block duration-300"},Xu=["src"],Ku={key:0,"data-tag":"tiny-image-isthumbnail-preview",class:"w-screen h-screen fixed top-0 left-0 z-50 sm:hidden"},Gu=h("div",{"data-tag":"tiny-image-mobile-mask",class:"absolute w-full h-full top-0 left-0 bg-black"},null,-1),Qu={"data-tag":"tiny-image-isthumbnail-index",class:"left-0 right-0 top-0 bottom-0 fixed"},Ju={key:0,class:"absolute flex items-center justify-center box-border left-1/2 -translate-x-1/2 px-4 bottom-12"},ec={class:"h-4.5 inline-flex items-center text-color-bg-1"},tc={"data-tag":"tiny-image-isthumbnail-canvas",ref:"thumbnailCanvasBox",class:"w-full h-full"},nc={class:"absolute top-0 left-0 right-0 bottom-0 text-center transition-transform inline-block duration-300"},rc=["src"];function ic(e,t,n,r,i,o){var l=$("icon-picture"),a=$("icon-close"),s=$("icon-zoom-out"),d=$("icon-zoom-in"),u=$("icon-refres"),f=$("icon-repeat"),m=$("icon-del"),I=$("icon-download"),v=$("icon-editor-menu-right"),g=$("tiny-dropdown-item"),E=$("tiny-dropdown-menu"),S=$("tiny-dropdown"),y=$("icon-arrow-left"),T=$("icon-arrow-right"),c=$("tiny-action-sheet"),F=lt("swipeleft"),b=lt("swiperight");return e.state.showImageViewer?(p(),w("div",Iu,[_(Ve,{name:"viewer-fade"},{default:N(function(){return[h("div",{"data-tag":"tiny-image-body",class:D(["left-0 right-0 top-0 bottom-0 hidden sm:flex z-10",e.modalView?"":"fixed"]),style:Y({"z-index":e.state.zIndex,height:e.modalView&&e.modalHeight+"px"})},[e.state.isThumbnail?(p(),w("div",{key:0,"data-tag":"tiny-isthumbnail",ref:"isThumbnailContent",class:D(["flex-none w-[12%] h-full flex flex-col overflow-y-scroll items-center scrollbar-size-0",e.bgColor!=="white"?"bg-color-icon-primary":""]),style:Y({backgroundColor:e.bgColor==="white"&&e.bgColor})},[(p(!0),w(V,null,ne(e.state.urlList,function(C,k){return p(),w("div",{key:k,class:"w-[88%] [&:not(:last-child)]:mb-2 [&:first-of-type]:mt-2",ref_for:!0,ref:"isThumbnail_"+k},[h("div",{onClick:function(x){return e.activeItems(k)},class:D(["rounded cursor-pointer p-1",{"bg-color-brand":e.state.currentIndex===k}])},[h("img",{class:"max-h-full max-w-full aspect-square bg-current rounded",ref_for:!0,ref:"img_"+k,src:C.url},null,8,Eu),h("div",{title:C.name||C.url,class:D(["px-1 mt-1 sm:text-xs text-sm leading-5 overflow-hidden whitespace-nowrap text-ellipsis",e.bgColor==="white"&&e.state.currentIndex!==k?"text-color-text-primary":"text-color-bg-1"])},A(C.name),11,Su)],10,Cu)])}),128))],6)):U("v-if",!0),e.state.isMenuView?(p(),w("div",{key:1,"data-tag":"tiny-is-menu-view",ref:"isMenuViewContent",class:D(["flex-none w-[12%] h-full flex flex-col overflow-y-scroll items-center scrollbar-size-0",e.bgColor!=="white"?"bg-color-icon-primary":"bg-color-bg-1"])},[(p(!0),w(V,null,ne(e.state.urlList,function(C,k){return p(),w("div",{key:k,class:"w-[88%]"},[h("div",{onClick:function(x){return e.activeItems(k)},ref_for:!0,ref:"isMenuView_"+k,class:D(["[&:first-of-type]:mt-2.5 rounded cursor-pointer flex mx-1 h-9 items-center",{"bg-color-brand":e.state.currentIndex===k}])},[_(l,{class:D(["max-h-full max-w-full w-[9%] h-auto my-2.5 mx-1.5",e.bgColor==="white"&&e.state.menuItemIndex!==k?"fill-color-text-primary":"fill-color-bg-1"]),ref_for:!0,ref:"img_"+k,src:C.url},null,8,["class","src"]),h("div",{title:C.name||C.url,class:D(["w-[67%] sm:text-xs text-sm leading-5 overflow-hidden whitespace-nowrap text-ellipsis",e.bgColor==="white"&&e.state.menuItemIndex!==k?"text-color-text-primary":"text-color-bg-1"])},A(C.name),11,$u)],10,ku)])}),128))],2)):U("v-if",!0),h("div",Fu,[Uu,e.modalView||!e.state.isThumbnail&&!e.state.isMenuView?(p(),w("span",{key:0,"data-tag":"tiny-image-pc-close",class:"z-[1] flex absolute items-center justify-center rounded-full box-border select-none top-20 right-20 bottom-10 text-xl cursor-pointer w-8 h-8 hover:bg-color-text-primary active:bg-color-border fill-color-bg-1 bg-color-border",onClick:t[0]||(t[0]=function(){return e.hide&&e.hide.apply(e,arguments)})},[_(a,{class:"fill-color-bg-1 cursor-pointer"})])):U("v-if",!0),h("div",Lu,[h("div",Au,[(p(),R(Ye(e.state.mode.icon),{class:"cursor-pointer",onClick:e.toggleMode},null,8,["onClick"])),_(s,{class:"cursor-pointer",onClick:t[1]||(t[1]=function(C){return e.handleActions("zoomOut")})}),_(d,{class:"cursor-pointer",onClick:t[2]||(t[2]=function(C){return e.handleActions("zoomIn")})}),_(u,{class:"cursor-pointer",onClick:t[3]||(t[3]=function(C){return e.handleActions("clocelise")})}),_(f,{class:"cursor-pointer",onClick:t[4]||(t[4]=function(C){return e.handleActions("anticlocelise")})}),_(m,{class:"cursor-pointer",onClick:t[5]||(t[5]=function(C){return e.handleActions("delImage")})}),h("a",{href:""+e.state.currentImg,target:"_blank",download:"",class:"cursor-pointer inline-flex fill-color-bg-1"},[_(I)],8,Du),_(S,{"show-self-icon":"",class:"flex",onItemClick:e.itemClick},{dropdown:N(function(){return[_(E,{"checked-status":"",placement:"top"},{default:N(function(C){var k=C.selectedIndex;return[_(g,{"current-index":0,selected:k==="0"&&!e.state.isThumbnail&&!e.state.isMenuView,"item-data":!e.state.isThumbnail&&!e.state.isMenuView?"4":"1"},{default:N(function(){return[ae(A(e.state.isThumbnail||e.state.isMenuView?e.t("ui.imageViewer.hide"):e.t("ui.imageViewer.show")),1)]}),_:2},1032,["selected","item-data"]),_(g,{"current-index":1,selected:k==="1"||e.state.isThumbnail,"item-data":"2"},{default:N(function(){return[ae(A(e.t("ui.imageViewer.thumbnail")),1)]}),_:2},1032,["selected"]),_(g,{"current-index":2,selected:k==="2"||e.state.isMenuView,"item-data":"3"},{default:N(function(){return[ae(A(e.t("ui.imageViewer.menu")),1)]}),_:2},1032,["selected"])]}),_:1})]}),default:N(function(){return[h("span",null,[_(v)])]}),_:1},8,["onItemClick"]),_(y,{onClick:e.prev,class:D(["cursor-pointer",{"is-disabled":!e.state.infinite&&e.state.isFirst}])},null,8,["onClick","class"]),_(T,{onClick:e.next,class:D(["cursor-pointer",{"is-disabled":!e.state.infinite&&e.state.isLast}])},null,8,["onClick","class"])])]),e.showIndex?(p(),w("div",Ou,[h("span",Pu,A(e.state.index+1+"/"+e.state.urlList.length),1)])):U("v-if",!0),h("div",Mu,[(p(!0),w(V,null,ne(e.state.urlList,function(C,k){return p(),w(V,null,[k===e.state.index?(p(),w("img",{ref_for:!0,ref:"img_"+k,key:k,src:e.state.currentImg,style:Y(e.state.imgStyle),onError:t[6]||(t[6]=function(){return e.handleImgError&&e.handleImgError.apply(e,arguments)}),onMousedown:t[7]||(t[7]=function(){return e.handleMouseDown&&e.handleMouseDown.apply(e,arguments)}),onLoad:t[8]||(t[8]=function(){return e.handleImgLoad&&e.handleImgLoad.apply(e,arguments)})},null,44,Ru)):U("v-if",!0)],64)}),256))])])],6)]}),_:1}),_(Ve,{name:"viewer-fade"},{default:N(function(){return[e.state.isThumbnail?(p(),w("div",{key:0,"data-tag":"tiny-image-mobile-thumbnail-list",class:D(["w-screen h-screen fixed top-0 left-0 sm:hidden z-40",{hidden:e.state.hiddenThumbnail}])},[h("div",zu,[(p(!0),w(V,null,ne(e.state.urlList,function(C,k){return p(),w("div",{class:"px-4 pt-4 [&:last-of-type]:mb-5 cursor-pointer",key:k,onTouchstart:function(x){return e.imagePreview(k)}},[h("img",{class:"bg-current w-full h-auto",ref_for:!0,ref:"img_"+k,src:C.url},null,8,xu),h("div",{title:C.name||C.url,class:"color-text-primary mt-2 sm:text-xs text-sm leading-5 overflow-hidden whitespace-nowrap text-ellipsis text-color-text-primary"},A(C.name),9,Bu)],40,Nu)}),128))])],2)):e.state.isMenuView?U("v-if",!0):(p(),w("div",Vu,[ju,Ze((p(),w("div",Hu,[e.showIndex?(p(),w("div",Wu,[h("span",Yu,A(e.state.index+1+"/"+e.state.urlList.length),1)])):U("v-if",!0),h("div",Zu,[h("div",{class:"h-full flex items-center justify-center",style:Y({width:e.state.imageAllWidth+"px","transition-duration":e.state.imageTransition+"ms",transform:"translateX("+e.state.imageTransformSize+"px)"})},[h("template",null,[(p(!0),w(V,null,ne(e.urlList,function(C,k){return p(),w("div",{"data-tag":"tiny-image-mobile-viewer-item",class:"relative shrink h-full",ref_for:!0,ref:"viewerItem",key:k,style:Y(Object.assign({width:e.state.imageItemWidth+"px"},k===e.state.index?e.state.imgStyle:""))},[h("div",qu,[k===e.state.index?(p(),w("img",{key:k,class:D(["block w-full h-full object-contain",{"object-fill":e.state.fullScreen}]),ref_for:!0,ref:"img_"+k,src:e.state.currentImg,style:Y(e.state.imgStyle),onMousedown:t[9]||(t[9]=function(){return e.handleMouseDown&&e.handleMouseDown.apply(e,arguments)}),onError:t[10]||(t[10]=function(){return e.handleImgError&&e.handleImgError.apply(e,arguments)}),onLoad:t[11]||(t[11]=function(){return e.handleImgLoad&&e.handleImgLoad.apply(e,arguments)}),onTouchstart:t[12]||(t[12]=function(){return e.touchstart&&e.touchstart.apply(e,arguments)}),onTouchmove:t[13]||(t[13]=function(){return e.touchmove&&e.touchmove.apply(e,arguments)}),onTouchend:t[14]||(t[14]=function(){return e.touchend&&e.touchend.apply(e,arguments)})},null,46,Xu)):U("v-if",!0)])],4)}),128))])],4)],512)])),[[F,e.swipeLeft],[b,e.swipeRight]])]))]}),_:1}),_(Ve,{name:"viewer-fade"},{default:N(function(){return[e.state.isImagePreview?(p(),w("div",Ku,[Gu,Ze((p(),w("div",Qu,[e.showIndex?(p(),w("div",Ju,[h("span",ec,A(e.state.index+1+"/"+e.state.urlList.length),1)])):U("v-if",!0),h("div",tc,[h("div",{class:"h-full flex items-center justify-center",style:Y({width:e.state.imageAllWidth+"px","transition-duration":e.state.imageTransition+"ms",transform:"translateX("+e.state.imageTransformSize+"px)"})},[h("template",null,[(p(!0),w(V,null,ne(e.state.urlList,function(C,k){return p(),w("div",{"data-tag":"tiny-image-isthumbnail-viewer-item",class:"relative shrink h-full",ref_for:!0,ref:"viewerItem",key:k,style:Y(Object.assign({width:e.state.imageItemWidth+"px"},k===e.state.index?e.state.imgStyle:""))},[h("div",nc,[(p(),w("img",{key:k,class:D(["block w-full h-full object-contain",{"object-fill":e.state.fullScreen}]),ref_for:!0,ref:"img_"+k,src:e.state.currentImg,style:Y(e.state.imgStyle),onMousedown:t[15]||(t[15]=function(){return e.handleMouseDown&&e.handleMouseDown.apply(e,arguments)}),onError:t[16]||(t[16]=function(){return e.handleImgError&&e.handleImgError.apply(e,arguments)}),onLoad:t[17]||(t[17]=function(){return e.handleImgLoad&&e.handleImgLoad.apply(e,arguments)}),onTouchstart:t[18]||(t[18]=function(){return e.touchstart&&e.touchstart.apply(e,arguments)}),onTouchmove:t[19]||(t[19]=function(){return e.touchmove&&e.touchmove.apply(e,arguments)}),onTouchend:t[20]||(t[20]=function(){return e.touchend&&e.touchend.apply(e,arguments)})},null,46,rc))])],4)}),128))])],4)],512)])),[[F,e.swipeLeft],[b,e.swipeRight]])])):U("v-if",!0)]}),_:1}),_(c,{type:"action",menus:[{type:"save",label:e.t("ui.imageViewer.save")},{type:"thumbnail",label:e.t("ui.imageViewer.thumbnail")},{type:"del",label:e.t("ui.imageViewer.del")}],visible:e.state.boxVisibility,"onUpdate:visible":t[21]||(t[21]=function(C){return e.state.boxVisibility=C}),onClick:e.selectOption},{default:N(function(C){return[h("div",{class:D([{"text-color-error":C.data.type==="del"}])},A(C.data.label),3)]}),_:1},8,["menus","visible","onClick"])])):U("v-if",!0)}var oc=Tu(_u,[["render",ic]]);function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(this,arguments)}var lc=function(t){return({}.TINY_MODE||t)==="pc"?un:({}.TINY_MODE||t)==="mobile"?mu:({}.TINY_MODE||t)==="mobile-first"?oc:un},fn={MODE:{CONTAIN:{name:"contain",icon:"icon-fullscreen"},ORIGINAL:{name:"original",icon:"icon-minscreen"}},DEFAULT_POPPER_ZINDEX:Number.POSITIVE_INFINITY,THUMBNAILTOP:8,MENUTOP:10},je=Q({name:de+"ImageViewer",props:It({},Ie,{_constants:{type:Object,default:function(){return fn}},urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:fn.DEFAULT_POPPER_ZINDEX},previewVisible:{type:Boolean,default:!1},closeShow:{type:Boolean,default:!1},arrowShow:{type:Boolean,default:!1},toolShow:{type:Boolean,default:!1},showIndex:{type:Boolean,default:!1},imageFullCurrent:{type:Boolean,default:!1},startPosition:{type:Number,default:0},asyncClose:{type:Boolean,default:!1},deleteButton:{type:Boolean,default:!1},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},isThumbnail:{type:Boolean,default:!1},isMenuView:{type:Boolean,default:!1},modalView:{type:Boolean,default:!1},modalHeight:{type:[String,Number],default:400},bgColor:{type:String,default:"bg-color-icon-primary"}}),setup:function(t,n){return Re({props:t,context:n,template:lc})}}),ac="3.12.0";je.install=function(e){e.component(je.name,je)};je.version=ac;function sc(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=dc(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dc(e,t){if(!!e){if(typeof e=="string")return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}}function hn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uc=function(t,n){for(var r=t.__vccOpts||t,i=sc(n),o;!(o=i()).done;){var l=o.value,a=l[0],s=l[1];r[a]=s}return r},cc=Q({name:de+"UploadList",components:{Progress:qe,TinyTooltip:$n,TinyButton:Ae,TinyImageViewer:je,IconAttachment:zt(),IconSuccessful:Mt(),IconClose:Me(),IconView:No(),IconDel:dt(),IconYes:kr(),IconCloseCircle:Zr(),IconError:Fn(),IconFileCloudupload:Nt(),IconDownload:Xe(),IconRefres:Ke(),IconOperationfaild:$r(),IconFullscreenLeft:Fr()},props:[].concat(se,["disabled","display","files","filesIcon","handlePreview","isEdm","isFolder","listType","openDownloadFile","srcList","isFolderTitle","listOption","maxNameLength","mode","reUploadable","reUploadTip"]),setup:function(t,n){return le({props:t,context:n,renderless:Yn,api:Wn,extendOptions:{Modal:_e}})}}),pc=["onKeydown","onClick"],fc={key:0,class:"tiny-mobile-upload-list__card"},hc=["src"],mc={key:1,class:"tiny-mobile-upload-list__list"},gc={class:"file-type"},vc=["src"],yc=["onClick"],wc={class:"tiny-mobile-upload-list__text-details file-name"},bc={class:"tiny-mobile-upload-list__text-details file-size"},Tc={class:"file-delete"},_c=["onKeydown"],Ic=["src"],Cc={key:0,class:"tiny-upload-list__item-tooltip"},Ec={key:1,class:"tiny-upload-list__item-tooltip"},Sc=["onClick","title"],kc={key:2,class:"tiny-upload-list__item-status-label"},$c=["title","onClick"],Fc=["title","onClick"],Uc=["title","onClick"],Lc={key:6,class:"tiny-icon-close-tip"},Ac={class:"tiny-upload-list__item-tooltip"},Dc={key:0,class:"tiny-upload-list__item-actions"},Oc=["title","onClick"],Pc=["title","onClick"],Mc=["title","onClick"],Rc=["title","onClick"],zc=["title"],Nc={key:2,class:"tiny-upload-list__text-title"};function xc(e,t,n,r,i,o){var l=$("icon-error"),a=$("Progress"),s=$("icon-attachment"),d=$("icon-close-circle"),u=$("tiny-image-viewer"),f=$("icon-operationfaild"),m=$("tiny-tooltip"),I=$("icon-successful"),v=$("icon-yes"),g=$("icon-file-cloudupload"),E=$("icon-refres"),S=$("icon-download"),y=$("icon-fullscreen-left"),T=$("icon-view"),c=$("icon-del"),F=$("tiny-button");return p(),w(V,null,[e.state.screenType?(p(),w("div",{key:0,class:D(["tiny-mobile-upload-list","tiny-mobile-upload-list--"+e.listType,{"is-disabled":e.disabled}])},[_(rn,{tag:"ul",name:"tiny-list"},{default:N(function(){return[(p(!0),w(V,null,ne(e.files,function(b,C){return p(),w("li",{class:D(["tiny-mobile-upload-list__item","is-"+b.status,e.state.focusing?"focusing":""]),key:b.uid,tabindex:"0",onKeydown:yt(function(k){return!e.disabled&&e.$emit("remove",b)},["delete"]),onClick:function(O){return e.picturefilePreview(C)}},[ee(e.$slots,"default",{file:b},function(){return[["picture-card"].indexOf(e.listType)>-1?(p(),w("div",fc,[b.status!=="uploading"&&["picture-card"].indexOf(e.listType)>-1?(p(),w("img",{key:0,class:"tiny-mobile-upload-list__item-thumbnail",src:b.url,alt:""},null,8,hc)):U("v-if",!0),e.listType==="picture-card"&&e.display?(p(),R(l,{key:1,class:"icon-close card-close",onClick:B(function(k){return e.$emit("remove",b)},["stop"])},null,8,["onClick"])):U("v-if",!0),b.status==="uploading"?(p(),R(a,{key:2,type:"circle",percentage:e.parsePercentage(b.percentage),"stroke-width":1.4,width:32},null,8,["percentage"])):U("v-if",!0)])):(p(),w("div",mc,[h("div",gc,[e.filesIcon.length===0?(p(),R(s,{key:0})):U("v-if",!0),(p(!0),w(V,null,ne(e.filesIcon,function(k,O){return p(),w(V,null,[e.filesIcon&&e.state.screenType&&b.fileType===k.type?(p(),w("img",{class:D(["file-type-icon","is-"+k.type]),key:O,src:k.url},null,10,vc)):U("v-if",!0)],64)}),256))]),h("div",{class:"tiny-mobile-upload-list__text file-content",onClick:function(O){return e.handleClick(b)}},[h("p",wc,A(b.name),1),h("p",bc,A(b.size),1),b.status==="uploading"?(p(),R(a,{key:0,"show-text":!1,"stroke-width":2,percentage:e.parsePercentage(b.percentage)},null,8,["percentage"])):U("v-if",!0)],8,yc),h("div",Tc,[e.listType!=="picture-card"&&e.display?(p(),R(d,{key:0,class:"icon-close",onClick:function(O){return e.$emit("remove",b)}},null,8,["onClick"])):U("v-if",!0)])]))]})],42,pc)}),128))]}),_:3}),e.listType==="picture-card"?(p(),R(u,{key:0,"url-list":e.srcList,"close-show":!0,"show-index":!0,"start-position":e.state.startPostion,"tool-show":"","onUpdate:previewVisible":t[0]||(t[0]=function(b){return e.state.shows=b}),"delete-button":"",onNewImageList:e.getDeleteData},null,8,["url-list","start-position","onNewImageList"])):U("v-if",!0)],2)):(p(),R(rn,{key:1,tag:"ul",class:D(["tiny-upload-list","tiny-upload-list--"+e.listType,{"is-disabled":e.disabled}]),name:"tiny-list"},{default:N(function(){return[(p(!0),w(V,null,ne(e.files,function(b){return p(),w("li",{key:b.uid,tabindex:"0",class:"tiny-upload-list__li"},[h("div",{class:D(["tiny-upload-list__item","is-"+b.status,e.state.focusing?"focusing":"",{isEdm:e.isEdm},{showUpdate:e.listOption.showUpdate},{showDel:e.listOption.showDel}]),onKeydown:yt(function(C){return!e.disabled&&e.$emit("remove",b)},["delete"]),onFocus:t[1]||(t[1]=function(C){return e.state.focusing=!0}),onBlur:t[2]||(t[2]=function(C){return e.state.focusing=!1}),onClick:t[3]||(t[3]=function(C){return e.state.focusing=!1})},[ee(e.$slots,"default",{file:b},function(){return[b.status!=="uploading"&&b.status!=="fail"&&["picture-card","picture"].indexOf(e.listType)>-1?(p(),w("img",{key:0,class:"tiny-upload-list__item-thumbnail",src:b.url,alt:""},null,8,Ic)):U("v-if",!0),_(m,{placement:"top",effect:"light",disabled:e.state.tooltipDisabled},{content:N(function(){return[b.status==="fail"?(p(),w("span",Cc,[_(f,{class:"tiny-upload-list__icon-operationfaild"}),ae(A(e.t("ui.fileUpload.networkError")),1)])):(p(),w("span",Ec,A(e.isFolderTitle?(b.path||"")+b.name:b.name),1))]}),default:N(function(){return[h("a",{class:D(["tiny-upload-list__item-name",{isFail:e.isEdm&&b.status==="fail"}]),onClick:function(k){return e.handleClick(k,b)},title:e.state.tooltipDisabled?e.isFolderTitle?(b.path||"")+b.name:b.name:""},[e.isFolder?U("v-if",!0):(p(),R(s,{key:0,fill:e.isEdm&&b.status==="fail"?"#f5222d":"",class:"tiny-svg-size"},null,8,["fill"])),ae(A(b.name.length>e.maxNameLength?b.name.substring(0,e.maxNameLength)+"...":b.name),1)],10,Sc)]}),_:2},1032,["disabled"]),e.isEdm?(p(),w("div",{key:1,class:D(["tiny-upload-list__item-edminfo",{isFail:e.isEdm&&b.status==="fail"}])},[h("span",null,A(b.docId),1),h("span",null,A(b.version),1),h("span",null,A(b.size),1),h("span",null,A(b.serverName),1)],2)):U("v-if",!0),e.state.preViewComponent?U("v-if",!0):(p(),w("label",kc,[e.listType==="text"?(p(),R(I,{key:0,class:"tiny-svg-size icon-successful"})):U("v-if",!0),["picture-card","picture"].indexOf(e.listType)>-1?(p(),R(v,{key:1,class:"tiny-svg-size tiny-icon-check"})):U("v-if",!0)])),e.isEdm&&!e.isFolder&&!e.disabled&&b.status!=="fail"&&e.listOption.showUpdate?(p(),w("span",{key:3,title:e.t("ui.fileUpload.updateFile"),onClick:function(k){return e.$emit("update",b)}},[_(g,{class:"tiny-svg-size icon-refres",fill:e.isEdm&&b.status==="fail"?"#f5222d":""},null,8,["fill"])],8,$c)):U("v-if",!0),!e.disabled&&e.reUploadable&&b.status==="fail"?(p(),w("span",{key:4,title:e.t("ui.fileUpload.reUploadFile"),onClick:function(k){return e.$emit("reUpload",b)}},[_(E,{class:"tiny-svg-size icon-refres",fill:e.isEdm?"#f5222d":""},null,8,["fill"])],8,Fc)):U("v-if",!0),!e.disabled&&e.listOption.showDel?(p(),w("span",{key:5,title:e.t("ui.fileUpload.deleteFile"),onClick:function(k){return e.$emit("remove",b)}},[(p(),R(Ye(e.state.closeComponent),{class:"tiny-svg-size icon-close",fill:e.isEdm&&b.status==="fail"?"#f5222d":""},null,8,["fill"]))],8,Uc)):U("v-if",!0),!e.disabled&&e.listOption.showDel?(p(),w("i",Lc,A(e.t("ui.fileUpload.deleteTip")),1)):U("v-if",!0),b.status==="uploading"||b.status==="downloading"?(p(),R(a,{key:7,type:e.listType==="picture-card"?e.state.progressType:"line","stroke-width":e.listType==="picture-card"?e.state.progressStrokeWidth:2,width:e.state.progressWidth,percentage:e.parsePercentage(b.percentage)},null,8,["type","stroke-width","width","percentage"])):U("v-if",!0),_(m,{placement:"top",effect:"light",disabled:e.state.tooltipDisabled||b.status!=="fail"},{content:N(function(){return[h("span",Ac,[_(f,{class:"tiny-upload-list__icon-operationfaild"}),ae(A(e.t("ui.fileUpload.pictureNetworkError")),1)])]}),default:N(function(){return[e.listType==="picture-card"?(p(),w("span",Dc,[e.openDownloadFile?(p(),w("span",{key:0,class:"tiny-upload-list__item-download",title:e.t("ui.fileUpload.downloadFile"),onClick:function(k){return e.handleClick(b)}},[_(S,{class:"tiny-svg-size"})],8,Oc)):U("v-if",!0),e.handlePreview&&b.status!=="fail"?(p(),w("span",{key:1,class:"tiny-upload-list__item-preview",title:e.t("ui.fileUpload.previewFile"),onClick:function(k){return e.handlePreview(b)}},[e.state.preViewComponent?(p(),R(y,{key:0,class:"tiny-svg-size tiny-svg-fullscreen"})):(p(),R(T,{key:1,class:"tiny-svg-size"}))],8,Pc)):U("v-if",!0),e.isEdm&&!e.isFolder&&!e.disabled?(p(),w("span",{key:2,title:e.t("ui.fileUpload.updateFile"),class:"tiny-upload-list__item-refres",onClick:function(k){return e.$emit("update",b)}},[_(g,{class:"tiny-svg-size"})],8,Mc)):U("v-if",!0),e.disabled?U("v-if",!0):(p(),w("span",{key:3,class:"tiny-upload-list__item-delete",title:e.t("ui.fileUpload.deleteFile"),onClick:function(k){return e.$emit("remove",b)}},[_(c,{class:"tiny-svg-size"})],8,Rc))])):U("v-if",!0)]}),_:2},1032,["disabled"])]})],42,_c),e.state.preViewComponent&&e.listType==="picture-card"?(p(),w("div",{key:0,class:D(["tiny-upload-list__li-title",b.status==="fail"&&"is-fail"]),title:e.isFolderTitle?(b.path||"")+b.name:b.name},A(b.name.length>e.maxNameLength?b.name.substring(0,e.maxNameLength)+"...":b.name),11,zc)):U("v-if",!0)])}),128))]}),_:3},8,["class"])),e.reUploadable&&e.state.failUploadFileCount&&e.listType==="text"?(p(),w("div",Nc,[_(f,{class:"tiny-upload-list__icon-operationfaild"}),ae(A(typeof e.reUploadTip=="function"?e.reUploadTip(e.state.failUploadFileCount):e.t("ui.fileUpload.reUploadTip",{number:e.state.failUploadFileCount}))+" ",1),_(F,{type:"text",onClick:t[4]||(t[4]=function(b){return e.$emit("ReUploadTotal",e.files)})},{default:N(function(){return[ae(A(e.t("ui.fileUpload.reUploadFile")),1)]}),_:1})])):U("v-if",!0)],64)}var mn=uc(cc,[["render",xc]]);class Bc{constructor(t){this.recorder=null,this.mediaStream=null,this.recorderFile=null,this.audioContext=null,this.timeId=null,this.config=t}start(){return this.getUserMedia().then(({stream:t})=>(t&&(this.initMideaRecoder(t),this.initAudioContext(t)),!!t))}getUserMedia(){return new Promise(t=>{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||window.getUserMedia;const n={audio:!0};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(n).then(r=>t({stream:r})).catch(t):navigator.getUserMedia?navigator.getUserMedia(n,r=>t({stream:r}),t):t(new Error("Not support userMedia"))})}initMideaRecoder(t){this.recorder=new MediaRecorder(t),this.mediaStream=t;let n=[];this.recorder.onpause=()=>{},this.recorder.onresume=()=>{},this.recorder.ondataavailable=r=>{n.push(r.data)},this.recorder.onstop=()=>{this.recorderFile=new Blob(n,{type:this.recorder.mimeType}),n=[];const{onstop:r}=this.config;r&&r(this.recorderFile)},this.recorder.onerror=()=>{},this.recorder.start()}stop(){this.recorder.state!=="inactive"&&(this.recorder.stop(),this.closeStream(this.mediaStream),this.audioContext.close()),clearInterval(this.timeId),this.timeId=null}closeStream(t){typeof t.stop=="function"?t.stop():[t.getAudioTracks(),t.getVideoTracks()].forEach(r=>r&&r.forEach(i=>typeof i.stop=="function"&&i.stop()))}pause(){this.recorder.pause(),this.audioContext.suspend(),clearInterval(this.timeId),this.timeId=null}resume(){this.recorder.resume(),this.audioContext.resume(),clearInterval(this.timeId),this.timeId=setInterval(()=>this.getRealTimeAudio(),100)}initAudioContext(t){this.audioContext=new(window.AudioContext||window.webkitAudioContext);const n=this.audioContext.createMediaStreamSource(t);this.analyser=this.audioContext.createAnalyser(),n.connect(this.analyser),clearInterval(this.timeId),this.timeId=setInterval(()=>this.getRealTimeAudio(),100)}getRealTimeAudio(){const{onMediaProgress:t}=this.config;t&&t(this.analyser,this.audioContext)}}const Vc=({state:e})=>(t=!1)=>{e.record.now=Date.now(),e.record.fn||(e.record.fn=()=>{const n=Date.now();e.record.currentTime+=(n-e.record.now)/1e3,e.record.now=n}),t?(clearInterval(e.record.timer),e.record.timer=null,e.record.fn()):e.record.timer=setInterval(e.record.fn,1e3)},jc=({state:e,api:t,emit:n,constants:r,props:i})=>o=>{const{READY:l,RECORDING:a,PAUSE:s}=r.STATUS;i.isHwh5?e.record.status===l?t.triggerClick(o,r.HWH5_STATUS.START,()=>e.record.status=a):e.record.status===s?t.triggerClick(o,r.HWH5_STATUS.CONTINUE,()=>e.record.status=a):t.triggerClick(o,r.HWH5_STATUS.PAUSE,()=>e.record.status=s):e.record.status===l?(!e.recorder&&(e.recorder=new Bc({onMediaProgress:(d,u)=>{e.record.currentTime=u.currentTime,e.voiceNum=Xc(d)},onstop:d=>n("confirm",d)})),e.recorder.start().then(d=>{if(!d)return n("error");e.record.status=a})):e.record.status===s?(e.record.status=a,e.recorder.resume()):(e.record.status=s,e.recorder.pause())},Hc=({state:e,emit:t,props:n,constants:r,api:i})=>o=>{n.isHwh5?i.triggerClick(o,r.HWH5_STATUS.CANCEL,()=>t("update:modelValue",!1)):(e.isClickConfirm=!0,t("update:modelValue",!1))},Wc=({emit:e,props:t,constants:n,api:r,state:i})=>o=>{t.isHwh5?r.triggerClick(o,n.HWH5_STATUS.CANCEL,()=>e("update:modelValue",!1)):(i.isClickConfirm=!0,e("update:modelValue",!1))},Yc=({state:e})=>(t,n,r)=>{const i=e.listeners["trigger-click"]&&e.listeners["trigger-click"](t,n);i&&i.then?i.then(()=>r&&r()):r&&r()},Zc=({api:e})=>t=>!t&&e.resetRecord(),qc=({api:e,props:t,constants:n,state:r})=>i=>{i===n.STATUS.RECORDING?(t.isHwh5&&e.calcRecordTime(),e.renderAudioGraph()):i===n.STATUS.PAUSE&&t.isHwh5&&e.calcRecordTime(!0),cancelAnimationFrame(r.handlerId)},Xc=e=>{const t=new Uint8Array(e.fftSize);e.getByteTimeDomainData(t);let n=0,r=0;for(let a=0;a<e.fftSize;a++)n+=t[a]>128?t[a]-128:0,r+=t[a]<128?128-t[a]:0;let i=1;return![0,500,1e3,5e3,1e4].some((a,s)=>{if(n<=a)return i=s+1+(a===0?r/1e3:n/a)})&&(i=6),i},Kc=({canvasCtx:e,width:t})=>{const n=({canvasCtx:o,width:l,colors:a=[]})=>{const s=o.createLinearGradient(0,0,l,0);return a.forEach(({n:d,color:u})=>s.addColorStop(d,u)),s},r=[{q:0,a:8,w:.02857142857142857,speed:-.05},{q:4,a:7,w:.02857142857142857,speed:-.1},{q:10,a:6,w:.02857142857142857,speed:-.3}],i=[[{n:0,color:"rgba(0, 109, 213, 0)"},{n:.5,color:"rgba(0, 109, 213, 0.8)"},{n:1,color:"rgba(0, 109, 213, 0)"}],[{n:0,color:"rgba(0, 14, 215, 0)"},{n:.5,color:"rgba(0, 14, 215, 0.4)"},{n:1,color:"rgba(0, 14, 215, 0)"}],[{n:0,color:"rgba(0, 109, 213, 0)"},{n:.5,color:"rgba(0, 109, 213, 0.3)"},{n:1,color:"rgba(0, 109, 213, 0)"}]];return r.forEach((o,l)=>{o.strokeStyle=n({canvasCtx:e,width:t,colors:i[l]})}),r},Gc=({vm:e,nextTick:t,state:n,props:r})=>()=>{t(()=>{let i=e.$refs.canvas;if(i){const o=i.offsetHeight,l=i.offsetWidth;i.height=o,i.width=l;const a=i.getContext("2d"),s=Kc({canvasCtx:a,width:l}),d=()=>{n.handlerId=requestAnimationFrame(d);let u=1;!r.isHwh5&&n.voiceNum&&(u=n.voiceNum.toFixed(1)),a.clearRect(0,0,l,o),a.fillStyle="#fff",a.fillRect(0,0,l,o),s.forEach(f=>{const{a:m,w:I,speed:v,strokeStyle:g}=f;a.lineWidth=1,a.strokeStyle=g;let E=0;a.beginPath(),a.moveTo(E,o/2),f.q+=v;for(let S=0;S<=l;S++){const y=m*u*Math.sin(I*S+f.q)+o/2;a.lineTo(S,y)}a.stroke()})};d()}})},Qc=({state:e,constants:t})=>()=>{e.record.status=t.STATUS.READY,e.record.currentTime=0,e.isClickConfirm&&e.recorder&&e.recorder.recorder&&e.recorder.stop(),e.isClickConfirm=!1,clearInterval(e.record.timer),e.record.timer=null},Jc=({api:e})=>()=>e.resetRecord(),ep=["state","toogleRecord","handleConfirm","handleCancel"],tp=({vm:e,api:t,reactive:n,computed:r})=>{const i=n({listeners:e.$listeners,record:{status:"ready",currentTime:0},recodeTime:r(()=>{const o=parseInt(i.record.currentTime),l=Math.floor(o/60),a=Math.floor(o%60);return`${l.toString().padStart(2,0)}:${a.toString().padStart(2,0)}`})});return Object.assign(t,{state:i}),i},np=({api:e,state:t,emit:n,vm:r,constants:i,props:o,nextTick:l})=>{Object.assign(e,{toogleRecord:jc({state:t,api:e,emit:n,constants:i,props:o}),handleConfirm:Hc({state:t,emit:n,props:o,constants:i,api:e}),watchModelValue:Zc({api:e}),renderAudioGraph:Gc({vm:r,nextTick:l,state:t,props:o}),unmounted:Jc({api:e}),resetRecord:Qc({state:t,constants:i}),handleCancel:Wc({emit:n,props:o,constants:i,api:e,state:t}),triggerClick:Yc({state:t}),watchRecordStatus:qc({api:e,props:o,constants:i,state:t}),calcRecordTime:Vc({state:t})})},rp=({watch:e,props:t,api:n,state:r})=>{e(()=>t.modelValue,n.watchModelValue,{immediate:!0}),e(()=>r.record.status,n.watchRecordStatus)},ip=(e,{reactive:t,watch:n,computed:r,onUnmounted:i,nextTick:o},{emit:l,vm:a,constants:s})=>{const d={},u=tp({vm:a,api:d,reactive:t,computed:r});return np({api:d,state:u,emit:l,vm:a,constants:s,props:e,nextTick:o}),rp({watch:n,props:e,api:d,state:u}),i(d.unmounted),d};function op(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=lp(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lp(e,t){if(!!e){if(typeof e=="string")return gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gn(e,t)}}function gn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ap=function(t,n){for(var r=t.__vccOpts||t,i=op(n),o;!(o=i()).done;){var l=o.value,a=l[0],s=l[1];r[a]=s}return r},sp=Q({props:[].concat(se,["modelValue","isHwh5","lockScroll"]),components:{TinyActionSheet:Pt,IconMic:On()},inheritAttrs:!1,setup:function(t,n){return le({props:t,context:n,renderless:ip,api:ep})}}),dp={class:"flex justify-center flex-wrap text-base text-color-text-secondary"},up={key:0,ref:"canvas",class:"w-full h-full"},cp={key:1,class:"absolute left-0 bottom-0 w-full"},pp={key:1,class:"w-6 h-6 bg-color-error rounded"};function fp(e,t,n,r,i,o){var l=$("icon-mic"),a=$("tiny-action-sheet");return p(),w("div",null,[_(a,{title:e.t("ui.record.record"),visible:e.modelValue,"lock-scroll":e.lockScroll,"custom-class":"pb-0","mask-closable":!1,"onUpdate:visible":t[3]||(t[3]=function(s){return e.$emit("update:modelValue",s)})},{"header-left":N(function(){return[h("div",{class:"text-base text-color-text-secondary",onClick:t[0]||(t[0]=function(){return e.handleCancel&&e.handleCancel.apply(e,arguments)})},A(e.t("ui.record.cancel")),1)]}),"header-right":N(function(){return[h("div",{class:D(["text-color-brand",["recording","pause"].includes(e.state.record.status)?"":"hidden"]),onClick:t[1]||(t[1]=function(){return e.handleConfirm&&e.handleConfirm.apply(e,arguments)})},A(e.t("ui.record.confirm")),3)]}),default:N(function(){return[h("div",dp,[h("div",{class:D(["font-light",["recording","pause"].includes(e.state.record.status)?"visible":"invisible"])},A(e.state.recodeTime),3),h("div",{class:D(["relative w-full text-center px-4",["recording"].includes(e.state.record.status)?"h-24":"h-10 my-7"])},[["recording"].includes(e.state.record.status)?(p(),w("canvas",up,null,512)):(p(),w("span",cp,A(["ready"].includes(e.state.record.status)?e.t("ui.record.clickToStartRecording"):e.t("ui.record.clickToResumeRecording")),1))],2),h("div",{class:D(["flex w-16 h-16 justify-center items-center mt-0 m-10 border rounded-full cursor-pointer",[["recording"].includes(e.state.record.status)?"border-color-border-separator shadow-sm":"border-color-brand"]])},[h("div",{onClick:t[2]||(t[2]=function(){return e.toogleRecord&&e.toogleRecord.apply(e,arguments)})},[["recording"].includes(e.state.record.status)?(p(),w("div",pp)):(p(),R(l,{key:0,"custom-class":"w-10 h-10 fill-color-brand"}))])],2)])]}),_:1},8,["title","visible","lock-scroll"])])}var hp=ap(sp,[["render",fp]]);function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}var mp=function(t){return hp},gp={STATUS:{READY:"ready",RECORDING:"recording",PAUSE:"pause"},HWH5_STATUS:{START:"start",PAUSE:"pause",CONTINUE:"continue",CANCEL:"cancel",END:"end"}},De={name:de+"Record",props:Ct({},Ie,{_constants:{type:Object,default:function(){return gp}},modelValue:Boolean,isHwh5:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0}}),setup:function(t,n){return Re({props:t,context:n,template:mp})}},vp="3.12.0";De.model={prop:"modelValue",event:"update:modelValue"};De.install=function(e){e.component(De.name,De)};De.version=vp;function yp(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=wp(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wp(e,t){if(!!e){if(typeof e=="string")return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}}function vn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bp=function(t,n){for(var r=t.__vccOpts||t,i=yp(n),o;!(o=i()).done;){var l=o.value,a=l[0],s=l[1];r[a]=s}return r},Tp=Q({name:de+"UploadList",components:{TinyProgress:qe,IconError:Fn(),IconCueL:Ur(),IconEyeopen:Lr(),IconDownload:Xe(),IconDel:dt(),IconRefres:Ke(),IconRight:qr(),IconPause:Yi(),IconAudio:rl(),IconEllipsis:Yr(),TinyActionSheet:Pt,IconExcelType:hl(),IconFileType:bl(),IconOtherType:Ar(),IconPdfType:Sl(),IconPictureType:Al(),IconPptType:zl(),IconTextType:Hl(),IconVideoType:Kl(),IconWordType:na(),IconZipType:sa(),IconCloudUpload:yi(),TinyRecord:De},props:[].concat(se,["disabled","display","files","filesIcon","handlePreview","isEdm","isFolder","listType","openDownloadFile","srcList","isFolderTitle","listOption","maxNameLength","scale","showName","types","edm","displayOnly","handleDownloadFile","handleReUpload","isDragover","selected","triggerClick","isHwh5","triggerPlay","mode","lockScroll"]),setup:function(t,n){return le({props:t,context:n,renderless:Yn,api:Wn,extendOptions:{Modal:_e}})}}),_p={key:0,class:"text-[0]"},Ip=["onClick"],Cp={class:"relative inline-block w-8 h-8 mr-2 align-top"},Ep={key:0,class:"w-1/2 h-full absolute top-0 left-0 rounded-l overflow-hidden"},Sp={key:1,class:"w-1/2 h-full absolute top-0 left-1/2 rounded-r overflow-hidden"},kp={key:3,class:"relative w-full h-full bg-color-error-subtler rounded-sm"},$p={class:"relative inline-block w-[calc(100%-theme(spacing.10))] text-xs pr-10 sm:pr-0"},Fp={class:"flex h-4"},Up={class:"flex-1 sm:mr-6 text-sm sm:text-xs leading-3 sm:leading-3 text-color-text-primary overflow-hidden text-ellipsis whitespace-nowrap"},Lp=["title"],Ap={class:"hidden sm:block sm:invisible sm:group-hover:visible min-w-fit text-color-brand-hover text-xs"},Dp=["onClick"],Op=["onClick"],Pp=["onClick"],Mp=["onClick"],Rp={class:"flex h-4 leading-5"},zp={class:"overflow-hidden text-ellipsis whitespace-nowrap font-light sm:font-normal"},Np={key:0,class:"hidden sm:inline text-color-error-hover"},xp={key:1,class:"inline sm:hidden text-color-error-hover"},Bp={key:2,class:"text-color-text-placeholder"},Vp={class:"flex-1 ml-2 overflow-hidden text-ellipsis whitespace-nowrap text-right text-color-none"},jp={class:"sm:invisible absolute top-1/2 right-2 -translate-y-1/2 cursor-pointer"},Hp=["onClick"],Wp={key:1,class:"my-4 text-color-none text-xs"},Yp={key:1,class:"border-dashed border-color-border text-center"},Zp={key:0},qp={key:1,class:"h-full"},Xp={key:0},Kp={class:"mt-4.5"},Gp={class:"mt-1 pl-1 align-middle text-color-error text-xs"},Qp={key:1},Jp={class:"relative inline-block w-12 h-12 mt-6 align-top"},ef={key:0,class:"w-1/2 h-full absolute top-0 left-0 rounded-l overflow-hidden"},tf={key:1,class:"w-1/2 h-full absolute top-0 left-1/2 rounded-r overflow-hidden"},nf={class:"mt-3 mb-2"},rf=["onClick"],of=["onKeydown"],lf={class:"absolute top-0 left-0 w-full h-full"},af=["src"],sf=["src"],df=["src"],uf={key:1,class:"flex w-full h-full justify-center items-center border rounded border-transparent bg-color-info-secondary-subtle"},cf=["onLoadedmetadata","onTimeupdate"],pf=["src"],ff=["src"],hf=["src"],mf=["src"],gf=["title"],vf={class:"absolute w-full top-1/2 left-0 -translate-y-1/2 z-[1] text-center hover:cursor-pointer"},yf={key:0},wf={class:"mt-3 text-color-text-inverse text-xs"},bf={key:1},Tf={class:"block sm:group-hover:hidden"},_f={class:"mt-1 text-color-text-inverse text-xs"},If={class:"hidden sm:group-hover:block"},Cf={key:2},Ef={key:1},Sf=["onClick"],kf={class:"absolute top-0 left-0 w-full h-full"},$f={class:"text-center"},Ff=h("div",{class:"h-2 bg-color-bg-2"},null,-1),Uf={class:"text-center"},Lf=h("div",{class:"h-2 bg-color-bg-2"},null,-1);function Af(e,t,n,r,i,o){var l=$("icon-cue-l"),a=$("icon-ellipsis"),s=$("icon-error"),d=$("icon-cloud-upload"),u=$("tiny-progress"),f=$("icon-refres"),m=$("icon-del"),I=$("icon-eyeopen"),v=$("icon-download"),g=$("icon-right"),E=$("icon-pause"),S=$("icon-audio"),y=$("tiny-action-sheet"),T=$("tiny-record");return p(),w("div",null,[e.listType==="text"?(p(),w("div",{key:0,ref:"upload-list",class:D(["border-dashed border-color-border",[e.state.files.length||e.mode==="bubble"?"sm:border-0":"sm:border-t",{"sm:h-52 overflow-y-auto overflow-x-hidden":e.mode==="bubble"}]])},[e.state.files.length?(p(),w("div",_p,[(p(!0),w(V,null,ne(e.state.files,function(c,F){return p(),w("div",{ref_for:!0,ref:"upload-list-li",class:D(["group relative sm:inline-block min-w-full sm:min-w-[theme(spacing.112)] p-3 mr-2 border-0.5 sm:border border-color-border-separator rounded hover:bg-color-bg-2",{"sm:border-color-brand border-color-border-separator":c.uid===(e.selected&&e.selected.uid),"mb-2":F!==e.state.files.length-1}]),key:c.uid,tabindex:"0",onClick:function(C){return e.$emit("click-file-list",c)}},[ee(e.$slots,"default",{file:c},function(){return[h("div",Cp,[~["uploading"].indexOf(c.status)?(p(),w("div",Ep,[h("div",{class:"absolute w-16 h-16 top-1/2 right-0 origin-right bg-color-bg-7",style:Y({transform:"translateY(-50%) rotate("+e.parsePercentage(Math.max(0,Math.min(c.percentage||0,100)-50)/50*180)+"deg)"})},null,4)])):U("v-if",!0),~["uploading"].indexOf(c.status)?(p(),w("div",Sp,[h("div",{class:"absolute w-16 h-16 top-1/2 left-0 origin-left bg-color-bg-7",style:Y({transform:"translateY(-50%) rotate("+e.parsePercentage(Math.min(50,c.percentage||0)/50*180)+"deg)"})},null,4)])):U("v-if",!0),~["uploading","success","downloading"].indexOf(c.status)?(p(),R(Ye(e.getFileIcon({type:e.getFileType({file:c})}).name),{key:2,"custom-class":"w-full h-full rounded-sm",style:Y({fill:e.getFileIcon({type:e.getFileType({file:c})}).color})},null,8,["style"])):U("v-if",!0),~["fail"].indexOf(c.status)?(p(),w("div",kp,[_(l,{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 fill-color-error"})])):U("v-if",!0)]),h("div",$p,[h("div",Fp,[h("div",Up,[h("span",{title:c.name},A(c.name.split(".").filter(function(b,C,k){return k.length-1>C||k.length===1}).join(".")),9,Lp),h("span",null,"."+A(c.name.split(".")[c.name.split(".").length-1]),1)]),h("div",Ap,[ee(e.$slots,"operate",{file:c},function(){return[e.handlePreview&&~["success","downloading"].indexOf(c.status)?(p(),w("span",{key:0,class:"mr-2 cursor-pointer",onClick:function(C){return e.handlePreview(c)}},A(e.t("ui.uploadList.preview")),9,Dp)):U("v-if",!0),e.handleDownloadFile&&!~["fail","uploading"].indexOf(c.status)?(p(),w("span",{key:1,class:"mr-2 cursor-pointer",onClick:function(C){return e.handleDownloadFile(c)}},A(e.t("ui.uploadList.download")),9,Op)):U("v-if",!0),(e.isEdm?!0:e.handleReUpload)&&~["fail"].indexOf(c.status)?(p(),w("span",{key:2,class:"mr-2 cursor-pointer",onClick:function(C){return e.reUpload(c)}},A(e.t("ui.uploadList.reUpload")),9,Pp)):U("v-if",!0),e.displayOnly?U("v-if",!0):(p(),w("span",{key:3,class:"cursor-pointer",onClick:B(function(b){return e.remove({file:c})},["stop"])},A(e.t("ui.uploadList.delete")),9,Mp))]})])]),h("div",Rp,[h("span",zp,[~["fail"].indexOf(c.status)?(p(),w("span",Np,A(e.t("ui.uploadList.uploadFailed")),1)):U("v-if",!0),~["fail"].indexOf(c.status)?(p(),w("span",xp,A(e.t("ui.uploadList.uploadFailedAndReupload")),1)):~["uploading"].indexOf(c.status)?(p(),w("span",Bp,A((~["uploading"].indexOf(c.status)?Math.round(c.size*c.percentage/100/1024/1024*10)/10+"M/":"")+Math.round(c.size/1024/1024*10)/10+"M"),1)):U("v-if",!0)]),h("span",Vp,[ee(e.$slots,"assist-content",{file:c})])]),h("div",jp,[~["success","downloading"].indexOf(c.status)?(p(),R(a,{key:0,onClick:function(C){return e.showOperatePanel(c)},class:"fill-color-text-primary"},null,8,["onClick"])):U("v-if",!0),!e.displayOnly&&~["uploading","fail"].indexOf(c.status)?(p(),R(s,{key:1,class:"fill-color-none-hover",onClick:B(function(b){return e.remove({file:c})},["stop"])},null,8,["onClick"])):U("v-if",!0)]),h("div",{class:"absolute left-0 top-0 w-[calc(100%-theme(spacing.10))] h-full mr-10 sm:hidden sm:mr-0",onClick:function(C){return e.reUpload(c)}},null,8,Hp)])]})],10,Ip)}),128))])):(p(),w("div",Wp,A(e.t("ui.uploadList.noAttachments")),1))],2)):e.listType==="drag-single"?(p(),w("div",Yp,[ee(e.$slots,"upload"),h("div",{class:D(["absolute w-full h-full top-0 left-0",[e.files.length?"z-0":"z-[-1]"]])},[e.files.length?(p(),w("div",qp,[(p(!0),w(V,null,ne(e.files,function(c){return p(),w("div",{key:c.uid,tabindex:"0"},[ee(e.$slots,"default",{file:c},function(){return[["fail"].includes(c.status)?(p(),w("div",Xp,[_(d,{"custom-class":"w-12 h-12 mt-6",class:D([e.isDragover?"fill-color-brand":"fill-color-none-hover"])},null,8,["class"]),h("div",Kp,[_(l,{class:"fill-color-error"}),h("span",Gp,A(e.t("ui.uploadList.uploadFailed")),1)])])):(p(),w("div",Qp,[h("div",Jp,[~["uploading"].indexOf(c.status)?(p(),w("div",ef,[h("div",{class:"absolute w-16 h-16 top-1/2 right-0 origin-right bg-color-bg-7",style:Y({transform:"translateY(-50%) rotate("+e.parsePercentage(Math.max(0,Math.min(c.percentage||0,100)-50)/50*180)+"deg)"})},null,4)])):U("v-if",!0),~["uploading"].indexOf(c.status)?(p(),w("div",tf,[h("div",{class:"absolute w-16 h-16 top-1/2 left-0 origin-left bg-color-bg-7",style:Y({transform:"translateY(-50%) rotate("+e.parsePercentage(Math.min(50,c.percentage||0)/50*180)+"deg)"})},null,4)])):U("v-if",!0),~["uploading","success","downloading"].indexOf(c.status)?(p(),R(Ye(e.getFileIcon({type:e.getFileType({file:c})}).name),{key:2,"custom-class":"w-full h-full rounded-sm",style:Y({fill:e.getFileIcon({type:e.getFileType({file:c})}).color})},null,8,["style"])):U("v-if",!0)]),h("div",nf,A(c.name),1),h("div",null,[h("span",{class:"text-color-brand cursor-pointer",onClick:B(function(F){return e.remove({file:c})},["stop"])},A(e.t("ui.uploadList.delete")),9,rf)])]))]})])}),128))])):(p(),w("div",Zp,[_(d,{"custom-class":"w-12 h-12 mt-6",class:D([e.isDragover?"fill-color-brand":"fill-color-none-hover"])},null,8,["class"]),h("div",{class:D(["mb-0.5 text-sm text-color-text-secondary",e.isDragover?"mt-4":"mt-3"])},A(e.isDragover?e.t("ui.uploadList.releaseAndUpload"):e.t("ui.uploadList.dragOrClickImport")),3),e.isDragover?U("v-if",!0):ee(e.$slots,"tip",{key:0})]))],2)])):(p(),w("div",{key:2,class:D([{"grid grid-cols-3 gap-x-4 sm:grid-cols-[repeat(auto-fit,theme(spacing.24))]":e.listType==="picture-card"},e.showName?"gap-y-8":"gap-y-4"])},[(p(!0),w(V,null,ne(e.files,function(c,F){return p(),w("div",{class:D(["group relative",{hidden:e.listType==="picture-single"&&F},e.listType==="picture-single"?"w-24 h-24 sm:w-[calc("+e.scale+"*theme(spacing.20))] sm:h-20":"w-full pt-[100%]"]),key:c.uid,tabindex:"0",onKeydown:yt(function(b){return!e.disabled&&e.remove({file:c})},["delete"])},[h("div",lf,[ee(e.$slots,"default",{file:c},function(){return[!e.displayOnly&&(c.status!=="uploading"||~["video","audio"].indexOf(c.type))?(p(),R(s,{key:0,class:D(["absolute w-5 h-5 -top-1.5 fill-color-none-hover hover:cursor-pointer z-[1]",[{"sm:hidden -top-1.5":!~["video","audio"].indexOf(c.type)},(e.listType==="picture-single","-right-1.5")]]),onClick:B(function(b){return e.remove({file:c})},["stop"])},null,8,["class","onClick"])):U("v-if",!0),h("div",{class:D(["relative w-full h-full after:absolute after:w-full after:h-full after:left-0 after:top-0 after:rounded after:bg-color-bg-7",[~["uploading","fail"].indexOf(c.status)?"":"after:hidden sm:after:group-hover:block",{"mb-7":e.listType==="picture-card"&&e.showName},~["video","audio"].indexOf(c.type)?"after:opacity-0":"after:opacity-50"]])},[c.type==="video"?(p(),w("video",{key:0,ref_for:!0,ref:"video"+(c.uid||F),class:"w-full h-full border rounded object-cover"},[h("source",{src:c.url,type:"video/mp4"},null,8,af),h("source",{src:c.url,type:"video/ogg"},null,8,sf),h("source",{src:c.url,type:"video/webm"},null,8,df)],512)):c.type==="audio"?(p(),w("div",uf,[h("audio",{ref_for:!0,ref:"audio"+(c.uid||F),onLoadedmetadata:function(C){e.handleLoadedmetadata({e:C,file:c})},onTimeupdate:function(C){e.handleTimeupdate({e:C,file:c})}},[h("source",{src:c.url,type:"video/mp3"},null,8,pf),h("source",{src:c.url,type:"video/ogg"},null,8,ff),h("source",{src:c.url,type:"video/wav"},null,8,hf)],40,cf)])):(p(),w("img",{key:2,class:"w-full h-full border rounded",src:c.url,alt:""},null,8,mf)),h("div",{title:c.name,class:D(["mt-2 overflow-hidden overflow-ellipsis whitespace-nowrap text-color-text-primary text-xs",{hidden:!e.showName}])},A(c.name),11,gf),h("div",vf,[~["uploading"].indexOf(c.status)?(p(),w("div",yf,[_(u,{class:"inline-block w-[calc(100%-theme(spacing.10))]",percentage:e.parsePercentage(c.percentage),"show-text":!1,"stroke-width":4,color:"#fff"},null,8,["percentage"]),h("div",wf,A(~["video","audio"].indexOf(c.type)?e.t("ui.uploadList.uploading"):e.t("ui.uploadList.pictureUploading")),1)])):~["fail"].indexOf(c.status)?(p(),w("div",bf,[h("span",Tf,[_(l,{class:"w-6 h-6 fill-color-icon-inverse"}),h("div",_f,A(e.t("ui.uploadList.uploadFailed")),1)]),h("span",If,[e.isEdm||e.handleReUpload?(p(),R(f,{key:0,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function(C){return e.reUpload(c)}},null,8,["onClick"])):U("v-if",!0),!e.displayOnly&&e.listType!=="picture-single"?(p(),R(m,{key:1,class:"w-6 h-6 fill-color-icon-inverse",onClick:B(function(b){return e.remove({file:c})},["stop"])},null,8,["onClick"])):U("v-if",!0)])])):(p(),w("div",Cf,[h("div",{class:D(["hidden",{"sm:group-hover:block":!~["video","audio"].indexOf(c.type)}])},[ee(e.$slots,"operate",{file:c},function(){return[e.handlePreview?(p(),R(I,{key:0,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function(C){return e.handlePreview(c)}},null,8,["onClick"])):U("v-if",!0),e.handleDownloadFile?(p(),R(v,{key:1,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function(C){return e.handleDownloadFile(c)}},null,8,["onClick"])):U("v-if",!0),e.displayOnly?U("v-if",!0):(p(),R(m,{key:2,class:"w-6 h-6 fill-color-icon-inverse",onClick:B(function(b){return e.remove({file:c})},["stop"])},null,8,["onClick"]))]})],2),c.type==="video"?(p(),w("div",{key:0,class:D(["inline-block w-8 h-8 text-center rounded-full group-hover:bg-color-bg-7",c.isPlay?"bg-opacity-0":"bg-color-bg-7"])},[Ze(_(g,{class:"w-4 h-4 mt-2 fill-color-icon-inverse",onClick:function(C){return e.play({file:c,index:F,type:"video"})}},null,8,["onClick"]),[[vt,!c.isPlay]]),Ze(_(E,{class:"w-6 h-6 hidden group-hover:inline-block mt-1 fill-color-icon-inverse",onClick:function(C){return e.pause({file:c,index:F,type:"video"})}},null,8,["onClick"]),[[vt,c.isPlay]])],2)):U("v-if",!0),c.type==="audio"?(p(),w("div",Ef,[_(S,{class:"w-6 h-6 fill-color-brand",onClick:function(C){return e.play({file:c,index:F,type:"audio"})}},null,8,["onClick"]),h("div",null,A((c.currentSecond||0)+" / "+(c.totalSecond||0)),1)])):U("v-if",!0)]))])],2),e.handlePreview&&~["success"].indexOf(c.status)?(p(),w("div",{key:1,class:"absolute w-full h-full left-0 top-0 sm:hidden",onClick:function(C){return e.handlePreview(c)}},null,8,Sf)):U("v-if",!0)]})])],42,of)}),128)),(p(!0),w(V,null,ne(e.types,function(c,F){return p(),w("div",{key:F,class:D(["relative",[e.listType==="picture-single"?"w-24 h-24 sm:w-[calc("+e.scale+"*theme(spacing.20))] sm:h-20":"pt-[100%]",{hidden:e.displayOnly&&e.files.length},{hidden:!e.displayOnly&&e.listType==="picture-single"&&e.files.length}]])},[h("div",kf,[ee(e.$slots,"upload",{type:c})])],2)}),128))],2)),_(y,{"show-header":!1,"lock-scroll":e.lockScroll,visible:e.state.showPanel,"onUpdate:visible":t[4]||(t[4]=function(c){return e.state.showPanel=c}),"custom-class":"!min-h-0 py-0"},{default:N(function(){return[ee(e.$slots,"operate",{file:e.state.currentFile||{}},function(){return[h("div",$f,[e.handleDownloadFile?(p(),w("div",{key:0,class:"h-12 flex items-center justify-center border-b border-color-border-separator cursor-pointer",onClick:t[0]||(t[0]=function(){e.state.showPanel=!1,e.handleDownloadFile(e.state.currentFile)})},A(e.t("ui.uploadList.download")),1)):U("v-if",!0),e.handlePreview?(p(),w("div",{key:1,class:"h-12 flex items-center justify-center border-b border-color-border-separator cursor-pointer",onClick:t[1]||(t[1]=function(){e.state.showPanel=!1,e.handlePreview(e.state.currentFile)})},A(e.t("ui.uploadList.preview")),1)):U("v-if",!0),e.displayOnly?U("v-if",!0):(p(),w("div",{key:2,class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[2]||(t[2]=B(function(){e.state.showPanel=!1,e.remove({file:e.state.currentFile})},["stop"]))},A(e.t("ui.uploadList.delete")),1)),Ff,h("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[3]||(t[3]=function(c){return e.state.showPanel=!1})},A(e.t("ui.uploadList.cancel")),1)])]})]}),_:3},8,["lock-scroll","visible"]),_(y,{"show-header":!1,"lock-scroll":e.lockScroll,visible:e.state.showTriggerPanel,"onUpdate:visible":t[8]||(t[8]=function(c){return e.state.showTriggerPanel=c}),"custom-class":"!min-h-0 py-0"},{default:N(function(){return[h("div",Uf,[h("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[5]||(t[5]=function(c){return e.handleTriggerClick(c,e.state.triggerClickType==="video"?3:2)})},A(e.t("ui.uploadList.shoot")),1),h("div",{class:"h-12 flex items-center cursor-pointer",onClick:t[6]||(t[6]=function(c){return e.handleTriggerClick(c,1)})},A(e.t("ui.uploadList.selectFromAlbum")),1),Lf,h("div",{class:"h-12 flex items-center cursor-pointer",onClick:t[7]||(t[7]=function(c){return e.state.showTriggerPanel=!1})},A(e.t("ui.uploadList.cancel")),1)])]}),_:1},8,["lock-scroll","visible"]),_(T,{isHwh5:e.isHwh5,onTriggerClick:e.handleTriggerClick,modelValue:e.state.showAudioPanel,"onUpdate:modelValue":t[9]||(t[9]=function(c){return e.state.showAudioPanel=c})},null,8,["isHwh5","onTriggerClick","modelValue"])])}var Df=bp(Tp,[["render",Af]]);function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Et.apply(this,arguments)}var Of=function(t){return({}.TINY_MODE||t)==="pc"?mn:({}.TINY_MODE||t)==="mobile-first"?Df:mn},Pf=Et({},Ie,{disabled:{type:Boolean,default:function(){return!1}},display:{type:Boolean,default:function(){return!0}},files:{type:Array,default:function(){return[]}},filesIcon:{type:Array,default:function(){return[]}},handlePreview:Function,isEdm:{type:Boolean,default:function(){return!1}},isFolder:{type:Boolean,default:function(){return!1}},listType:String,openDownloadFile:{type:Boolean,default:function(){return!1}},srcList:{type:Array,default:function(){return[]}},isFolderTitle:{type:Boolean,default:!1},listOption:{type:Object,default:function(){return{showUpdate:!0,showDel:!0}}},maxNameLength:{type:Number,default:20},scale:{type:[Number,String],default:1},showName:{type:Boolean,default:!1},types:Array,displayOnly:{type:Boolean,default:!1},handleDownloadFile:Function,handleReUpload:Function,isDragover:Boolean,selected:Object,triggerClick:{type:Function,default:function(){}},isHwh5:{type:Boolean,default:!1},triggerPlay:{type:Function,default:function(){}},mode:String,lockScroll:{type:Boolean,default:!0},reUploadable:Boolean,reUploadTip:Function}),ye=Q({name:de+"UploadList",props:Pf,setup:function(t,n){return Re({props:t,context:n,template:Of,extend:{ref:"upload-list-inner-template"}})}}),Mf="3.12.0";ye.install=function(e){e.component(ye.name,ye)};ye.version=Mf;const Rf=e=>e.includes("image"),zf=e=>t=>{const n=t.target.files;!n||e.uploadFiles(n)},Nf=({api:e,props:t})=>n=>{var r;if(n.preventDefault(),!t.pasteUpload)return;const i=(r=n.clipboardData)==null?void 0:r.items;if(!i)return;const o=[];for(let l=0;l<i.length;l++){const a=i[l].getAsFile();a&&o.push(a)}!o.length||e.uploadFiles(o)},xf=({constants:e,state:t,props:n})=>({formData:r,file:i,type:o})=>{const l=t.uploader.$refs[e.FILE_UPLOAD_INNER_TEMPLATE];if(l.edm.upload){const s=l.edm.upload.params;for(let d in s)r.set(d,s[d]||"")}r.append(e.EDM.FILENAME,i.name),l.edm.isCheckCode===!0?(r.append(e.EDM.ISCHECKCODE,"Y"),r.append(e.EDM.CHECKCODE,i.hash)):r.append(e.EDM.ISCHECKCODE,"N"),n.isFolder&&r.append("filePath",i.path);const a=t.updateId||l.edm.updateId;if(o===e.EDM.SINGLEUPLOAD)r.append(e.EDM.MULTIPART,i,n.isFolder?i.path+i.name:i.name),a&&r.append(e.EDM.DOCID,a);else{const s=a||i.docId;r.append(e.EDM.DOCID,s),r.append(e.EDM.FILESIZE,i.size)}a&&(r.append("updateFile",!0),t.updateId="")},Bf=({state:e,constants:t,Modal:n,props:r,t:i})=>o=>{if(e.updateId===""&&r.limit&&r.fileList.length+o.length>r.limit){const a=e.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE];a&&!a.state.listeners.exceed&&n.message({message:i(t.EDM.NumberExceed,{number:r.limit}),status:"warning"}),r.onExceed&&r.onExceed(o,r.fileList);return}let l=Array.prototype.slice.call(o);r.isFolder&&(l=l.filter(a=>{const s=a.webkitRelativePath.split("/");return a.path=s.slice(0,s.length-1).join("/")+"/",s.length>=7&&n.message({message:`${a.name}${i(t.EDM.FOLDERKEY)}`,status:"warning"}),s.length<7})),r.isFolder||r.multiple||(l=l.slice(0,1)),l.length!==0&&r.onStart&&r.onStart(l,e.updateId)},Vf=({api:e,props:t,refs:n})=>r=>{if(n.input.value=null,!t.beforeUpload)return e.post(r);const i=t.beforeUpload(r);i&&i.then?i.then(o=>{const l=Object.prototype.toString.call(o);if(l==="[object File]"||l==="[object Blob]"){l==="[object Blob]"&&(o=new File([o],r.name,{type:r.type}));for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&(o[a]=r[a]);e.post(o)}else e.post(r)},()=>{t.onRemove(null,r)}):i!==!1?e.post(r):t.onRemove(null,r)},jf=({state:e,props:t,constants:n})=>r=>{const{reqs:i}=e,o=function(l){i[l]?i[l].abort():e.cancelToken[l]&&e.cancelToken[l](),delete i[l],delete e.cancelToken[l]};if(r&&r.isLargeFile&&r.cancelToken)r.cancelToken&&r.cancelToken.forEach(l=>l()),delete r.cancelToken;else if(r){let l=r;r.uid&&(l=r.uid),o(l)}else{const{READY:l,UPLOADING:a,FAIL:s}=n.FILE_STATUS;Object.keys(i).forEach(d=>o(d)),t.fileList.forEach(d=>{d.cancelToken&&d.cancelToken.forEach(u=>u()),[l,a].includes(d.status)&&(d.status=s)})}},Hf=({props:e,state:t,rawFile:n,uploaderInner:r,uid:i})=>({headers:Object.assign(e.headers||{},t.headers||{}),withCredentials:e.withCredentials,file:n,data:e.data,filename:e.name,action:r.action||e.action,onSuccess:o=>{e.onSuccess&&e.onSuccess(o,n),delete t.reqs[i]},onProgress:o=>{e.onProgress&&e.onProgress(o,n)},onError:o=>{e.onError&&e.onError(o,n),delete t.reqs[i]}}),Wf=({service:e,props:t,options:n,rawFile:r,state:i,uid:o,uploaderInner:l,api:a,constants:s})=>{if(e&&e.network&&t.httpRequest===e.network.request){n.method="post",n.url=n.action,n.onUploadProgress=f=>{t.onProgress&&t.onProgress(f,r)},delete n.action,delete n.onProgress;const d=new FormData,u=e.network.CancelToken.source();n.cancelToken=u.token,i.cancelToken[o]=u.cancel,l.edm.upload&&(!r.isLargeFile&&(n.method="put"),n.data=n.data||{}),n.data&&Object.keys(n.data).forEach(f=>{d.append(f,n.data[f])}),Array.isArray(r)?r.forEach(f=>d.append(f.name,f.raw||f)):i.isEdm?a.getFormData({formData:d,file:r,type:r.isLargeFile?"":s.EDM.SINGLEUPLOAD}):d.append(n.filename,r,r.name),n.data=d}},Yf=({state:e,props:t,rawFile:n,uploaderInner:r,uid:i})=>({edmAuth:{edmToken:t.edmToken.edmToken,appId:r.hwh5.appId},filePath:n.filePath,progress:1,onProgress:o=>{t.onProgress&&t.onProgress(o,n)},onSuccess:o=>{t.onSuccess&&t.onSuccess(o,n),delete e.reqs[i]},onError:o=>{t.onProgress&&t.onProgress(o,n),delete e.reqs[i]}}),Zf=({api:e,constants:t,props:n,state:r,service:i})=>o=>{const{uid:l}=o,a=r.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE];let s;a.state.isHwh5?s=Yf({state:r,props:n,rawFile:o,uploaderInner:a,uid:l}):(s=Hf({props:n,state:r,rawFile:o,uploaderInner:a,uid:l}),Wf({service:i,props:n,options:s,rawFile:o,state:r,uid:l,uploaderInner:a,api:e,constants:t}));const d=u=>{if(n.httpRequest){const f=n.httpRequest(u);r.reqs[l]=f,f&&f.then&&f.then(u.onSuccess,u.onError)}};o.isLargeFile?i.common.getChunkMergeUrl().then(u=>{s.url=u,d(s)}):d(s)},qf=({props:e,refs:t})=>(n,r)=>{!e.disabled&&!e.displayOnly&&(e.handleTriggerClick(n,r),t.input.value=null,t.input.click())},Xf=e=>t=>{t.target===t.currentTarget&&(t.keyCode===Te.Enter||t.keyCode===Te.Space)&&e.handleClick(t,"")},Kf=({props:e,state:t})=>n=>{!e.disabled&&t.updateInput&&(t.updateInput.value="",t.updateId=n.docId,t.updateInput.click())},Gf=({state:e,props:t,api:n})=>()=>{let r=document.createElement("input");r.type="file",r.name=t.name,r.accept=t.accept||"",r.onchange=n.handleChange,e.updateInput=Object.freeze(r)},Qf=e=>()=>{e.updateInput=null},Xn=["state","isImage","handleChange","handlePaste","uploadFiles","upload","abort","post","handleClick","handleKeydown","handleUpdate"],Kn=(e,{computed:t,inject:n,reactive:r,onMounted:i,onBeforeUnmount:o},{refs:l,service:a,t:s},{Modal:d})=>{const u={},f=n("uploader"),m=f.$constants,I=r({mouseover:!1,reqs:{},uploader:f,accecpt:"",isEdm:t(()=>I.uploader.$refs[m.FILE_UPLOAD_INNER_TEMPLATE].state.isEdm),openEdmDownload:t(()=>I.uploader.$refs[m.FILE_UPLOAD_INNER_TEMPLATE].edm.download),headers:t(()=>{if(I.isEdm)return{[m.EDM.EDMTOKEN]:e.edmToken.edmToken||"",[m.EDM.TRACEID]:e.edmToken.traceId||""}}),formData:{},cancelToken:{},updateId:"",updateInput:null});return Object.assign(u,{state:I,isImage:Rf,abort:jf({state:I,props:e,constants:m}),getFormData:xf({state:I,constants:m,props:e}),handleClick:qf({props:e,refs:l}),onBeforeDestroy:Qf(I),handleUpdate:Kf({state:I,props:e}),uploadFiles:Bf({constants:m,Modal:d,props:e,state:I,t:s}),post:Zf({api:u,constants:m,props:e,state:I,service:a}),handleChange:zf(u),handlePaste:Nf({api:u,props:e}),handleKeydown:Xf(u),upload:Vf({api:u,props:e,refs:l}),mounted:Gf({state:I,props:e,api:u})}),i(u.mounted),o(u.onBeforeDestroy),u},Jf=({props:e,state:t})=>()=>!e.disabled&&(t.dragover=!0),eh=({emit:e,props:t,state:n})=>r=>{var i;if(t.disabled||!n.uploader)return;const o=n.uploader.accept;n.dragover=!1;const l=(i=r.dataTransfer)==null?void 0:i.files;if(!o){e("file",l);return}const a=[],s=[].slice.call(l).filter(d=>{const{type:u,name:f}=d,m=f.includes(".")?`.${f.split(".").pop()}`:"",I=u.replace(/\/.*$/,"");let v=o.split(",").map(g=>g.trim()).filter(g=>g).some(g=>/\..+$/.test(g)?m===g:/\/\*$/.test(g)?I===g.replace(/\/\*$/,""):!!/^[^/]+\/[^/]+$/.test(g));return!v&&a.push(d),v});a.length&&n.uploader.$emit("drop-error",a),e("file",s)},th=({state:e,constants:t})=>()=>{e.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE].$emit("drag-over",e.dragover)},Gn=["state","onDragOver","onDrop"],Qn=(e,{inject:t,reactive:n,ref:r,watch:i},{emit:o})=>{const l=n({dragover:!1,uploader:t("uploader")||r({default:""})}),a=l.uploader.$constants||{},s={state:l,onDragOver:Jf({props:e,state:l}),onDrop:eh({emit:o,props:e,state:l}),watchDragover:th({state:l,constants:a})};return i(()=>l.dragover,()=>s.watchDragover()),s};function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},St.apply(this,arguments)}function nh(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=rh(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rh(e,t){if(!!e){if(typeof e=="string")return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(e,t)}}function yn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ih=function(t,n){for(var r=t.__vccOpts||t,i=nh(n),o;!(o=i()).done;){var l=o.value,a=l[0],s=l[1];r[a]=s}return r},oh=Q({name:de+"UploadDragger",props:St({},Ie,{disabled:Boolean}),setup:function(t,n){return le({props:t,context:n,renderless:Qn,api:Gn,mono:!0})}});function lh(e,t,n,r,i,o){return p(),w("div",{class:D(["tiny-upload-dragger",{"is-dragover":e.state.dragover}]),onDrop:t[0]||(t[0]=B(function(){return e.onDrop&&e.onDrop.apply(e,arguments)},["prevent"])),onDragover:t[1]||(t[1]=B(function(){return e.onDragOver&&e.onDragOver.apply(e,arguments)},["prevent"])),onDragleave:t[2]||(t[2]=B(function(l){return e.state.dragover=!1},["prevent"]))},[ee(e.$slots,"default")],34)}var wn=ih(oh,[["render",lh]]);function ah(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=sh(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sh(e,t){if(!!e){if(typeof e=="string")return bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bn(e,t)}}function bn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dh=function(t,n){for(var r=t.__vccOpts||t,i=ah(n),o;!(o=i()).done;){var l=o.value,a=l[0],s=l[1];r[a]=s}return r},uh=Q({name:de+"UploadDragger",props:[].concat(se,["disabled","customClass"]),setup:function(t,n){return le({props:t,context:n,renderless:Qn,api:Gn})}});function ch(e,t,n,r,i,o){return p(),w("div",{class:D(e.m("min-w-[theme(spacing.72)] min-h-[theme(spacing.36)] border border-dashed rounded",e.state.dragover?"border-color-brand":"border-color-none-hover",e.customClass)),onDrop:t[0]||(t[0]=B(function(){return e.onDrop&&e.onDrop.apply(e,arguments)},["prevent"])),onDragover:t[1]||(t[1]=B(function(){return e.onDragOver&&e.onDragOver.apply(e,arguments)},["prevent"])),onDragleave:t[2]||(t[2]=B(function(l){return e.state.dragover=!1},["prevent"]))},[ee(e.$slots,"default")],34)}var ph=dh(uh,[["render",ch]]);function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kt.apply(this,arguments)}var fh=function(t){return({}.TINY_MODE||t)==="pc"?wn:({}.TINY_MODE||t)==="mobile-first"?ph:wn},hh=kt({},Ie,{disabled:Boolean,customClass:[String,Object,Array]}),Oe={name:de+"UploadDragger",props:hh,setup:function(t,n){return Re({props:t,context:n,template:fh})}},mh="3.12.0";Oe.install=function(e){e.component(Oe.name,Oe)};Oe.version=mh;function gh(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!At(e)}var Tn=Q({inheritAttrs:!1,name:de+"Upload",props:[].concat(se,["accept","action","autoUpload","beforeUpload","pasteUpload","data","disabled","drag","edmToken","fileList","headers","httpRequest","isFolder","limit","listType","multiple","name","onError","onExceed","onPreview","onProgress","onRemove","onStart","onSuccess","type","withCredentials","isHidden","handleTriggerClick"]),setup:function(t,n){return le({props:t,context:n,renderless:Kn,api:Xn,h:W,extendOptions:{Modal:_e}})},render:function(){var t=this.accept,n=this.disabled,r=this.drag,i=this.handleChange,o=this.handleClick,l=this.handlePaste,a=this.handleKeydown,s=this.isFolder,d=this.listType,u=this.multiple,f=this.name,m=this.uploadFiles,I=this.fileList,v=this.limit,g=this.isHidden,E=this.type,S=this.slots.default&&this.slots.default()||[],y=g&&I.length>=v;return _("div",{class:["tiny-upload","tiny-upload--"+d,n?"is-disabled":"",y?"is-hidden":""],onClick:function(c){return o(c,E)},onPaste:l,onKeydown:a,tabindex:"0"},[r?_(Oe,{disabled:n,onFile:m},gh(S)?S:{default:function(){return[S]}}):S,_("input",{class:"tiny-upload__input",type:"file",webkitdirectory:s,ref:"input",name:f,onChange:i,multiple:s?!0:u,accept:t},null)])}});function vh(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!At(e)}var yh=Q({inheritAttrs:!1,name:de+"Upload",props:[].concat(se,["accept","action","autoUpload","beforeUpload","data","disabled","drag","edmToken","fileList","headers","httpRequest","isFolder","limit","listType","multiple","name","onError","onExceed","onPreview","onProgress","onRemove","onStart","onSuccess","type","withCredentials","scale","sourceType","displayOnly","customClass","handleTriggerClick","mode"]),setup:function(t,n){return le({props:t,context:n,renderless:Kn,api:Xn,h:W,extendOptions:{Modal:_e}})},render:function(){var t=this.accept,n=this.disabled,r=this.handleChange,i=this.handleClick,o=this.handleKeydown,l=this.isFolder,a=this.multiple,s=this.name,d=this.uploadFiles,u=this.listType,f=this.displayOnly,m=this.customClass,I=this.sourceType,v=this.mode,g=this.slots.default&&this.slots.default(),E=this.slots.tip&&this.slots.tip(),S=this.slots.operate&&this.slots.operate(),y=v==="bubble";return _("div",{class:!f&&u==="text"?"flex justify-between mt-4 mb-2 "+(y?"sm:my-0":"sm:my-3"):"h-full"},[E&&_("div",{class:"flex items-center sm:hidden inline-block text-sm"},[E]),_("div",{class:"h-full",onClick:function(c){return i(c,I)},onKeydown:o,tabindex:"0"},[u==="drag-single"?_(Oe,{customClass:m,disabled:n,onFile:d},vh(g)?g:{default:function(){return[g]}}):g]),S,E&&_("div",{class:"hidden sm:inline-block flex-1 w-0 self-center"},[E]),_("input",{class:"hidden",type:"file",webkitdirectory:l,ref:"input",name:s,onChange:r,multiple:l?!0:a,accept:t},null)])}});function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$t.apply(this,arguments)}var wh=function(t){return({}.TINY_MODE||t)==="pc"?Tn:({}.TINY_MODE||t)==="mobile-first"?yh:Tn},bh=$t({},Ie,{accept:String,action:{type:String,default:""},autoUpload:Boolean,beforeUpload:Function,pasteUpload:Boolean,data:Object,disabled:Boolean,drag:Boolean,edmToken:{type:Object,default:function(){return{}}},fileList:{type:Array,default:function(){return[]}},headers:Object,httpRequest:{type:Function,default:Mn},isFolder:{type:Boolean,default:!1},limit:Number,listType:String,multiple:Boolean,name:{type:String,default:"file"},onError:Function,onExceed:Function,onPreview:{type:Function,default:function(){}},onProgress:Function,onRemove:{type:Function,default:function(){}},onStart:Function,onSuccess:Function,type:String,withCredentials:Boolean,isHidden:{type:Boolean,default:!1},scale:{type:[Number,String],default:1},sourceType:{type:String,default:"picture",validator:function(t){return t.split("/").every(function(n){return["picture","video","audio"].includes(n)})}},displayOnly:{type:Boolean,default:!1},customClass:[String,Object,Array],handleTriggerClick:{type:Function,default:function(){}},mode:String}),fe=Q({name:de+"Upload",props:bh,setup:function(t,n){return Re({props:t,context:n,template:wh,extend:{ref:"upload-inner-template"}})}}),Th="3.12.0";fe.install=function(e){e.component(fe.name,fe)};fe.version=Th;var ut={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Fe,function(){var n=n||function(r,i){var o;if(typeof window!="undefined"&&window.crypto&&(o=window.crypto),typeof self!="undefined"&&self.crypto&&(o=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window!="undefined"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof Fe!="undefined"&&Fe.crypto&&(o=Fe.crypto),!o&&typeof Dr=="function")try{o=require("crypto")}catch{}var l=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(T){var c;return y.prototype=T,c=new y,y.prototype=null,c}}(),s={},d=s.lib={},u=d.Base=function(){return{extend:function(y){var T=a(this);return y&&T.mixIn(y),(!T.hasOwnProperty("init")||this.init===T.init)&&(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var T in y)y.hasOwnProperty(T)&&(this[T]=y[T]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=u.extend({init:function(y,T){y=this.words=y||[],T!=i?this.sigBytes=T:this.sigBytes=y.length*4},toString:function(y){return(y||I).stringify(this)},concat:function(y){var T=this.words,c=y.words,F=this.sigBytes,b=y.sigBytes;if(this.clamp(),F%4)for(var C=0;C<b;C++){var k=c[C>>>2]>>>24-C%4*8&255;T[F+C>>>2]|=k<<24-(F+C)%4*8}else for(var O=0;O<b;O+=4)T[F+O>>>2]=c[O>>>2];return this.sigBytes+=b,this},clamp:function(){var y=this.words,T=this.sigBytes;y[T>>>2]&=4294967295<<32-T%4*8,y.length=r.ceil(T/4)},clone:function(){var y=u.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var T=[],c=0;c<y;c+=4)T.push(l());return new f.init(T,y)}}),m=s.enc={},I=m.Hex={stringify:function(y){for(var T=y.words,c=y.sigBytes,F=[],b=0;b<c;b++){var C=T[b>>>2]>>>24-b%4*8&255;F.push((C>>>4).toString(16)),F.push((C&15).toString(16))}return F.join("")},parse:function(y){for(var T=y.length,c=[],F=0;F<T;F+=2)c[F>>>3]|=parseInt(y.substr(F,2),16)<<24-F%8*4;return new f.init(c,T/2)}},v=m.Latin1={stringify:function(y){for(var T=y.words,c=y.sigBytes,F=[],b=0;b<c;b++){var C=T[b>>>2]>>>24-b%4*8&255;F.push(String.fromCharCode(C))}return F.join("")},parse:function(y){for(var T=y.length,c=[],F=0;F<T;F++)c[F>>>2]|=(y.charCodeAt(F)&255)<<24-F%4*8;return new f.init(c,T)}},g=m.Utf8={stringify:function(y){try{return decodeURIComponent(escape(v.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return v.parse(unescape(encodeURIComponent(y)))}},E=d.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=g.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var T,c=this._data,F=c.words,b=c.sigBytes,C=this.blockSize,k=C*4,O=b/k;y?O=r.ceil(O):O=r.max((O|0)-this._minBufferSize,0);var x=O*C,X=r.min(x*4,b);if(x){for(var ue=0;ue<x;ue+=C)this._doProcessBlock(F,ue);T=F.splice(0,x),c.sigBytes-=X}return new f.init(T,X)},clone:function(){var y=u.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});d.Hasher=E.extend({cfg:u.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var T=this._doFinalize();return T},blockSize:16,_createHelper:function(y){return function(T,c){return new y.init(c).finalize(T)}},_createHmacHelper:function(y){return function(T,c){return new S.HMAC.init(y,c).finalize(T)}}});var S=s.algo={};return s}(Math);return n})})(ut);var Jn=ut.exports,_h={exports:{}};(function(e,t){(function(n,r){e.exports=r(ut.exports)})(Fe,function(n){return function(r){var i=n,o=i.lib,l=o.WordArray,a=o.Hasher,s=i.algo,d=[],u=[];(function(){function I(S){for(var y=r.sqrt(S),T=2;T<=y;T++)if(!(S%T))return!1;return!0}function v(S){return(S-(S|0))*4294967296|0}for(var g=2,E=0;E<64;)I(g)&&(E<8&&(d[E]=v(r.pow(g,1/2))),u[E]=v(r.pow(g,1/3)),E++),g++})();var f=[],m=s.SHA256=a.extend({_doReset:function(){this._hash=new l.init(d.slice(0))},_doProcessBlock:function(I,v){for(var g=this._hash.words,E=g[0],S=g[1],y=g[2],T=g[3],c=g[4],F=g[5],b=g[6],C=g[7],k=0;k<64;k++){if(k<16)f[k]=I[v+k]|0;else{var O=f[k-15],x=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,X=f[k-2],ue=(X<<15|X>>>17)^(X<<13|X>>>19)^X>>>10;f[k]=x+f[k-7]+ue+f[k-16]}var re=c&F^~c&b,me=E&S^E&y^S&y,ge=(E<<30|E>>>2)^(E<<19|E>>>13)^(E<<10|E>>>22),Ce=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25),Ee=C+Ce+re+u[k]+f[k],G=ge+me;C=b,b=F,F=c,c=T+Ee|0,T=y,y=S,S=E,E=Ee+G|0}g[0]=g[0]+E|0,g[1]=g[1]+S|0,g[2]=g[2]+y|0,g[3]=g[3]+T|0,g[4]=g[4]+c|0,g[5]=g[5]+F|0,g[6]=g[6]+b|0,g[7]=g[7]+C|0},_doFinalize:function(){var I=this._data,v=I.words,g=this._nDataBytes*8,E=I.sigBytes*8;return v[E>>>5]|=128<<24-E%32,v[(E+64>>>9<<4)+14]=r.floor(g/4294967296),v[(E+64>>>9<<4)+15]=g,I.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var I=a.clone.call(this);return I._hash=this._hash.clone(),I}});i.SHA256=a._createHelper(m),i.HmacSHA256=a._createHmacHelper(m)}(Math),n.SHA256})})(_h);var Ih={exports:{}};(function(e,t){(function(n,r){e.exports=r(ut.exports)})(Fe,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,o=i.WordArray,l=o.init,a=o.init=function(s){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||typeof Uint8ClampedArray!="undefined"&&s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){for(var d=s.byteLength,u=[],f=0;f<d;f++)u[f>>>2]|=s[f]<<24-f%4*8;l.call(this,u,d)}else l.apply(this,arguments)};a.prototype=o}}(),n.lib.WordArray})})(Ih);var er={exports:{}};/*! streamsaver. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */(function(e){((t,n)=>{e.exports=n()})("streamSaver",()=>{const t=typeof window=="object"?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let n=null,r=!1;const i=v=>{try{v()}catch{}},o=t.WebStreamsPolyfill||{},l=t.isSecureContext;let a=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const s=l||"MozAppearance"in document.documentElement.style?"iframe":"navigate",d={createWriteStream:I,WritableStream:t.WritableStream||o.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function u(v){if(!v)throw new Error("meh");const g=document.createElement("iframe");return g.hidden=!0,g.src=v,g.loaded=!1,g.name="iframe",g.isIframe=!0,g.postMessage=(...E)=>g.contentWindow.postMessage(...E),g.addEventListener("load",()=>{g.loaded=!0},{once:!0}),document.body.appendChild(g),g}function f(v){const g="width=200,height=100",E=document.createDocumentFragment(),S={frame:t.open(v,"popup",g),loaded:!1,isIframe:!1,isPopup:!0,remove(){S.frame.close()},addEventListener(...T){E.addEventListener(...T)},dispatchEvent(...T){E.dispatchEvent(...T)},removeEventListener(...T){E.removeEventListener(...T)},postMessage(...T){S.frame.postMessage(...T)}},y=T=>{T.source===S.frame&&(S.loaded=!0,t.removeEventListener("message",y),S.dispatchEvent(new Event("load")))};return t.addEventListener("message",y),S}try{new Response(new ReadableStream),l&&!("serviceWorker"in navigator)&&(a=!0)}catch{a=!0}i(()=>{const{readable:v}=new TransformStream,g=new MessageChannel;g.port1.postMessage(v,[v]),g.port1.close(),g.port2.close(),r=!0,Object.defineProperty(d,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function m(){n||(n=l?u(d.mitm):f(d.mitm))}function I(v,g,E){let S={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},y=0,T=null,c=null,F=null;if(Number.isFinite(g)?([E,g]=[g,E],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),S.size=E,S.writableStrategy=g):g&&g.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),S.size=E,S.writableStrategy=g):S=g||{},!a){m(),c=new MessageChannel,v=encodeURIComponent(v.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const C={transferringReadable:r,pathname:S.pathname||Math.random().toString().slice(-6)+"/"+v,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+v}};S.size&&(C.headers["Content-Length"]=S.size);const k=[C,"*",[c.port2]];if(r){const O=s==="iframe"?void 0:{transform(X,ue){if(!(X instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");y+=X.length,ue.enqueue(X),T&&(location.href=T,T=null)},flush(){T&&(location.href=T)}};F=new d.TransformStream(O,S.writableStrategy,S.readableStrategy);const x=F.readable;c.port1.postMessage({readableStream:x},[x])}c.port1.onmessage=O=>{O.data.download?s==="navigate"?(n.remove(),n=null,y?location.href=O.data.download:T=O.data.download):(n.isPopup&&(n.remove(),n=null,s==="iframe"&&u(d.mitm)),u(O.data.download)):O.data.abort&&(b=[],c.port1.postMessage("abort"),c.port1.onmessage=null,c.port1.close(),c.port2.close(),c=null)},n.loaded?n.postMessage(...k):n.addEventListener("load",()=>{n.postMessage(...k)},{once:!0})}let b=[];return!a&&F&&F.writable||new d.WritableStream({write(C){if(!(C instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(a){b.push(C);return}c.port1.postMessage(C),y+=C.length,T&&(location.href=T,T=null)},close(){if(a){const C=new Blob(b,{type:"application/octet-stream; charset=utf-8"}),k=document.createElement("a");k.href=URL.createObjectURL(C),k.download=v,k.click()}else c.port1.postMessage("end")},abort(){b=[],c.port1.postMessage("abort"),c.port1.onmessage=null,c.port1.close(),c.port2.close(),c=null}},S.writableStrategy)}return d})})(er);var tr=er.exports;function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ft.apply(this,arguments)}var _n=Q({inheritAttrs:!1,props:[].concat(se,["edm","action","headers","data","multiple","name","drag","dragger","withCredentials","showFileList","accept","type","beforeUpload","beforeRemove","fileList","autoUpload","listType","httpRequest","disabled","limit","openDownloadFile","mergeService","fileSize","thumbOption","isFolderTitle","listOption","maxNameLength","isHidden","sourceType","cacheToken","pasteUpload","reUploadable","reUploadTip"]),setup:function(t,n){return le({props:t,context:n,renderless:Ht,api:jt,extendOptions:{Modal:_e,CryptoJS:Jn,Streamsaver:tr}})},components:{Progress:qe,UploadList:ye,Upload:fe,TinyDialogBox:An,Popover:Or,IconAttachment:zt(),IconSuccessful:Mt(),IconCloseCircle:Me(),IconDownload:Xe(),IconFileCloudupload:Nt()},render:function(){var t,n=this.state.listeners,r=n.exceed,i=r===void 0?function(){}:r,o=n.preview,l=o===void 0?void 0:o,a=this.state,s=a.uploadFiles,d=a.isEdm,u=a.dialogConfigObj,f=a.isSuccess,m=a.uploadDisabled,I=a.url,v=a.accept,g=a.httpRequest,E=a.edmToken,S=a.iframeUrl,y=this.downloadFile,T=this.handleRemove,c=this.handleReUpload,F=this.handleReUploadTotal,b=this.updateFile,C=this.slots,k=this.edm,O=k===void 0?{}:k,x=this.t,X=this.$attrs,ue=this.a,re=this.listType==="picture-card",me=this.thumbOption,ge=me.showDel,Ce=me.showDownload,Ee=me.showTooltip,G=me.showUpdate,ve=me.icon,Ge=this.thumbOption.downloadFile||y,ze=O.upload?O.upload.isFolder:!1,ct=function(ie){return[Ce&&_("span",{class:"thumb-icon",title:x("ui.fileUpload.downloadFile"),onClick:function(){return Ge(ie)}},[_($("icon-download"),{class:"download-icon"},null)]),d&&!ze&&G&&_("span",{class:"thumb-icon",title:x("ui.fileUpload.updateFile"),onClick:function(){return b(ie)}},[_($("icon-file-cloudupload"),{class:"refres-icon"},null)]),ge&&_("span",{class:"thumb-icon",title:x("ui.fileUpload.deleteFile"),onClick:function(){return T(ie)}},[_($("icon-close-circle"),{class:"close-icon"},null)])]},pt=function(ie){var be=C.file&&C.file({file:ie});return be||[_($("icon-successful"),{class:"thumb-success-icon"},null),_("span",{class:["thumb-item-name",ge?"":"hide-close-icon",Ce?"":"hide-download-icon"]},[ie.name]),ct(ie)]},Qe=function(){return _("span",null,[s.length])};this.showFileList&&(this.listType==="thumb"?t=s.length===0?"":W("div",{class:"tiny-upload--thumb__wrap"},[W("Popover",{props:{trigger:"hover",popperClass:this.thumbOption.popperClass,width:this.thumbOption.width},scopedSlots:{reference:function(){return W("div",{class:"tiny-upload--thumb__head"},[W(ve||"icon-attachment",{class:"thumb-icon"}),Qe()])},default:function(){return W("div",{class:"tiny-upload--thumb__body"},[W("div",{class:"tiny-upload--thumb__list"},[s.map(function(ie){return W("Popover",{props:{content:ie.name,trigger:Ee?"hover":"manual",placement:"top"},scopedSlots:{reference:function(){return W("div",{class:"thumb-item"},[pt(ie)])}}})})])])}}})]):t=_(ye,{disabled:m,reUploadable:this.reUploadable,reUploadTip:this.reUploadTip,isFolder:ze,isEdm:d,listType:this.listType,files:s,isFolderTitle:this.isFolderTitle,listOption:this.listOption,maxNameLength:this.maxNameLength,onRemove:T,onReUpload:c,onReUploadTotal:F,handlePreview:l,openDownloadFile:this.openDownloadFile,onUpdate:b},{default:function(ie){if(C.file)return C.file({file:ie.file})}}));var Ne={props:{type:this.type,drag:this.drag,action:I,multiple:this.multiple,withCredentials:this.withCredentials,headers:this.headers,name:this.name,data:this.data,edm:this.edm,accept:d?v:this.accept,fileList:s,autoUpload:this.autoUpload,listType:this.listType,disabled:m,limit:this.limit,onExceed:i,onStart:this.handleStart,onProgress:this.handleProgress,onSuccess:this.handleSuccess,onError:this.handleError,onPreview:l,httpRequest:g,isFolder:ze,edmToken:E,pasteUpload:this.pasteUpload,isHidden:this.isHidden},ref:"upload-inner"},Je=C.default&&C.default(),ft=C.trigger?C.trigger():Je,et=W(fe,Ne,ft),tt=null;d&&f&&(Ne.props.accept=v,Ne.props.edmToken=E),this.edm.preview&&(tt=W("tiny-dialog-box",Ft({minHeight:"600px",width:"60%"},u,{scopedSlots:{default:function(){return _("iframe",{id:"_iframe",style:"display: block;width: 100%;height: 500px;display: inline-block;",allowfullscreen:!0,allowtransparency:"true",frameborder:"0",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",src:S},null)}}})));var ht=ue(X,["^on[A-Z]"]);return _("div",Sn({class:"tiny-file-upload"},ht),[re?t:"",C.trigger?[et,Je]:et,C.tip&&C.tip(),re?"":t,tt])}});function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}var Ch=Q({inheritAttrs:!1,props:[].concat(se,["size","action","drag","headers","data","multiple","name","withCredentials","showFileList","accept","type","beforeUpload","beforeRemove","fileList","autoUpload","listType","httpRequest","disabled","limit","fileIconList","display","fileTitle","headerShow","successStatistics","uploadIcon"]),setup:function(t,n){return le({props:t,context:n,renderless:Ht,api:jt})},components:{Progress:qe,UploadList:ye,Upload:fe,IconUpload:Ao()},render:function(){var t=this,n=this.state.listeners,r=n.exceed,i=r===void 0?function(){}:r,o=n.preview,l=o===void 0?function(){}:o,a=this.fileTitle,s=this.headerShow,d=this.successStatistics,u=this.uploadIcon,f,m=this.state.uploadFiles,I=0,v=[];if(m&&m.map(function(c){t.listType==="picture-card"&&c.url&&v.push(c.url),c.status==="success"&&(I+=1)}),this.showFileList){var g={props:{disabled:this.state.uploadDisabled,listType:this.listType,files:this.state.uploadFiles,filesIcon:this.fileIconList,display:this.display,srcList:v,handlePreview:l},on:{remove:this.handleRemove}};f=W(ye,He({},g),function(c){if(t.slots.file)return t.slots.file({file:c.file})})}var E={props:{type:this.type,drag:this.drag,action:this.state.url,multiple:this.multiple,withCredentials:this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.state.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.state.uploadDisabled,limit:this.limit,onExceed:i,onStart:this.handleStart,onProgress:this.handleProgress,onSuccess:this.handleSuccess,onError:this.handleError,onPreview:l,httpRequest:this.state.httpRequest,size:this.size},ref:"upload-inner"},S=this.slots.trigger&&this.slots.trigger()||this.slots.default(),y=!s||this.listType==="picture-card"?W(fe,He({},E),S):"",T=_("div",{class:"tiny-mobile-file-upload__header"},[_("div",{class:"tiny-mobile-file-upload__header-title"},[a]),_("div",{class:"tiny-mobile-file-upload__header-upload"},[d?_("span",{class:"upload-status"},[I,ae("/"),m.length]):"",this.listType!=="picture-card"&&u?_("span",{class:"upload-icon"},[W(fe,He({},E),S||_($("icon-upload"),null,null))]):""])]);return _("div",{class:["tiny-mobile-file-upload",this.$attrs.class],ref:"fileUpload"},[s?T:"",_("div",{class:{"tiny-mobile-file-upload__wrap":!0,"is-card":this.listType==="picture-card"}},[this.listType==="picture-card"?f:"",this.slots.trigger?[y,this.slots.default&&this.slots.default()]:y,this.slots.tip&&this.slots.tip(),this.listType!=="picture-card"?f:""])])}}),$e;function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut.apply(this,arguments)}function In(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!At(e)}var Eh=Q(($e={inheritAttrs:!1,emits:["change","hash-progress","error","progress","success","remove","download","trigger-click","click-file-list"],props:[].concat(se,["edm","action","headers","data","multiple","name","drag","dragger","withCredentials","showFileList","accept","type","beforeUpload","beforeRemove","fileList","autoUpload","listType","httpRequest","disabled","limit","openDownloadFile","mergeService","fileSize","thumbOption","isFolderTitle","listOption","maxNameLength","scale","showName","sourceType","showTitle","title","displayOnly","customClass","hwh5","mode","cacheToken","lockScroll","encryptConfig"])},$e.emits=["change","hash-progress","progress","success","error","remove","download"],$e.setup=function(t,n){return le({props:t,context:n,renderless:Ht,api:jt,extendOptions:{Modal:_e,CryptoJS:Jn,Streamsaver:tr}})},$e.components={Progress:qe,UploadList:ye,Upload:fe,TinyDialogBox:An,TinyTooltip:$n,IconAttachment:zt(),IconSuccessful:Mt(),IconCloseCircle:Me(),IconDownload:Xe(),IconFileCloudupload:Nt(),TinyButton:Ae,IconPlus:Xr(),IconPlusCircle:ro(),IconPicture:Dn(),IconMic:On(),IconStartCircle:bo(),IconHelpQuery:xi(),TinyModal:_e},$e.render=function(){var t=this,n=this.state.listeners,r=n.exceed,i=r===void 0?function(){}:r,o=n.preview,l=o===void 0?void 0:o,a=n["download-file"],s=n["download-all"],d=n["re-upload"],u=n["trigger-click"],f=n.play,m=this.state,I=m.uploadFiles,v=m.isEdm,g=m.dialogConfigObj,E=m.isSuccess,S=m.uploadDisabled,y=m.url,T=m.accept,c=m.httpRequest,F=m.edmToken,b=m.iframeUrl,C=m.isDragover,k=m.selected,O=m.types,x=m.isHwh5,X=this.handleRemove,ue=this.updateFile,re=this.slots,me=this.edm,ge=me===void 0?{}:me,Ce=this.$attrs,Ee=this.a,G=this.t,ve=this.listType,Ge=this.showTitle,ze=this.isFolderTitle,ct=this.listOption,pt=this.maxNameLength,Qe=this.scale,Ne=this.showName,Je=this.openDownloadFile,ft=this.type,et=this.drag,tt=this.multiple,ht=this.withCredentials,we=this.headers,ie=this.name,be=this.data,nr=this.autoUpload,rr=this.limit,Zt=this.handleStart,ir=this.handleProgress,or=this.handleSuccess,lr=this.handleError,qt=this.fileSize,Se=this.displayOnly,ar=this.customClass,sr=this.handleClickFileList,dr=this.handleTriggerClick,ur=this.showFileList,nt=this.mode,cr=this.lockScroll,pr=this.encryptConfig,fr=this.encryptDialogConfirm,Xt=this.title||G("ui.fileUpload.attachment"),Kt=ve==="drag-single",Gt=ve==="text",Qt=ge.upload?ge.upload.isFolder:!1,Jt=function(L){var M=L.listType,P=L.title,q=L.showTitle,te=L.isInside,J=te===void 0?!1:te,j=L.displayOnly,H=j===void 0?!1:j,ce=L.mode,pe;if(J)pe=_("span",{class:q?"inline-block mr-1 text-sm text-color-text-primary font-bold":"hidden"},[P]);else{var ke="text-sm text-color-text-primary font-bold ";M!=="text"?ke+="hidden":!H&&q?ke+="hidden sm:block":!H||!q?ke+="hidden":ke+="mt-4 mb-2 px-4",pe=ce!=="bubble"?_("div",{class:ke},[_("span",{class:"mr-1"},[P]),H&&mr({isEdm:v,fileSize:qt})]):null}return pe},en=function(L){var M=L.accept,P=L.fileSize,q=L.limit,te=M?G("ui.fileUpload.onlySupport").replace(/{type}/,M.split(",").map(function(pe){return pe.trim().replace(/^\./,"")}).join(G("ui.base.comma"))):"";P&&te.length!==0&&(te+=G("ui.base.comma")+" ");var J="";if(typeof P=="number")J=""+G("ui.fileUpload.fileNotLessThan")+(P/1024).toFixed(2)+"M";else if(Array.isArray(P)){var j=P[0]/1024;j=Math.floor(j)===j?j:Number(j.toFixed(2));var H=P[1]/1024;H=Math.floor(H)===H?H:Number(H.toFixed(2)),J+=P[0]?""+G("ui.fileUpload.fileNotLessThan")+j+"M"+G("ui.base.comma"):"",J+=P[1]?""+G("ui.fileUpload.fileNotMoreThan")+H+"M":""}var ce=q?G("ui.fileUpload.numberLimit").replace(/{number}/,q):"";return(P||te.length!==0)&&q&&(ce=G("ui.base.comma")+" "+ce),te+J+ce},hr=function(L){var M=L.listType,P=L.title,q=L.showTitle,te=L.isEdm,J=L.accept,j=L.fileSize,H=L.slots,ce,pe=en({accept:te?J:t.accept,fileSize:j,limit:t.limit});return M==="text"?ce=_("div",{class:"inline-block w-full sm:pl-4 text-color-none"},[_("div",{class:"block sm:hidden"},[Jt({listType:M,title:P,showTitle:q,isInside:!0}),_($("tiny-tooltip"),{effect:"dark",content:pe,placement:"top"},{default:function(){return[_($("icon-help-query"),{class:"-mt-0.5 fill-color-none-hover"},null)]}})]),_("div",{title:pe,class:"hidden sm:block overflow-hidden text-ellipsis whitespace-nowrap"},[H.tip&&H.tip()||pe])]):M==="drag-single"?ce=_("div",{title:pe,class:"leading-5 text-color-text-placeholder overflow-hidden text-ellipsis whitespace-nowrap"},[H.tip&&H.tip()||pe]):ce=H.tip?_("div",{class:"mb-4 text-color-none"},[H.tip()]):null,ce},mr=function(L){var M=L.isEdm,P=L.fileSize;return _($("tiny-tooltip"),{class:"inline-block sm:hidden",effect:"dark",content:en({accept:M?T:t.accept,fileSize:P,limit:t.limit}),placement:"top"},{default:function(){return[_($("icon-help-query"),{class:"-mt-0.5  fill-color-none-hover"},null)]}})},gr=function(L){var M=L.listType,P=L.t,q=L.type,te=L.disabled,J={picture:_("div",null,[_($("icon-picture"),{class:"w-6 h-6 fill-color-icon-secondary"},null),_("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[P("ui.upload.addPicture")])]),audio:_("div",null,[_($("icon-mic"),{class:"w-6 h-6 fill-color-icon-secondary"},null),_("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[P("ui.upload.addAudio")])]),video:_("div",null,[_($("icon-start-circle"),{class:"w-6 h-6 fill-color-icon-secondary"},null),_("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[P("ui.upload.addVideo")])])},j;if(M==="text")j=_("div",{class:"inline-block"},[_($("tiny-button"),{disabled:te,class:"hidden sm:block"},{default:function(){return[_($("icon-plus"),{class:"align-top"},null),_("span",{class:"ml-2"},[P("ui.fileUpload.uploadFile")])]}}),_($("icon-plus-circle"),{class:"sm:hidden"},null)]);else if(M==="drag-single")j=null;else{var H="relative h-full border border-dashed border-color-border rounded bg-color-bg-2 align-top hover:cursor-pointer";M==="picture-single"&&I.length&&(H+=" hidden"),j=_("div",{class:H},[_("div",{class:"absolute w-full top-1/2 left-0 -translate-y-1/2 z-[1] text-center"},[J[q||"picture"]])])}return j},vr=function(L){var M=L.listType,P=L.downloadAll,q=L.uploadFiles,te=L.t,J;return M==="text"&&(J=P?_("div",{class:"hidden sm:inline-block align-middle"},[_($("tiny-button"),{class:"ml-2",onClick:function(){return P(q)}},{default:function(){return[_($("icon-download"),{class:"align-top"},null),_("span",{class:"ml-2"},[te("ui.fileUpload.downloadAll")])]}})]):null),J},yr=function(L){var M=L.displayOnly,P=L.slots,q=L.listType,te=L.t,J=L.type,j=L.disabled;return!M||M&&["picture-card","picture-single"].includes(J)?P.trigger?P.trigger():gr({listType:q,t:te,type:J,disabled:j}):null},xe=Se?null:hr({listType:ve,title:Xt,showTitle:Ge,isEdm:v,accept:T,fileSize:qt,slots:re});xe&&xe.data&&(xe.data.slot="tip");var rt=Se?null:vr({listType:ve,downloadAll:s,uploadFiles:I,t:G});rt&&rt.data&&(rt.data.slot="operate");var wr=function(L){var M=yr({displayOnly:Se,slots:re,listType:ve,t:G,type:L,disabled:S}),P={default:function(){return M},tip:function(){return!Kt&&xe},operate:function(){return rt}};return P},it={props:{type:ft,drag:et,action:y,multiple:tt,withCredentials:ht,headers:we,name:ie,data:be,edm:ge,accept:v?T:this.accept,fileList:I,autoUpload:nr,listType:ve,disabled:S,limit:rr,onExceed:i,onStart:Zt,onProgress:ir,onSuccess:or,onError:lr,onPreview:l,httpRequest:c,isFolder:Qt,edmToken:F,scale:Qe,displayOnly:Se,customClass:ar,handleTriggerClick:dr,mode:nt},ref:"upload-inner"},mt=function(L){return it.props.sourceType=L,W(fe,it,wr(L))},br={props:{disabled:S,isFolder:Qt,isEdm:v,edm:ge,displayOnly:Se,listType:ve,files:I,isFolderTitle:ze,listOption:ct,maxNameLength:pt,scale:Qe,showName:Ne,types:O,isDragover:C,handlePreview:l,handleDownloadFile:a,handleReUpload:d,openDownloadFile:Je,selected:k,triggerClick:u,isHwh5:x,triggerPlay:f,mode:nt,lockScroll:cr},scopedSlots:{default:function(L){if(re.file)return re.file({file:L.file})},upload:function(L){var M=L.type;return Gt?null:mt(M)},tip:function(){return xe},"assist-content":function(L){if(re["assist-content"])return re["assist-content"]({file:L.file})},operate:function(L){if(re.operate)return re.operate({file:L.file})}},on:{remove:X,update:ue,start:Zt,"click-file-list":sr,"update:visible":function(L){return t.state.visible=L}},ref:"upload-list-inner"},ot;ur&&(ot=W(ye,br),nt==="bubble"&&(ot=W("tiny-modal",{props:{customClass:"sm:w-[theme(spacing.112)]",title:G("ui.fileUpload.uploadList"),position:"bottom-right",mask:!1,showClose:!1,showFooter:!1,modelValue:this.state.visible},on:{"update:modelValue":function(L){return t.state.visible=L}}},[ot])));var tn=null,nn=null;v&&E&&(it.props.accept=T,it.props.edmToken=F),ge.preview&&(tn=W("tiny-dialog-box",Ut({minHeight:"600px",width:"60%"},g,{scopedSlots:{default:function(){return _("iframe",{id:"_iframe",style:"display: block;width: 100%;height: 500px;display: inline-block;",allowfullscreen:!0,allowtransparency:"true",frameborder:"0",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",src:b},null)}}}))),pr.enabled&&(nn=W("tiny-dialog-box",{style:"",props:{dataTag:"encrypt-config-dialog",lockScroll:!0,visible:this.state.encryptDialogConfig.show,dragable:!0,title:this.t("ui.fileUpload.encryptDialogTitle"),width:"380px",height:"auto"},on:{"update:visible":function(L){return t.state.encryptDialogConfig.show=L}},scopedSlots:{default:function(){return _("div",{"data-tag":"encrypt-config-dialog-body"},[_("div",null,[t.t("ui.fileUpload.addWatermark")]),_("div",null,[_(Pr,{modelValue:t.encryptConfig.watermark,"onUpdate:modelValue":function(M){return t.encryptConfig.watermark=M}},null)]),_("p",null,[ae("\xA0")]),_("div",null,[t.t("ui.fileUpload.encrypted")]),_("div",null,[_(Mr,{modelValue:t.encryptConfig.encrypt,"onUpdate:modelValue":function(M){return t.encryptConfig.encrypt=M}},null)])])},footer:function(){var L,M;return[_(Ae,{onClick:function(){return t.state.encryptDialogConfig.show=!1}},In(L=t.t("ui.base.cancel"))?L:{default:function(){return[L]}}),[_(Ae,{type:"primary",customClass:"ml-2",onClick:function(){return fr()}},In(M=t.t("ui.popupload.uploadButtonText"))?M:{default:function(){return[M]}})]]}}}));var Tr=Ee(Ce,["^on[A-Z]"]);return _("div",Sn(Tr,{"data-tag":"tiny-file-upload",class:Kt?"relative inline-block":""}),[Jt({listType:ve,title:Xt,showTitle:Ge,displayOnly:Se,mode:nt}),Gt?re.trigger?[mt()]:mt():null,ot,tn,nn])},$e));function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lt.apply(this,arguments)}var Sh=function(t){return({}.TINY_MODE||t)==="pc"?_n:({}.TINY_MODE||t)==="mobile"?Ch:({}.TINY_MODE||t)==="mobile-first"?Eh:_n},Cn={FILE_UPLOAD_INNER_TEMPLATE:"file-upload-inner-template",UPLOAD_INNER:"upload-inner",UPLOAD_INNER_TEMPLATE:"upload-inner-template",UPLOAD_LIST_INNER:"upload-list-inner",UPLOAD_LIST_INNER_TEMPLATE:"upload-list-inner-template",FILE_STATUS:{READY:"ready",SUCESS:"success",UPLOADING:"uploading",FAIL:"fail",DOWNLOADING:"downloading"},LIST_TYPE:{TEXT:"text",PICTURE_CARD:"picture-card",PICTURE:"picture",THUMB:"thumb",PICTURE_SINGLE:"picture-single",DRAG_SINGLE:"drag-single"},EDM:{CHUNKINIT:"chunkInit",FILESIZE:"fileSize",CHUNKS:"chunks",FILENAME:"fileName",ISCHECKCODE:"isCheckCode",CHECKCODE:"checkCode",MULTIPART:"multipartFile",DOCID:"docId",CHUNK:"chunk",SINGLEUPLOAD:"uploadFile",LOWERNAME:"filename",FOLDERKEY:"ui.fileUpload.folder",FORMAT:"docFormat=wm&",WATER:"usageScenes=water&wmType=wm&",SOURCE:"usageScenes=source&",URLCONTS:"&type=doc&pageNum=1&docVersion=",EDMTOKEN:"EDM-Authorization",TRACEID:"x-trace-id",TEXT:"edm-text",JSLIB:"./jslib/",I18NKEY:"ui.fileUpload.token",LARGEFILEKEY:"ui.fileUpload.largefile",EXCEED:"ui.fileUpload.exceed",SIZE:"ui.fileUpload.fileSize",SIZE_17G:17*1024*1024,SIZE_2G:2*1024*1024,SIZE_64M:64*1024,SIZE_32M:32*1024,SIZE_20M:20*1024,SIZE_16M:16*1024,SIZE_8M:8*1024,SIZE_4M:4*1024,SIZE_2M:2*1024,SIZE_0M:0*1024,FILEEMPTY:"ui.fileUpload.empty",KIASCANTIP:"ui.fileUpload.kiaScanTip",FILENAMEEXCEEDS:"ui.fileUpload.fileNameExceeds",THEFILENAME:"ui.fileUpload.fileName",CALCHASH:"ui.fileUpload.calcHash",KIASTATUS:12079,NumberExceed:"ui.fileUpload.numberExceed",notSupport:"ui.fileUpload.notSupport",NOT_SUPPORT_NO_SUFFIX:"ui.fileUpload.notSupportNoSuffix",STATUS_SPECIAL_CHARACTERS:11005,NOT_SUPPORT_SPECIAL_CHARACTERS:"ui.fileUpload.notSupportSpecialCharacters"},IMAGE_TYPE:"image/*",FILE_TYPE:{EXCEL:"xls/xlsx",FILE:"file",PDF:"pdf",PICTURE:"png/jpg/jpeg/gif/svg/webp/bmp/tif/pjp/apng/xbm/jxl/svgz/ico/tiff/jfif/pjpeg/avif",PPT:"ppt/pptx",TEXT:"txt",WORD:"doc/docx",ZIP:"zip/rar/arj/z/jar/lzh",VIDEO:"mp4/m4v/3gp/mpg/flv/f4v/swf/avi/wmv/rmvb/mov/mts/m2t/ogg/webm/mkv",AUDIO:"mp3/aac/ape/flac/wav/wma/amr/mid/pcm"},SOURCE_TYPE:{SOURCE_VIDEO:"video",SOURCE_AUDIO:"audio",SOURCE_PICTURE:"picture"},MODE:{BUBBLE:"bubble"}},kh=Lt({},Ie,{_constants:{type:Object,default:function(){return Cn}},accept:String,action:String,autoUpload:{type:Boolean,default:function(){return!0}},beforeRemove:Function,beforeUpload:Function,data:Object,disabled:Boolean,display:{type:Boolean,default:function(){return!0}},drag:Boolean,dragger:Boolean,edm:{type:Object,default:function(){return{}}},fileIconList:{type:Array,default:function(){return[]}},fileList:{type:Array,default:function(){return[]}},fileSize:{type:[Number,Array],validator:function(t){return Array.isArray(t)?t[0]<t[1]:typeof t=="number"}},fileTitle:{type:String,default:function(){return"\u9644\u4EF6"}},headerShow:{type:Boolean,default:function(){return!0}},headers:{type:Object,default:function(){return{}}},httpRequest:Function,limit:Number,listType:{type:String,default:function(){return"text"},validator:function(t){return!!Cn.LIST_TYPE[t.toUpperCase().replace("-","_")]}},mergeService:{type:Boolean,default:function(){return!1}},multiple:Boolean,name:{type:String,default:function(){return"file"}},openDownloadFile:{type:Boolean,default:function(){return!1}},showFileList:{type:Boolean,default:function(){return!0}},size:String,successStatistics:{type:Boolean,default:function(){return!0}},thumbOption:{type:Object,default:function(){return{popperClass:"",width:270,showDownload:!1,downloadFile:Function,showDel:!1,icon:"icon-attachment",showTooltip:!1}}},type:{type:String,default:function(){return"select"}},uploadIcon:{type:Boolean,default:function(){return!0}},withCredentials:{type:Boolean,default:function(){return!0}},isFolderTitle:{type:Boolean,default:!1},listOption:{type:Object,default:function(){return{showUpdate:!0,showDel:!0}}},maxNameLength:{type:Number,default:20},scale:{type:[Number,String],default:1},showName:{type:Boolean,default:!1},sourceType:{type:String,default:"picture",validator:function(t){return t.split("/").every(function(n){return["picture","video","audio"].includes(n)})}},showTitle:{type:Boolean,default:!0},title:{type:String,default:""},displayOnly:{type:Boolean,default:!1},customClass:[String,Object,Array],hwh5:Object,mode:{type:String,default:"",validator:function(t){return["","bubble"].includes(t)}},cacheToken:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},beforeAddFile:Function,encryptConfig:{type:Object,default:function(){return{enabled:!1,encrypt:!1,watermark:""}}},isHidden:{type:Boolean,default:!1},pasteUpload:{type:Boolean,default:!1},reUploadable:Boolean,reUploadTip:Function}),We=Q({name:de+"FileUpload",props:kh,setup:function(t,n){return Re({props:t,context:n,template:Sh,extend:{ref:"file-upload-inner-template"}})}}),$h="3.12.0";We.install=function(e){e.component(We.name,We)};We.version=$h;const Fh={class:"container-login"},Uh={class:"content"},Lh={class:"login"},Ah={class:"login-form-language"},Dh=En('<div class="login-header" data-v-b157fc0e><div class="login-logo" data-v-b157fc0e><img class="login-logo-img" alt="Tiny Design" src="'+xr+'" data-v-b157fc0e><span class="login-logo-text" data-v-b157fc0e>smart-mqtt \u4F01\u4E1A\u7248</span></div><div class="login-desc" data-v-b157fc0e><h3 data-v-b157fc0e>\u5C0A\u656C\u7684\u7528\u6237\uFF1A</h3><p data-v-b157fc0e>\u611F\u8C22\u60A8\u8D2D\u4E70\u6211\u4EEC\u7684\u8F6F\u4EF6\u4EA7\u54C1\uFF01\u6211\u4EEC\u975E\u5E38\u73CD\u89C6\u60A8\u7684\u652F\u6301\u548C\u4FE1\u4EFB\u3002</p><p data-v-b157fc0e> \u4E3A\u4E86\u786E\u4FDD\u60A8\u80FD\u591F\u5145\u5206\u5229\u7528\u6211\u4EEC\u7684\u8F6F\u4EF6\u529F\u80FD\uFF0C\u5E76\u83B7\u5F97\u5B8C\u6574\u7684\u5546\u4E1A\u6388\u6743\uFF0C\u6211\u4EEC\u5F3A\u70C8\u5EFA\u8BAE\u60A8\u5BFC\u5165\u76F8\u5E94\u7684\u8BB8\u53EF\u8BC1\u6587\u4EF6\u3002\u8FD9\u5C06\u786E\u4FDD\u60A8\u5728\u5408\u6CD5\u8303\u56F4\u5185\u4F7F\u7528\u6211\u4EEC\u7684\u8F6F\u4EF6\uFF0C\u5E76\u4EAB\u53D7\u5230\u6211\u4EEC\u63D0\u4F9B\u7684\u5168\u90E8\u670D\u52A1\u548C\u652F\u6301\u3002</p><p data-v-b157fc0e><b data-v-b157fc0e>\u8BF7\u6CE8\u610F</b>\uFF0C\u5982\u679C\u60A8\u6CA1\u6709\u5BFC\u5165\u8BB8\u53EF\u8BC1\u6587\u4EF6\uFF0C\u60A8\u5C06\u65E0\u6CD5\u83B7\u5F97\u5B8C\u6574\u7684\u5546\u4E1A\u6388\u6743\uFF0C\u5305\u62EC\u4F46\u4E0D\u9650\u4E8E\u8F6F\u4EF6\u66F4\u65B0\u3001\u6280\u672F\u652F\u6301\u3001\u65B0\u529F\u80FD\u53D1\u5E03\u7B49\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u5F3A\u70C8\u5EFA\u8BAE\u60A8\u5C3D\u5FEB\u5BFC\u5165\u8BB8\u53EF\u8BC1\u6587\u4EF6\uFF0C\u4EE5\u786E\u4FDD\u60A8\u7684\u8F6F\u4EF6\u59CB\u7EC8\u4FDD\u6301\u6700\u65B0\u72B6\u6001\uFF0C\u5E76\u4E3A\u60A8\u63D0\u4F9B\u6700\u4F73\u7684\u4F7F\u7528\u4F53\u9A8C\u3002 </p><p data-v-b157fc0e>\u5982\u679C\u60A8\u6709\u4EFB\u4F55\u7591\u95EE\u6216\u9700\u8981\u5E2E\u52A9\uFF0C\u8BF7\u968F\u65F6<a href="//smartboot.tech/service.html" target="_blank" data-v-b157fc0e>\u8054\u7CFB\u6211\u4EEC</a>\uFF0C\u6211\u4EEC\u5C06\u7AED\u8BDA\u4E3A\u60A8\u63D0\u4F9B\u652F\u6301\u548C\u534F\u52A9\u3002 </p><p data-v-b157fc0e>\u518D\u6B21\u611F\u8C22\u60A8\u9009\u62E9\u6211\u4EEC\u7684\u8F6F\u4EF6\u4EA7\u54C1\uFF01\u795D\u60A8\u4F7F\u7528\u6109\u5FEB\uFF01</p></div></div>',1),Oh={class:"footer"},Ph=_r({__name:"index",setup(e){const t=So(),n=Ir(),r=async o=>{console.log(o),Nr({type:"error",title:"\u5BFC\u5165\u5931\u8D25",message:o==null?void 0:o.message,position:"top-right",duration:2e3,customClass:"my-custom-cls"})},i=async o=>{if(console.log(o),o.code===200){const{redirect:l,...a}=n.currentRoute.value.query;n.push({name:l||"Home",query:{...a}})}else await r(o)};return(o,l)=>(p(),w("div",Fh,[h("div",Uh,[h("div",Lh,[h("div",Ah,[_(Be(Ae),{icon:Be(t),round:"",onClick:l[0]||(l[0]=a=>{Be(n).push({name:"login"})})},{default:N(()=>[ae("\u767B\u5F55 ")]),_:1},8,["icon"])]),Dh,_(Be(We),{multiple:!1,name:"license","show-file-list":!1,accept:".shield",action:"/api/license/import",onSuccess:i,onError:r},{trigger:N(()=>[_(Be(Ae),{type:"primary"},{default:N(()=>[ae("\u5BFC\u5165 License")]),_:1})]),_:1})])]),h("div",Oh,[_(zr)])]))}});var Yh=Rr(Ph,[["__scopeId","data-v-b157fc0e"]]);export{Yh as default};
