import{d as I,ac as _,g as o,ae as S,q as z,u as d,w as c,e as a,x as u,G as i,Y as s,A,E,$ as G,a0 as w}from"./vue.faede1ab.js";import{a as N}from"./index.7a89be8a.js";import{_ as P,db as V,a2 as R,cV as U}from"./index.38fe966c.js";import{P as M,C as l,G as O}from"./index.f4afb51e.js";import"./index.c34c2fdc.js";import{G as $}from"./index.e5f3e450.js";import"./ellipsis.8a9d01c4.js";import"./plus.5be04f86.js";import"./index.53652a34.js";import"./index.38fcb1ee.js";const y=r=>(G("data-v-69360aac"),r=r(),w(),r),j={class:"container-list"},q={class:"contain"},H={key:0},L={key:1},Q={key:2},Y=y(()=>u("span",{class:"status-dot"},null,-1)),J={class:"status-text"},K=y(()=>u("div",null,"\u5185\u5BB9\u533A\u57DF",-1)),W=I({__name:"index",setup(r){const p=_({loading:!1}),B=_({component:M,attrs:{currentPage:1,pageSize:10,pageSizes:[10,20],total:10,layout:"total, prev, pager, next, jumper, sizes"}});let f=o([]);const C=o(),{loading:D}=S(p);o([]);const v=o(!1),m=o(!1);async function F(t={pageNo:1,pageSize:10,status:""}){p.loading=!0;try{const{data:e}=await U();return f.value=e,{result:e,page:{total:e.length}}}finally{p.loading=!1}}const T=_({api:({page:t})=>{const{currentPage:e,pageSize:g}=t;return F({pageNo:e,pageSize:g})}});o(!0);const k=({code:t})=>{switch(t){case"showTopology":m.value=!0;break}};o(!1);const h=o();function x(){b.value={columns:["name","value"],rows:[{name:"tree1",value:[{name:"MQTT \u96C6\u7FA4",value:"",children:f.value.filter(t=>t.nodeType==="core").map(t=>({name:t.status==="running"?t.nodeId:"\u79BB\u7EBF",value:t.status==="running"?"":t.nodeId,children:f.value.filter(e=>e.nodeType==="worker"&&e.coreNodeId===t.nodeId).map(e=>({name:e.status==="running"?e.nodeId:"\u79BB\u7EBF",value:e.status==="running"?"":e.nodeId}))}))}]}]},h.value.resize()}const b=o();return(t,e)=>{const g=z("Breadcrumb");return d(),c("div",j,[a(g,{items:["menu.list","menu.list.searchTable"]},null,8,["items"]),u("div",q,[a(s(O),{ref_key:"taskGrid",ref:C,"fetch-data":T,pager:B,loading:s(D),size:"medium","auto-resize":!0,onToolbarButtonClick:k},{toolbar:i(()=>[a(s($),{buttons:[{code:"showTopology",name:"\u96C6\u7FA4\u62D3\u6251"}]})]),default:i(()=>[a(s(l),{field:"nodeId",title:"\u8282\u70B9ID",align:"center"}),a(s(l),{field:"nodeType",title:"\u8282\u70B9\u7C7B\u578B",align:"center"},{default:i(({row:n})=>[n.nodeType==="core"?(d(),c("span",H,"\u6838\u5FC3\u8282\u70B9")):n.nodeType==="worker"?(d(),c("span",L,"\u5DE5\u4F5C\u8282\u70B9")):(d(),c("span",Q,"\u672A\u77E5\u8282\u70B9"))]),_:1}),a(s(l),{field:"clusterEndpoint",title:"\u5185\u90E8\u901A\u4FE1\u5730\u5740",align:"center"}),a(s(l),{field:"status",title:t.$t("searchTable.form.status"),align:"center"},{default:i(({row:n})=>[u("span",{class:A(["status",{"status-closed":n.status==="stopped","status-finished":n.status==="running"}])},[Y,u("span",J,E(n.status),1)],2)]),_:1},8,["title"]),a(s(l),{field:"version",title:"\u7248\u672C\u53F7",align:"center"}),a(s(l),{field:"runtime",title:"\u8FD0\u884C\u65F6\u957F",align:"center"})]),_:1},8,["fetch-data","pager","loading"]),a(s(V),{title:"\u6807\u9898",visible:v.value,"onUpdate:visible":e[0]||(e[0]=n=>v.value=n)},{default:i(()=>[K]),_:1},8,["visible"])]),a(s(R),{visible:m.value,"onUpdate:visible":e[1]||(e[1]=n=>m.value=n),title:"\u96C6\u7FA4\u62D3\u6251",onOpened:x,width:"80%",height:"80%"},{default:i(()=>[a(s(N),{ref_key:"chartRef",ref:h,data:b.value,settings:{seriesMap:{tree1:{top:"10%",left:"18%",bottom:"22%",right:"20%",symbolSize:20,edgeShape:"polyline",edgeForkPosition:"63%",lineStyle:{width:5},label:{backgroundColor:"#fff",position:"left",verticalAlign:"middle",align:"right",fontSize:18},leaves:{label:{position:"right",verticalAlign:"middle",align:"left"}},emphasis:{focus:"descendant"},expandAndCollapse:!0,animationDuration:550,animationDurationUpdate:750}}}},null,8,["data"])]),_:1},8,["visible"])])}}});var ue=P(W,[["__scopeId","data-v-69360aac"]]);export{ue as default};
