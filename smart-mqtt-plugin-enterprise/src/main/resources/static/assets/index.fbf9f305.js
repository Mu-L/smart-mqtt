import{h as he,d as O,i as N,p as ge,a as _,$ as L,b as z,c as Ie,V as xe,l as P,j as ee,q as Ne,G as ze,k as He,m as y,n as Ue,o as Ge,t as Ke,v as Ye,w as Je}from"./index.56824139.js";import{q as E,u as S,w as k,D as A,y as te,F as Qe,z as M,A as h,P as Se,N as Xe,t as Ze,e as $,G as pe,I as et,x as q,J as tt,E as K,H as at,L as lt}from"./vue.637c7bf1.js";const it=({api:e,props:t,state:a})=>(l={},i={})=>{const r=Object.keys(l),s=Object.keys(i).filter(d=>!r.includes(d));e.clearValidate(s),a.fields.forEach(d=>{d.removeValidateEvents(),d.addValidateEvents()}),t.validateOnRuleChange&&e.validate(()=>{})},ot=({state:e})=>()=>{if(!e.potentialLabelWidthArr.length)return"0";const t=Math.max(...e.potentialLabelWidthArr);return t?`${t}px`:""},rt=({props:e,designConfig:t})=>()=>{var a,l,i;return(i=(l=e.hideRequiredAsterisk)!=null?l:(a=t==null?void 0:t.props)==null?void 0:a.hideRequiredAsterisk)!=null?i:!1},nt=({props:e,designConfig:t})=>()=>{var a,l,i;return(i=(l=e.validateIcon)!=null?l:(a=t==null?void 0:t.icons)==null?void 0:a.validateIcon)!=null?i:"icon-error"},st=({props:e,designConfig:t})=>()=>e.messageType?e.messageType==="inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:(t==null?void 0:t.messageType)==="inline",dt=({props:e,designConfig:t})=>()=>e.messageType?e.messageType==="block":t&&Object.hasOwnProperty.call(t,"messageType")?t.messageType==="block":!0,ut=({parent:e,state:t})=>()=>{e.$on("form:addField",a=>{a&&t.fields.push(a)}),e.$on("form:removeField",a=>{a.prop&&t.fields.splice(t.fields.indexOf(a),1)})},pt=({props:e,state:t})=>()=>{!e.model||t.fields.forEach(a=>{a.resetField()})},ft=({props:e,state:t})=>()=>{!e.model||t.fields.forEach(a=>{a.updateTip()})},ct=e=>(t=[])=>{let a;t.length?a=typeof t=="string"?e.fields.filter(l=>t===l.prop):e.fields.filter(l=>l.prop&&t.includes(l.prop)):a=e.fields,a.forEach(l=>{l.clearValidate()})},mt=({props:e,state:t})=>a=>{if(!e.model)return;let l;typeof a!="function"&&window.Promise&&(l=new window.Promise((d,p)=>{a=u=>{u?d(u):p(u)}}));let i=!0,r=0;t.fields.length===0&&a&&a(!0);let o={},s=[];if(t.fields.forEach(d=>{d.validate("",(p,u)=>{if(p&&(i=!1),o=he({},o,u),u&&Object.keys(u).forEach(n=>s.push(n)),typeof a=="function"&&++r===t.fields.length){const n=fe(t.fields,o),c=fe(t.fields,s);a(i,n,c)}})}),l)return l},fe=(e,t)=>{const a=e.map(l=>l.prop);if(Object.prototype.toString.call(t)==="[object Object]")return Object.keys(t).sort((o,s)=>a.indexOf(o)-a.indexOf(s)).reduce((o,s)=>(o[s]=t[s],o),{});if(Array.isArray(t))return t.sort((l,i)=>a.indexOf(l)-a.indexOf(i)),t},vt=e=>(t,a)=>{t=[].concat(t);const l=e.fields.filter(i=>t.includes(i.prop));!l.length||l.forEach(i=>{i.validate("",a)})},yt=e=>t=>{const a=e.potentialLabelWidthArr.indexOf(t);if(a===-1)throw new Error("unpected width ",t);return a},bt=({api:e,state:t})=>(a,l)=>{if(a&&l){const i=e.getLabelWidthIndex(l);t.potentialLabelWidthArr.splice(i,1,a)}else a&&t.potentialLabelWidthArr.push(a)},ht=({api:e,state:t})=>a=>{const l=e.getLabelWidthIndex(a);t.potentialLabelWidthArr.splice(l,1)},gt=({api:e,dialog:t,state:a})=>{let l=()=>{};if(t){const i=(o=!0)=>{o?e.resetFields():e.clearValidate()},r=()=>{a.timer||(a.timer=window.setTimeout(()=>{a.timer=0,e.updateTip()},10))};t.state.emitter.on("boxclose",i),t.state.emitter.on("boxdrag",r),l=()=>{t.state.emitter.off("boxclose",i),t.state.emitter.off("boxdrag",r)}}return l},It=({vm:e,state:t})=>(a,l)=>{const i=e.$refs.tooltip;i.state.referenceElm=a,i.state.popperElm&&(i.state.popperElm.style.display="none"),i.doDestroy(),t.tooltipVisible=!0,t.displayedValue=l,setTimeout(i.updatePopper,20)},St=({state:e})=>()=>{e.tooltipVisible=!1},we=["state","resetFields","clearValidate","validate","validateField","getLabelWidthIndex","registerLabelWidth","deregisterLabelWidth","updateTip","showTooltip","hideTooltip"],Te=(e,{computed:t,inject:a,provide:l,reactive:i,watch:r,onBeforeUnmount:o},{vm:s,parent:d,designConfig:p})=>{const u={},n=a("dialog",null),c=i({showAutoWidth:e.showAutoWidth,fields:[],timer:0,tooltipVisible:!1,displayedValue:"",potentialLabelWidthArr:[],autoLabelWidth:t(()=>u.computedAutoLabelWidth()),hideRequiredAsterisk:t(()=>u.computedHideRequiredAsterisk()),validateIcon:t(()=>u.computedValidateIcon()),isErrorInline:t(()=>u.computedIsErrorInline()),isErrorBlock:t(()=>u.computedIsErrorBlock()),isDisplayOnly:t(()=>e.displayOnly),hasRequired:t(()=>e.rules?Object.values(e.rules).find(m=>Array.isArray(m)?m.some(V=>V.required):m.required):!1),labelWidth:t(()=>{var m;return e.labelWidth||((m=p==null?void 0:p.state)==null?void 0:m.labelWidth)||"84px"}),tooltipType:t(()=>{var m;return((m=p==null?void 0:p.state)==null?void 0:m.tooltipType)||"normal"})});Object.assign(u,{state:c,updateTip:ft({props:e,state:c}),computedAutoLabelWidth:ot({state:c}),computedHideRequiredAsterisk:rt({props:e,designConfig:p}),computedValidateIcon:nt({props:e,designConfig:p}),computedIsErrorInline:st({props:e,designConfig:p}),computedIsErrorBlock:dt({props:e,designConfig:p}),created:ut({parent:d,state:c}),resetFields:pt({props:e,state:c}),clearValidate:ct(c),validate:mt({props:e,state:c}),validateField:vt(c),getLabelWidthIndex:yt(c),registerLabelWidth:bt({api:u,state:c}),deregisterLabelWidth:ht({api:u,state:c}),watchRules:it({api:u,props:e,state:c}),showTooltip:It({vm:s,state:c}),hideTooltip:St({state:c})}),u.created(),l("form",d),l("showAutoWidth",c.showAutoWidth);const I=gt({api:u,dialog:n,state:c});return o(I),r(()=>e.rules,u.watchRules,{deep:e.validateOnRuleChange==="deep"}),u};function wt(e,t){var a=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=Tt(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tt(e,t){if(e){if(typeof e=="string")return ce(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ce(e,t):void 0}}function ce(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var Mt=function(t,a){for(var l=t.__vccOpts||t,i=wt(a),r;!(r=i()).done;){var o=r.value,s=o[0],d=o[1];l[s]=d}return l},Ot=O({components:{TinyTooltip:N},props:[].concat(ge,["validateOnRuleChange","hideRequiredAsterisk","model","rules","inlineMessage","messageType","statusIcon","labelPosition","labelAlign","showMessage","size","disabled","labelWidth","contentOffset","labelSuffix","inline","responsiveLayout","validateType","validateIcon","manual","appendToBody","popperOptions","displayOnly","showAutoWidth","showEmptyValue","validateTag","overflowTitle","tooltipConfig"]),setup:function(t,a){return _({props:t,context:a,renderless:Te,api:we})}});function Vt(e,t,a,l,i,r){var o=E("tiny-tooltip");return S(),k("form",{class:h(["tiny-form",[e.labelPosition?"tiny-form--label-"+e.labelPosition:"",{"tiny-form--inline":e.inline},{"label-align":e.labelAlign},{"has-required":e.state.hasRequired},{"asterisk-form":e.labelPosition==="top"&&!e.state.hideRequiredAsterisk},{"is-display-only":e.state.isDisplayOnly}]]),onSubmit:t[1]||(t[1]=Se(function(){},["prevent"]))},[A(e.$slots,"default"),e.overflowTitle?(S(),te(o,Qe({key:0,ref:"tooltip",modelValue:e.state.tooltipVisible,"onUpdate:modelValue":t[0]||(t[0]=function(s){return e.state.tooltipVisible=s})},e.tooltipConfig,{manual:!0,effect:e.tooltipConfig.effect||"light",content:e.state.displayedValue,placement:e.tooltipConfig.placement||"top"}),null,16,["modelValue","effect","content","placement"])):M("v-if",!0)],34)}var me=Mt(Ot,[["render",Vt]]);function At(e,t){var a=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=$t(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,t){if(e){if(typeof e=="string")return ve(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ve(e,t):void 0}}function ve(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var Ft=function(t,a){for(var l=t.__vccOpts||t,i=At(a),r;!(r=i()).done;){var o=r.value,s=o[0],d=o[1];l[s]=d}return l},Wt=O({components:{TinyTooltip:N},provide:function(){return{TinyMode:"mobile-first"}},props:[].concat(ge,["validateOnRuleChange","hideRequiredAsterisk","model","rules","inlineMessage","messageType","statusIcon","labelPosition","showMessage","size","disabled","labelWidth","contentOffset","labelSuffix","inline","responsiveLayout","validateType","validateIcon","manual","appendToBody","popperOptions","displayOnly","showEmptyValue","tooltipConfig"]),setup:function(t,a){return _({props:t,context:a,renderless:Te,api:we})}});function Bt(e,t,a,l,i,r){var o=E("tiny-tooltip");return S(),k("form",{"data-tag":"tiny-form",class:h(["w-full overflow-hidden",{"overflow-x-visible":e.labelPosition==="top"&&!e.hideRequiredAsterisk,"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":e.inline}]),onSubmit:t[1]||(t[1]=Se(function(){},["prevent"]))},[A(e.$slots,"default"),e.displayOnly?(S(),te(o,{key:0,ref:"tooltip",modelValue:e.state.tooltipVisible,"onUpdate:modelValue":t[0]||(t[0]=function(s){return e.state.tooltipVisible=s}),"popper-class":e.tooltipConfig.popperClass||"absolute",manual:!0,effect:e.tooltipConfig.effect||"light",content:e.state.displayedValue,placement:e.tooltipConfig.placement||"top"},null,8,["modelValue","popper-class","effect","content","placement"])):M("v-if",!0)],34)}var Et=Ft(Wt,[["render",Bt]]);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},J.apply(null,arguments)}var kt=function(t){var a,l=typeof process=="object"?(a={})==null?void 0:a.TINY_MODE:null;return(l||t)==="pc"?me:(l||t)==="mobile-first"?Et:me},_t=J({},L,{model:Object,rules:Object,inlineMessage:{type:Boolean,default:void 0},messageType:String,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validatePosition:{type:String,default:"right"},size:String,disabled:Boolean,validateOnRuleChange:{type:[Boolean,String],validator:function(t){return typeof t=="boolean"||["deep"].includes(t)},default:!0},hideRequiredAsterisk:{type:Boolean,default:void 0},labelPosition:{type:String,default:"right",validator:function(t){return["left","top","right"].includes(t)}},labelWidth:{type:String,default:""},labelAlign:{type:Boolean,default:!1},contentOffset:Number,labelSuffix:{type:String,default:""},inline:{type:Boolean,default:!1},responsiveLayout:{type:Boolean,default:!1},validateType:{type:String,default:"tip",validator:function(t){return Boolean(~["tip","text"].indexOf(t))}},validateIcon:Object,manual:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:void 0},popperOptions:{type:Object,default:function(){return{}}},displayOnly:{type:Boolean,default:!1},showAutoWidth:{type:Boolean,default:!1},showEmptyValue:{type:Boolean,default:!0},validateTag:{type:Boolean,default:!1},overflowTitle:{type:Boolean,default:!1},wrapFragment:{type:String,default:"div"},tooltipConfig:{type:Object,default:function(){return{}}}}),D=O({name:z+"Form",componentName:"Form",props:_t,setup:function(t,a){return Ie({props:t,context:a,template:kt})}}),Lt="3.undefined";D.install=function(e){e.component(D.name,D)};D.version=Lt;const Ct=e=>t=>{!xe(t)&&e.getValidateType==="tip"&&(e.canShowTip=!0),e.validateMessage=t,e.validateState=t?P.Error:""},Rt=e=>t=>{e.validateState=t},jt=({props:e,state:t})=>()=>e.validateType||(t.formInstance?t.formInstance.validateType:""),qt=({props:e,state:t})=>()=>{var a,l,i,r;return(r=(i=e.validateIcon)!=null?i:(l=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:l.validateIcon)!=null?r:null},Pt=({props:e,state:t})=>()=>{var a,l,i;return e.messageType?e.messageType==="inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:(i=(l=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:l.isErrorInline)!=null?i:!1},Dt=({props:e,state:t})=>()=>{var a,l,i;return e.messageType?e.messageType==="block":(i=(l=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:l.isErrorBlock)!=null?i:!1},xt=({props:e,state:t})=>()=>{const a={width:""};if(t.form.labelPosition===ee.Top)return a;const l=e.labelWidth||t.form.state.labelWidth;return l&&(a.width=l),a},Nt=({props:e,state:t})=>()=>{const a={width:""};if(t.form.labelPosition===ee.Top)return a.width="100%",a;const l=e.labelWidth||t.form.state.labelWidth;return l&&(l==="auto"?a.width=l:a.width=`calc(100% - ${l})`),a},zt=({props:e,state:t})=>()=>{const a={},l=e.label;if(t.form.labelPosition===ee.Top||t.form.inline||!l&&!e.labelWidth&&t.isNested)return a;const i=e.labelWidth||t.form.state.labelWidth;return i==="auto"?e.labelWidth==="auto"?a.marginLeft=t.computedLabelWidth:t.form.state.labelWidth==="auto"&&(a.marginLeft=t.formInstance.state.autoLabelWidth):a.marginLeft=i,a},Ht=({constants:e,vm:t,state:a})=>()=>{var l,i,r;const{FORM_NAME:o,FORM_ITEM_NAME:s}=e;let d=(l=t.$parent)==null?void 0:l.$parent,p=(i=d==null?void 0:d.$options)==null?void 0:i.componentName;for(;d&&p!==o;)p===s&&(a.isNested=!0),d=d==null?void 0:d.$parent,p=(r=d==null?void 0:d.$options)==null?void 0:r.componentName;return d},Ut=({api:e,state:t})=>()=>{if(t.validationRequired)return!0;let a=e.getRules(),l=!1;return a&&a.length&&a.every(i=>i.required?(l=!0,!1):!0),l},ae=(e,t,a)=>{let l=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");let i=0,r=t.split(".");for(let o=r.length;i<o-1&&!(!l&&!a);++i){let s=r[i];if(l&&s in l)l=l[s];else{if(a)throw new Error("[Tiny Form] please transfer a valid prop path to form item!");break}}return{o:l,k:r[i],v:l?l[r[i]]:null}},Gt=({props:e,state:t})=>()=>{const a=t.form.model;if(!a||!e.prop)return;let l=e.prop;return l.includes(":")&&(l=l.replace(/:/,".")),ae(a,l,!0).v},Kt=({api:e,vm:t,props:a,state:l})=>()=>{const i=t.$refs.tooltip;if(i){const r=t.$refs.content;i.state.referenceElm=l.isMultiple?r:r==null?void 0:r.children[0],l.tooltip=i}if(a.prop){e.dispatch("Form","form:addField",t);let r=l.fieldValue;Array.isArray(r)&&(r=[].concat(r)),l.initialValue=r,e.addValidateEvents()}},Yt=({api:e,vm:t,state:a})=>()=>{a.canShowTip=!1,e.dispatch("Form","form:removeField",t),e.removeValidateEvents()},Jt=({api:e,props:t,state:a,t:l})=>(i,r=()=>{})=>{a.validateDisabled=!1;const o=e.getFilteredRule(i);if((!o||o.length===0)&&t.required===void 0||t.validateDisabled){r();return}a.validateState=P.Validating;const s={};o&&o.length>0&&o.forEach(u=>{delete u.trigger}),s[t.prop||""]=o;const d=new Ne(s,l),p={};p[t.prop||""]=a.fieldValue,d.validate(p,{firstFields:!0},(u,n)=>{e.clearValidate(),(()=>{a.validateState=u?P.Error:P.Success,u&&t.error&&(u[0].message=t.error),a.validateMessage=u?u[0].message:"",a.canShowTip=Boolean(u),r(a.validateMessage,n),a.formInstance&&a.formInstance.$emit("validate",t.prop,!u,a.validateMessage||null)})()})},Qt=e=>()=>{e.validateState="",e.validateMessage="",e.validateDisabled=!1},Xt=({api:e,nextTick:t,props:a,state:l})=>()=>{l.getValidateType==="tip"&&(l.canShowTip=!1),l.validateState="",l.validateMessage="";let i=l.form.model||{},r=l.fieldValue,o=a.prop||"";o&&o.includes(":")&&(o=o.replace(/:/,"."));let s=ae(i,o,!0);l.validateDisabled=!0,Array.isArray(r)?s.o[s.k]=[].concat(l.initialValue):s.o[s.k]=l.initialValue,t(()=>{l.validateDisabled=!1}),setTimeout(()=>l.validateState&&(l.validateState="")),e.broadcast("timeSelect","fieldReset",l.initialValue)},Zt=({props:e,state:t})=>()=>{let a=t.form.rules||{};const l=e.rules,i=e.required!==void 0?{required:Boolean(e.required)}:[],r=ae(a,e.prop||"");return a=a?r.o[e.prop||""]||r.v:[],[].concat(l||a||[]).concat(i)},ea=e=>t=>e.getRules().filter(l=>!l.trigger||t===""?!0:Array.isArray(l.trigger)?l.trigger.includes(t):l.trigger===t).map(l=>he({},l)),ta=e=>()=>{e.validate("blur")},aa=({api:e,state:t})=>()=>{if(t.validateDisabled){t.validateDisabled=!1;return}e.validate("change")},la=e=>t=>{e.computedLabelWidth=t?`${t}px`:""},ia=({api:e,vm:t,props:a,state:l})=>()=>{(e.getRules().length||a.required!==void 0)&&(a.manual||(l.formInstance?l.formInstance.manual:!1)||(t.$on("form.blur",e.onFieldBlur),t.$on("form.change",e.onFieldChange)))},oa=e=>()=>{e.$off("form.blur"),e.$off("form.change"),e.$off("displayed-value-changed")},ra=({vm:e,state:t})=>()=>{if(t.getValidateType!=="tip"&&!t.canShowTip)return;const a=e.$refs.tooltip;!a||a.updatePopper()},na=({validateFunc:e,props:t})=>t.validateDebounce?ze(500,e):e,sa=({state:e})=>t=>{if(!e.isDisplayOnly||!e.typeName||!e.form)return;const a=t.target,l=a.textContent,i=window.getComputedStyle(a).font,r=a.getBoundingClientRect();let o={},s=!1;["text","password","number"].includes(e.typeName)&&(o=He(l,i,r.width)),e.typeName==="textarea"&&a&&a.scrollHeight>a.offsetHeight&&(s=!0),(o.o||s)&&e.form.showTooltip(a,e.displayedValue)},da=({props:e,state:t,slots:a})=>l=>{if(!t.form.overflowTitle||!t.form||a.label)return;const i=l.target;i&&i.scrollWidth>i.offsetWidth&&t.form.showTooltip(i,e.label+t.form.labelSuffix)},ua=e=>()=>{e.form&&e.form.hideTooltip()},pa=({state:e})=>t=>{!e.formInstance.displayOnly||(e.typeName=t.type,e.isBasicComp=!0,e.displayedValue=t.val)},fa=({state:e})=>()=>{e.typeName="",e.isBasicComp=!1,e.displayedValue=""},Me=["state","validate","clearValidate","resetField","getRules","getFilteredRule","onFieldBlur","onFieldChange","updateComputedLabelWidth","addValidateEvents","removeValidateEvents","updateTip","getDisplayedValue","handleLabelMouseenter","handleMouseenter","handleMouseleave"],ca=({reactive:e,computed:t,api:a,mode:l,inject:i,props:r})=>{const o=e({mode:l,validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:"",initialValue:null,canShowTip:!1,validationRequired:!1,validateType:"text",tooltip:"",displayedValue:"",isBasicComp:!1,showTooltip:!1,typeName:"",formInstance:i("form"),labelFor:t(()=>r.for||r.prop||""),labelStyle:t(()=>a.computedLabelStyle()),valueStyle:t(()=>a.computedValueStyle()),contentStyle:t(()=>a.computedContentStyle()),form:t(()=>a.computedForm()),fieldValue:t(()=>a.computedFieldValue()),isRequired:t(()=>a.computedIsRequired()),formInline:t(()=>o.formInstance.inline),formSize:t(()=>o.formInstance.size),formItemSize:t(()=>r.size||o.formSize),isDisplayOnly:t(()=>o.formInstance.displayOnly),labelPosition:t(()=>o.formInstance.labelPosition),hideRequiredAsterisk:t(()=>o.formInstance.state.hideRequiredAsterisk),labelSuffix:t(()=>o.formInstance.labelSuffix),labelWidth:t(()=>o.formInstance.labelWidth),showMessage:t(()=>o.formInstance.showMessage),sizeClass:t(()=>o.formItemSize),getValidateType:t(()=>a.computedGetValidateType()),validateIcon:t(()=>a.computedValidateIcon()),isErrorInline:t(()=>a.computedIsErrorInline()),isErrorBlock:t(()=>a.computedIsErrorBlock()),disabled:t(()=>o.formInstance.disabled),tooltipType:t(()=>o.formInstance.state.tooltipType),isMultiple:!1});return o},ma=({api:e,state:t,dispatch:a,broadcast:l,props:i,constants:r,vm:o,t:s,nextTick:d,slots:p})=>{Object.assign(e,{state:t,dispatch:a,broadcast:l,watchError:Ct(t),updateTip:ra({vm:o,state:t}),watchValidateStatus:Rt(t),computedLabelStyle:xt({props:i,state:t}),computedValueStyle:Nt({props:i,state:t}),computedContentStyle:zt({props:i,state:t}),computedForm:Ht({constants:r,vm:o,state:t}),computedFieldValue:Gt({props:i,state:t}),computedGetValidateType:jt({props:i,state:t}),computedValidateIcon:qt({props:i,state:t}),computedIsErrorInline:Pt({props:i,state:t}),computedIsErrorBlock:Dt({props:i,state:t}),clearValidate:Qt(t),getRules:Zt({props:i,state:t}),updateComputedLabelWidth:la(t),removeValidateEvents:oa(o),unmounted:Yt({api:e,vm:o,state:t}),mounted:Kt({api:e,vm:o,props:i,state:t}),computedIsRequired:Ut({api:e,state:t}),resetField:Xt({api:e,nextTick:d,props:i,state:t}),getFilteredRule:ea(e),onFieldBlur:ta(e),onFieldChange:aa({api:e,state:t}),addValidateEvents:ia({api:e,vm:o,props:i,state:t}),validate:na({validateFunc:Jt({api:e,props:i,state:t,t:s}),props:i}),getDisplayedValue:pa({state:t}),clearDisplayedValue:fa({state:t}),handleLabelMouseenter:da({props:i,state:t,slots:p}),handleMouseenter:sa({state:t}),handleMouseleave:ua(t)})},va=({watch:e,api:t,props:a,state:l})=>{e(()=>a.error,t.watchError,{immediate:!0}),e(()=>a.validateStatus,t.watchValidateStatus),e(()=>l.formInstance.displayOnly,t.clearDisplayedValue)},Oe=(e,{computed:t,inject:a,onMounted:l,onUnmounted:i,provide:r,reactive:o,watch:s},{vm:d,constants:p,t:u,nextTick:n,broadcast:c,dispatch:I,mode:m,slots:V})=>{const g={},C=ca({reactive:o,computed:t,api:g,mode:m,inject:a,props:e});return r("formItem",d),ma({api:g,state:C,dispatch:I,broadcast:c,props:e,constants:p,vm:d,t:u,nextTick:n,slots:V}),va({watch:s,api:g,props:e,state:C}),l(g.mounted),d.$on("displayed-value-changed",H=>{g.getDisplayedValue(H)}),i(g.unmounted),g};function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},Q.apply(null,arguments)}var Ve=O({props:Q({},L,{isAutoWidth:Boolean,updateAll:Boolean,isMobile:Boolean,isMobileFirst:Boolean}),inject:["form","formItem"],render:function(){var t=this.slots.default&&this.slots.default(),a=this.isMobile?"tiny-mobile-":"tiny-";if(!t)return null;if(this.isAutoWidth){var l=this.form.autoLabelWidth,i={};if(l&&l!=="auto"){var r=parseInt(l,10)-this.computedWidth;r&&(i.marginLeft=r+"px")}return y("div",{class:this.isMobileFirst?"float-left":a+"form-item_label-wrap",style:i},t)}else return t[0]},methods:{getLabelWidth:function(){var t=function(i){return window.getComputedStyle(i).width},a=function(i){return Math.ceil(parseFloat(i))};return!this.$el||!this.$el.firstElementChild?0:a(t(this.$el.firstElementChild))},updateLabelWidth:function(t){var a=this;if(t===void 0&&(t="update"),!(!this.$slots.default||!this.isAutoWidth||!this.$el.firstElementChild)){var l=function(){return a.computedWidth=a.getLabelWidth()},i=function(){return a.form.deregisterLabelWidth(a.computedWidth)};t==="update"?l():t==="remove"&&i()}}},watch:{computedWidth:function(t,a){this.updateAll&&(this.form.registerLabelWidth(t,a),this.formItem.updateComputedLabelWidth(t))}},setup:function(t,a){var l=function(o,s,d){var p=s.onMounted,u=s.onUpdated,n=s.onBeforeUnmount,c=d.vm;return p(function(){return c.updateLabelWidth("update")}),u(function(){return c.updateLabelWidth("update")}),n(function(){return c.updateLabelWidth("remove")}),{computedWidth:0}},i=["computedWidth"];return _({props:t,context:a,renderless:l,api:i})}});function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},x.apply(null,arguments)}var ya={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},ye=O({name:z+"FormItem",componentName:"FormItem",components:{LabelWrap:Ve,Tooltip:N,IconError:Ue()},props:x({},L,{_constants:{type:Object,default:function(){return ya}},appendToBody:{type:Boolean,default:void 0},error:String,for:String,inlineMessage:{type:Boolean,default:void 0},messageType:String,label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String,validateIcon:{type:Object,default:null},ellipsis:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},extra:String}),setup:function(t,a){return _({props:t,context:a,renderless:Oe,api:Me})},render:function(){var t,a,l,i,r=this,o,s,d,p,u,n=this.state,c=this.required,I=this.slots,m=this.label,V=this.scopedSlots,g=this.showMessage;this.inlineMessage;var C=this.ellipsis,H=this.vertical,Ae=this.handleLabelMouseenter,$e=this.handleMouseleave,R=n.validateIcon,Fe=n.isErrorInline,We=n.isErrorBlock,Be=n.tooltipType,b=n.mode==="mobile",v=b?"tiny-mobile-":"tiny-",le=I.label?I.label():null,ie=I.default?I.default():null,U=V.error&&V.error(n.validateMessage),Ee=v+"form-item--"+(n.sizeClass?n.sizeClass:"default"),oe=n.validateState==="error"&&g&&n.form.showMessage;(t=n.formInstance)==null||t.validateTag;var re=(a=n.formInstance)==null?void 0:a.wrapFragment,ne,se=(l=n.formInstance)==null?void 0:l.appendToBody,de=typeof this.appendToBody=="boolean"?this.appendToBody:typeof se=="boolean"?se:!0,ke=this.validatePosition||((i=n.formInstance)==null?void 0:i.validatePosition)||"top-end",_e=x({},n.formInstance.popperOptions,this.popperOptions,{forceAbsolute:!de,onUpdate:function(f){var j=f.instance._popper,B=j.style.transform,w=B.match(/translate3d\((\w+)px, (\w+)px, (\w+)px\)/);if(!!Array.isArray(w)){var T=w.slice(1),G=T[0],Pe=T[1],De=T[2];j.style.transform="translate3d("+G+"px, "+parseInt(Pe,10)+"px, "+De+"px)"}}}),Le=R?y(R,{class:"tooltip-validate-icon"}):null,F=ie?ie.map(function(W){var f=Ye(W);f.props=f.props||{};var j=f,B=j.type;if(f.dynamicProps=f.dynamicProps||[],f.dynamicProps.includes("size")||f.dynamicProps.push("size"),Object.assign(f.props,{size:n.formItemSize,mini:n.formItemSize==="mini"||Boolean(f.props.mini)}),B&&B.name&&B.name.toLowerCase().endsWith("button"))return f;var w=f.props;if(w&&(n.isRequired||(n.validationRequired=w.validation&&!!w.validation.required),w.validation))return f;if(b)return y("div",{class:v+"form-item__value",style:n.valueStyle},[f]);f.type===Xe?re&&(f=y(re,[f])):f.type===Ze&&(f=y("span",[f]));var T;f.props||(f.props={}),T=f.props;var G="tiny-tooltip "+Ge(T.class);return T.class=Ke(G),f}):null;n.isMultiple=(F==null?void 0:F.length)>1;var Ce=function(){if(b){var f=r.validatePosition||n.formInstance.validatePosition||"right";return ne=n.validateMessage?f==="right"?$("div",{class:"tiny-mobile-input-form__error align-right"},[n.validateMessage]):$("div",{class:"tiny-mobile-input-form__error align-left"},[n.validateMessage]):null,F}return F},Re=F?Ce():null,je=oe&&n.getValidateType==="text"?U||y("div",{class:(o={},o[v+"form-item__error"]=!0,o[v+"form-item__error--inline"]=Fe,o[v+"form-item__error--block"]=We,o),attrs:{title:[n.validateMessage]}},[R?y(R,{class:"validate-icon"}):null,$("span",{class:v+"form-item__validate-message"},[n.validateMessage])]):null,ue=y("label-wrap",{props:{isAutoWidth:n.labelStyle&&n.labelStyle.width==="auto",updateAll:n.form.labelWidth==="auto",isMobile:n.mode==="mobile"}},[le||m?y("label",{class:(s={},s[v+"form-item__label"]=!0,s["is-ellipsis"]=b&&C,s),style:n.labelStyle,attrs:{for:n.labelFor},on:{mouseenter:Ae,mouseleave:$e}},le||m+n.form.labelSuffix):null]),qe=this.extra?y("div",{class:(d={},d[v+"form-item__extra-tip"]=!0,d)},this.extra):null;return y("div",{class:(p={},p[v+"form-item"]=!0,p[v+"form-item--feedback"]=n.formInstance&&n.formInstance.statusIcon,p["is-error"]=n.validateState==="error",p["is-text"]=n.getValidateType==="text",p["is-validating"]=n.validateState==="validating",p["is-success"]=n.validateState==="success",p["is-required"]=n.isRequired||c,p["is-no-asterisk"]=n.hideRequiredAsterisk,p[Ee]=!0,p)},[b?null:ue,this.showMessage&&!b&&y("tooltip",{props:{popperClass:v+"form__valid",arrowOffset:0,adjustArrow:!0,type:Be,disabled:n.getValidateType!=="tip",placement:ke,manual:!0,appendToBody:de,popperOptions:_e,modelValue:oe?n.canShowTip:!1,zIndex:"relative",renderContent:function(){var f;return U?f=[U]:f=[Le,$("span",{class:v+"form-item__validate-message"},[n.validateMessage])],f}},on:{"update:modelValue":function(f){n.canShowTip=f}},ref:"tooltip"}),y("div",{class:(u={},u[v+"form-item__content"]=!0,u["is-vertical"]=b&&H,u),style:!b&&n.contentStyle,ref:"content"},[b?ue:null,Re,b?ne:null,y("transition",{attrs:{name:v+"zoom-in-top"}},[je]),b?null:qe])])}});function ba(e,t){var a=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=ha(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ha(e,t){if(e){if(typeof e=="string")return be(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?be(e,t):void 0}}function be(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var ga=function(t,a){for(var l=t.__vccOpts||t,i=ba(a),r;!(r=i()).done;){var o=r.value,s=o[0],d=o[1];l[s]=d}return l};function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},X.apply(null,arguments)}var Ia={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},Sa=O({name:z+"FormItem",componentName:"FormItem",components:{LabelWrap:Ve,TinyTooltip:N,IconHelpCircle:Je()},props:X({},L,{_constants:{type:Object,default:function(){return Ia}},appendToBody:{type:Boolean,default:void 0},error:String,for:String,inlineMessage:{type:[String,Boolean],default:""},label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,tipContent:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String}),setup:function(t,a){return _({props:t,context:a,renderless:Oe,api:Me})}}),wa=["for"],Ta=["type-name"],Ma=["title"];function Oa(e,t,a,l,i,r){var o=E("icon-help-circle"),s=E("tiny-tooltip"),d=E("label-wrap");return S(),k("div",{"data-tag":"tiny-form-item",class:h(e.m("flex min-h-[theme(spacing.12)] sm:min-h-[theme(spacing.7)] mb-0 p-0 sm:mb-4 box-border after:content-[''] after:table after:clear-both before:content-['']  before:table border-b-0.5 border-color-border-separator sm:border-none",e.state.validateState==="error"&&e.state.validateType==="text"?"mb-0 sm:mb-5":"",e.state.formInline?"align-sub":"",e.state.labelPosition==="top"?"block mb-4":"",e.state.validateState==="error"?"[&_.tiny-range-editor]:border-color-error [&_[data-tag~=tiny-range-editor]]:border-color-error [&_[data-tag=tiny-numeric-main]]:border-color-error [&_input]:border-color-error [&_textarea]:border-color-error [&_input:focus]:border-color-error [&_input:hover]:border-color-error [&_textarea:focus]:border-color-error [&_textarea:hover]:border-color-error":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?"pl-0":"",!e.slots.label&&!e.label?"border-none":"",e.state.isDisplayOnly?"border-none py-0.5":""))},[$(d,{"is-auto-width":e.state.labelStyle&&e.state.labelStyle.width==="auto","update-all":e.state.labelWidth==="auto","is-mobile-first":!0},{default:pe(function(){return[e.slots.label||e.label?(S(),k("label",{key:0,"data-tag":"tiny-item-label",class:h(e.m("py-3 sm:py-1.5 sm:min-h-[theme(spacing.7)] relative align-bottom float-left text-sm pr-3 sm:pr-4 box-border leading-5 shrink-0","overflow-hidden text-ellipsis",e.state.labelPosition==="top"?"float-none inline-block text-left sm:text-left leading-none px-0 pt-0 pb-1.5 h-auto min-h-0 sm:py-0 sm:pb-1 sm:min-h-[theme(spacing.0)]":"min-h-[theme(spacing.9)]",e.state.labelPosition==="right"?"text-right sm:text-right":"",e.state.labelPosition==="left"?"text-left sm:text-left":"",e.state.formInline&&e.state.labelPosition==="top"?"block":"",e.state.isDisplayOnly?"leading-none h-auto align-[inherit] pr-4":"",e.tipContent?"pr-5 sm:pr-7":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?"overflow-visible relative before:absolute before:-left-2.5":"",e.state.disabled?"text-color-icon-placeholder sm:text-color-text-secondary":"text-color-text-secondary",e.state.formItemSize!=="mini"?"sm:text-sm":"sm:text-xs")),style:et(e.state.labelStyle),for:e.state.labelFor},[q("span",{class:h(e.m("max-h-[theme(spacing.10)] line-clamp-2 inline-block relative top-px leading-normal",(e.state.isRequired||e.required)&&!e.state.hideRequiredAsterisk?"before:content-['*'] before:text-color-error before:relative before:mr-1":"",e.state.isDisplayOnly?"pl-0 before:hidden":""))},[A(e.$slots,"label",{},function(){return[tt(K(e.label+e.state.labelSuffix),1)]})],2),e.tipContent?(S(),te(s,{key:0,effect:"light",content:e.tipContent,placement:"top"},{default:pe(function(){return[$(o,{"custom-class":"h-4 w-4 ml-0.5 absolute right-1 sm:right-2 align-text-bottom fill-color-text-secondary",class:h([e.state.labelPosition==="top"?"top-0.5 sm:top-1.5":"top-3.5 sm:top-1.5"])},null,8,["class"])]}),_:1},8,["content"])):M("v-if",!0)],14,wa)):M("v-if",!0)]}),_:3},8,["is-auto-width","update-all"]),q("div",{"data-tag":"tiny-form-item-inline",class:h(e.m("min-w-0 flex-1 m-0 sm:m-auto relative sm:pt-0 sm:top-auto text-sm after:content-['']  after:table after:clear-both before:content-['']  before:table [&_button:not(:last-child)]:mr-2","[&_[data-tag=tiny-checkbox]]:py-0 [&_[data-tag=tiny-input]]:w-full","[&_[data-tag=tiny-input]_textarea]:px-0 sm:[&_[data-tag=tiny-input]_textarea]:px-3 [&_[data-tag=tiny-input]_textarea]:w-full [&_[data-tag=tiny-input]_textarea]:pt-1 sm:[&_[data-tag=tiny-input]_textarea]:pt-2",e.state.formInline?"align-sub leading-none":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?e.state.isDisplayOnly?"pl-0":"pl-2 sm:pl-0":"pt-2",e.state.formItemSize!=="mini"?"sm:text-sm":"sm:text-xs"))},[e.state.isDisplayOnly&&e.state.isBasicComp?(S(),k("div",{key:0,"data-tag":"tiny-form-item-display-only",class:h(["break-all min-h-[28px] leading-7 text-color-text-primary",e.state.typeName==="textarea"?"line-clamp-3":"line-clamp-1"]),"type-name":e.state.typeName,onMouseenter:t[0]||(t[0]=function(){return e.handleMouseenter&&e.handleMouseenter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.handleMouseleave&&e.handleMouseleave.apply(e,arguments)})},K(e.state.displayedValue||"-"),43,Ta)):M("v-if",!0),at(q("div",{"data-tag":"tiny-form-item-show",class:h(["[&_[aria-label=checkbox-group]]:pl-0.5 sm:[&_[aria-label=checkbox-group]]:pl-0","[&_>:first-child[data-tag=tiny-checkbox]]:pl-0.5 sm:[&_>:first-child[data-tag=tiny-checkbox]]:pl-0","[&_[class^=tiny-autocomplete]]:w-full","[&_[class^=tiny-cascader]]:w-full",e.state.isDisplayOnly?"[&_>*:not([data-tag^=tiny-],[class^=tiny-])]:leading-8 [&_>*:not([data-tag^=tiny-],[class^=tiny-])]:sm:leading-normal":""])},[A(e.$slots,"default")],2),[[lt,!(e.state.isDisplayOnly&&e.state.isBasicComp)]]),e.state.validateState==="error"&&e.showMessage&&e.state.showMessage?A(e.$slots,"error",{key:1,dataTag:"tiny-form-item-error"},function(){return[q("div",{class:h(e.m("relative sm:absolute left-0 bottom-1 sm:-bottom-5 text-color-error text-xs leading-normal line-clamp-3 sm:line-clamp-1 break-all",typeof e.inlineMessage=="boolean"&&e.inlineMessage||e.state.inlineMessage?"relative top-auto left-auto inline-block":"",e.state.formItemSize==="small"?"pt-0.5":"",e.state.formItemSize==="mini"?"pt-px":"")),title:e.state.validateMessage},K(e.state.validateMessage),11,Ma)]}):M("v-if",!0),e.state.validateState!=="error"&&e.showMessage&&e.state.showMessage?A(e.$slots,"prompt",{key:2}):M("v-if",!0)],2)],2)}var Va=ga(Sa,[["render",Oa]]);function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},Z.apply(null,arguments)}var Aa=function(t){var a,l=typeof process=="object"?(a={})==null?void 0:a.TINY_MODE:null;return(l||t)==="pc"?ye:(l||t)==="mobile-first"?Va:ye},$a={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},Fa=Z({},L,{_constants:{type:Object,default:function(){return $a}},appendToBody:{type:Boolean,default:void 0},error:{type:String,default:""},for:String,inlineMessage:{type:Boolean,default:void 0},messageType:String,label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,tipContent:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String,validateIcon:Object,ellipsis:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},extra:String}),Y=O({name:z+"FormItem",componentName:"FormItem",props:Fa,setup:function(t,a){return Ie({props:t,context:a,template:Aa})}});Y.install=function(e){e.component(Y.name,Y)};export{Y as F,D as a};
