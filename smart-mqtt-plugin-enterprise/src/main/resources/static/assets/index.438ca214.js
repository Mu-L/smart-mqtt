import{d as E,a4 as U,Z as p,e as k,f as D,l as c,q as v,s as f,b as e,E as l,Q as a,I,w as V,G as _}from"./vue.fad201d8.js";import{_ as A,v as F,ce as q,al as G,I as g,bc as w,B as L,cf as N,cg as T,T as R,ch as z}from"./index.044b2d75.js";import{R as S,C as h}from"./index.3f73bd0d.js";import{a as j,F as r}from"./index.9c151d9f.js";import{L as M,G as P,C as n}from"./index.8f1b0feb.js";import"./index.b6e8563b.js";import{G as Q}from"./index.e05be9ee.js";import"./index.e6a4f808.js";import"./help-circle.ad52b976.js";import"./event.68ff4fe6.js";import"./del.93e43054.js";import"./index.c22fe26d.js";import"./index.cf4871b3.js";import"./resize-event.d6a86905.js";import"./index.da6b19dd.js";import"./right.b44f62d9.js";const Y={class:"container"},Z={key:0},H={key:1},J=E({__name:"index",setup(K){const b=U({loading:null});F.useI18n();const d=p(!1),u=p({}),y=p([]),i=async()=>{b.loading=M.service({text:"loading...",target:document.getElementById("container"),background:"rgba(0, 0, 0, 0.7)"});try{const{data:s}=await q({});return console.log("bridge",s),y.value=s.list,new Promise(t=>{t({result:s.list,page:{total:s.total}})})}finally{b.loading.close()}},x=({code:s,$grid:t})=>{switch(console.log("code",s,t),s){case"showAddForm":d.value=!0;break;case"delete":C(t.getSelectRecords().map(m=>m.username));break}},B=async()=>{console.log("user",u),await T(u.value),i(),d.value=!1},C=async s=>{s.length===0&&R.message({message:"\u65E0\u9009\u4E2D\u7528\u6237",status:"error"}),console.log("user",s),await z(s),i()};return k(()=>{i()}),(s,t)=>{const m=D("Breadcrumb");return c(),v(I,null,[f("div",Y,[e(m,{items:["menu.system","menu.system.users"]},null,8,["items"]),e(a(G),{class:"content"},{default:l(()=>[e(a(S),null,{default:l(()=>[e(a(h),null,{default:l(()=>[f("div",null,[e(a(P),{data:y.value,"seq-serial":"",pager:{attrs:{currentPage:1,pageSize:5,pageSizes:[5,10],total:0,layout:"total, prev, pager, next, jumper, sizes"}},onToolbarButtonClick:x},{toolbar:l(()=>[e(a(Q),{buttons:[{code:"showAddForm",name:"\u65B0\u589E\u7528\u6237"},{code:"delete",name:"\u5220\u9664"}]})]),default:l(()=>[e(a(n),{type:"index",width:"60"}),e(a(n),{type:"selection",width:"50"}),e(a(n),{field:"username",title:"\u7528\u6237\u540D"}),e(a(n),{field:"role",title:"\u89D2\u8272"},{default:l(o=>[o.row.role=="admin"?(c(),v("div",Z,"\u7BA1\u7406\u5458")):V("",!0),o.row.role=="user"?(c(),v("div",H,"\u666E\u901A\u7528\u6237")):V("",!0)]),_:1}),e(a(n),{field:"desc",title:"\u5907\u6CE8"})]),_:1},8,["data"])])]),_:1})]),_:1})]),_:1})]),e(a(N),{title:"\u65B0\u589E\u8D26\u6237",visible:d.value,"onUpdate:visible":t[6]||(t[6]=o=>d.value=o)},{default:l(()=>[f("div",null,[e(a(j),{disabled:!1,"label-position":"right","label-width":"100px"},{default:l(()=>[e(a(r),{label:"\u7528\u6237\u540D",required:""},{default:l(()=>[e(a(g),{modelValue:u.value.username,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value.username=o)},null,8,["modelValue"])]),_:1}),e(a(r),{label:"\u5BC6\u7801",required:""},{default:l(()=>[e(a(g),{modelValue:u.value.password,"onUpdate:modelValue":t[1]||(t[1]=o=>u.value.password=o),maxlength:"15"},null,8,["modelValue"])]),_:1}),e(a(r),{label:"\u89D2\u8272",required:""},{default:l(()=>[e(a(w),{modelValue:u.value.role,"onUpdate:modelValue":t[2]||(t[2]=o=>u.value.role=o),label:"admin"},{default:l(()=>[_(" \u7BA1\u7406\u5458")]),_:1},8,["modelValue"]),e(a(w),{modelValue:u.value.role,"onUpdate:modelValue":t[3]||(t[3]=o=>u.value.role=o),label:"user"},{default:l(()=>[_("\u666E\u901A\u7528\u6237")]),_:1},8,["modelValue"])]),_:1}),e(a(r),{label:"\u5907\u6CE8"},{default:l(()=>[e(a(g),{modelValue:u.value.desc,"onUpdate:modelValue":t[4]||(t[4]=o=>u.value.desc=o),type:"textarea"},null,8,["modelValue"])]),_:1}),e(a(r),null,{default:l(()=>[e(a(L),{type:"primary",onClick:t[5]||(t[5]=o=>B())},{default:l(()=>[_(" \u63D0\u4EA4")]),_:1})]),_:1})]),_:1})])]),_:1},8,["visible"])],64)}}});var pe=A(J,[["__scopeId","data-v-5f355407"]]);export{pe as default};
