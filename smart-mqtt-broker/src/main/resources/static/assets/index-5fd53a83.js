import{d as F,o as V,ag as B,v as E,aj as I,a as b,b as M,e as P,I as q,h as A}from"./index-9f8de993.js";const C={name:"LayForm"},w=F({...C,props:{model:{default:function(){return{}}},required:{type:Boolean},rules:null,pane:{type:Boolean,default:!1},initValidate:{type:Boolean,default:!1},requiredIcons:{default:""},labelPosition:{default:"right"},labelWidth:null,requiredErrorMessage:null,validateMessage:null,useCN:{type:Boolean,default:!0},size:null},emits:["submit"],setup(f,{expose:m,emit:h}){const a=f,n=[],l={};V(()=>{var e;a.initValidate&&((e=i())==null||e.catch(t=>{}))});const v=function(){let e=!1;return i((t,o,r)=>{e=t,h("submit",t,o,r)}),e},i=function(e,t){let o=n;typeof e=="function"?t=e:(typeof e=="string"||Array.isArray(e)&&e.length>0)&&(o=[],(e?[].concat(e):[]).forEach(s=>l[s]&&o.push(l[s])));let r=[];o.forEach(c=>{c.validate((s,u)=>{r=r.concat(s)})});const d=r.length===0;return typeof t=="function"?(d?t(!0,a.model,null):t(!1,a.model,r),null):new Promise((c,s)=>{const u={isValidate:d,model:a.model,errors:d?null:r};u.isValidate?c(u):s(u)})},p=function(e){const t=e?[].concat(e):[];t.length===0?n.forEach(o=>o.clearValidate()):t.forEach(o=>l[o]&&l[o].clearValidate())},y=function(){for(const e in a.model)a.model[e]=null;setTimeout(()=>{var e;return(e=i())==null?void 0:e.catch(t=>{})},0)},g=function(e){n.push(e),l[e.prop]=e},_=function(e){for(var t=0;t<n.length;t++)n[t].prop==e.prop&&n.splice(t,1);e.prop!=null&&Reflect.deleteProperty(l,e.prop)};return m({validate:i,clearValidate:p,reset:y}),B("LayForm",E({formItems:n,addField:g,removeField:_,clearValidate:p,validate:i,...I(a)})),(e,t)=>(b(),M("form",{class:q(["layui-form",{"layui-form-pane":f.pane}]),onsubmit:v},[P(e.$slots,"default")],2))}}),L=A(w);export{L as c};
