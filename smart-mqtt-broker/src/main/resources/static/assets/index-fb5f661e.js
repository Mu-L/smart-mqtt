import{c as C}from"./index-26d3cd30.js";import{r as _,v as D,_ as E,a as i,s as g,m as t,l as e,b as h,p as F,F as S,j as f,y as x,E as A,G as L,q as N,H as R,n as U}from"./index-cda9a353.js";import{c as z}from"./index-3e5d3803.js";import{c as j}from"./index-30beead0.js";import{c as q}from"./index-ddd5d083.js";import{c as G,a as H}from"./index-f68c85dc.js";import{c as P,e as T}from"./api-0b704211.js";import{c as $}from"./index-096bd759.js";const J={setup(){const c=_({total:0,limit:10,current:1,showRefresh:!0,showCount:!0}),a=D({username:"",clientId:"",brokerIps:[]}),y=_(null),o=_([]),b=[{title:"客户端ID",width:"120px",key:"clientId"},{title:"用户名",width:"120px",key:"username"},{title:"状态",width:"80px",key:"status",customSlot:"status"},{title:"客户端IP地址",width:"80px",key:"ip_address"},{title:"Broker地址",width:"80px",key:"broker_ip_address"},{title:"心跳",width:"40px",key:"keepalive"},{title:"Clean Start",width:"80px",key:"clean_start"},{title:"会话过期间隔",width:"80px",key:"expiry_interval"},{title:"连接时间",width:"180px",key:"connect_time"}],k=_([]),p=()=>{y.value.reset(),u(1,c.value.limit)},d=({current:s,limit:r})=>{u(s,r)};(async()=>{const{data:s}=await P();console.log(s);const r=[];s.map(n=>{r.push({label:n.name,value:n.ipAddress+":"+n.port})}),o.value=r})();const u=async(s,r)=>{const{data:n}=await T({pageSize:r,pageNo:s,clientId:a.clientId,username:a.username,brokers:a.brokerIps});console.log(n),k.value=n.list,c.value.total=n.total,c.value.limit=n.pageSize};return u(c.value.current,c.value.limit),{page:c,change:d,columns2:b,dataSource:k,brokerList:o,form:a,formRef:y,reset:p}}},K={key:0},M={key:1};function O(c,a,y,o,b,k){const p=A,d=L,m=N,u=H,s=G,r=R,n=U,B=$,w=q,v=j,I=z,V=C;return i(),g(V,{fluid:"true",style:{padding:"10px"}},{default:t(()=>[e(n,{space:"10"},{default:t(()=>[e(m,{md:24},{default:t(()=>[e(w,null,{default:t(()=>[e(B,{model:o.form,ref:"formRef"},{default:t(()=>[e(n,null,{default:t(()=>[e(m,{md:6},{default:t(()=>[e(d,{"label-width":"0"},{default:t(()=>[e(p,{modelValue:o.form.clientId,"onUpdate:modelValue":a[0]||(a[0]=l=>o.form.clientId=l),placeholder:"客户端ID"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{md:6},{default:t(()=>[e(d,{"label-width":"0"},{default:t(()=>[e(p,{modelValue:o.form.username,"onUpdate:modelValue":a[1]||(a[1]=l=>o.form.username=l),placeholder:"用户名"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{md:6},{default:t(()=>[e(d,{"label-width":"0"},{default:t(()=>[e(s,{modelValue:o.form.brokerIps,"onUpdate:modelValue":a[2]||(a[2]=l=>o.form.brokerIps=l),placeholder:"Broker节点",multiple:"","allow-clear":""},{default:t(()=>[(i(!0),h(S,null,F(o.brokerList,l=>(i(),g(u,{value:l.value,label:l.label},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{md:6},{default:t(()=>[e(d,{"label-width":"0"},{default:t(()=>[e(r,{type:"primary",onClick:a[3]||(a[3]=l=>o.change({current:1,limit:o.page.limit}))},{default:t(()=>[f("查询")]),_:1}),e(r,{onClick:o.reset},{default:t(()=>[f("重置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(m,{md:24},{default:t(()=>[e(w,null,{default:t(()=>[e(I,{columns:o.columns2,"data-source":o.dataSource,page:o.page,onChange:o.change,size:"md",skin:"nob"},{status:t(({data:l})=>[l.status=="connected"?(i(),h("div",K,[e(v,{type:"dot",theme:"green",ripple:""}),f(" 已连接 ")])):x("",!0),l.status=="disconnect"?(i(),h("div",M,[e(v,{type:"dot"}),f(" 已离线 ")])):x("",!0)]),_:1},8,["columns","data-source","page","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})}const ae=E(J,[["render",O]]);export{ae as default};
