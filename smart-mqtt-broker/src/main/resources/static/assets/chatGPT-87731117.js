import{g as d,ab as S,_ as M,o as m,j as h,J as e,I as o,C as p,F as V,ai as T,au as A,K as i,G,c as x,H as v,D as C,am as j,a6 as H,M as J,ad as P,av as U,aw as q,aj as O,an as z,a7 as K,a8 as L,a9 as Q,ax as R,N as W}from"./_plugin-vue_export-helper-a445210d.js";import{m as X}from"./mqtt.min-e399246d.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */const Y={setup(){const r=d(),y=d([]),n=d(),l=d(),f=d();let t;const u="/chatGPT";return{connectState:f,change:async()=>{f.value?t.close():(t=X.connect("ws://82.157.162.230:1884",{clientId:l.value}),t.on("connect",function(){l.value=t.options.clientId,t.subscribe(u+"/"+l.value,function(){})}),t.on("message",function(c,_){console.log("topic:"+c),console.log("payload:"+_),y.value.push(JSON.parse(_)),console.log(r.value.scrollHeight),r.value.scrollTo(0,r.value.scrollHeight)}))},scrollContent:r,clientId:l,messages:y,message:n,sendMessage:async()=>{if(!n.value)S.notifiy({title:"Error",content:"无法发送空内容",icon:2});else{let c={clientId:t.options.clientId,message:n.value};t.publish(u+"/"+l.value,JSON.stringify(c),{retain:!0,qos:1})}}}}},Z={ref:"scrollContent",style:{"overflow-y":"auto","overflow-x":"auto",height:"500px","background-color":"whitesmoke"}},ee={id:"scrollContent"},oe=p("span",{style:{color:"#2b2d42"}},"我",-1),te={key:2,style:{color:"red"}},ne={style:{width:"100%",height:"100px"}};function ae(r,s,y,n,l,f){const t=j,u=H,b=J,w=P,c=U,_=q,g=T,F=O,I=z,k=K,D=L,E=Q,N=R,$=W,B=A;return m(),h(V,null,[e(g,{space:"10"},{default:o(()=>[e(t,{sm:"1",md:"1"}),e(t,{sm:"22",md:"22"},{default:o(()=>[e(E,{class:"example"},{default:o(()=>[e(u),e(k,null,{default:o(()=>[e(I,null,{title:o(()=>[i(" ChatGPT ")]),extra:o(()=>[e(w,{modelValue:n.clientId,"onUpdate:modelValue":s[1]||(s[1]=a=>n.clientId=a)},{prepend:o(()=>[i("账号")]),append:o(()=>[e(b,{"onswitch-text":"连接","unswitch-text":"断开",modelValue:n.connectState,"onUpdate:modelValue":s[0]||(s[0]=a=>n.connectState=a),onChange:n.change},null,8,["modelValue","onChange"])]),_:1},8,["modelValue"])]),body:o(()=>[e(F,null,{default:o(()=>[e(g,null,{default:o(()=>[e(t,null,{default:o(()=>[p("div",Z,[p("div",ee,[(m(!0),h(V,null,G(n.messages,(a,se)=>(m(),x(_,{key:a,style:{margin:"15px",padding:"15px"}},{default:o(()=>[a.clientId==n.clientId?(m(),x(c,{key:0},{default:o(()=>[oe]),_:1})):v("",!0),a.clientId!=n.clientId?(m(),x(c,{key:1,src:"https://portrait.gitee.com/uploads/avatars/user/117/351975_smartdms_1578921064.jpg!avatar60"})):v("",!0),i(" ："),a.remaining?(m(),h("span",te,"(剩余额度:"+C(a.remaining)+")",1)):v("",!0),i(" "+C(a.message),1)]),_:2},1024))),128))])],512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(D)]),_:1})]),_:1}),e(t,{sm:"1",md:"1"})]),_:1}),p("div",ne,[e(B,{style:{width:"100%",padding:"10px","box-sizing":"border-box"},offset:0,position:"bottom"},{default:o(()=>[e(g,{space:"10"},{default:o(()=>[e(t,{sm:"2",md:"2"}),e(t,{sm:"18",md:"18"},{default:o(()=>[e(N,{placeholder:"有什么想要对我说的",rows:2,cols:10,modelValue:n.message,"onUpdate:modelValue":s[2]||(s[2]=a=>n.message=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(t,{sm:"2",md:"2"},{default:o(()=>[e($,{type:"normal",onClick:n.sendMessage},{default:o(()=>[i("发送消息")]),_:1},8,["onClick"])]),_:1}),e(t,{sm:"2",md:"2"})]),_:1})]),_:1})])],64)}const ue=M(Y,[["render",ae]]);export{ue as default};
