import{r as m,C as B,o as g,s as v,_ as S,a as r,b as u,v as n,x as l,F as D,D as P,f as V,B as d,t as C,q as s,A as _,E as F}from"./index-6826e0e2.js";import{c as T}from"./index-5646c0d6.js";import{c as E}from"./index-90d70dca.js";import{c as I}from"./index-b06d9b70.js";import{c as $}from"./index-fad71fc5.js";import{c as z}from"./index-986be69e.js";import{b as M}from"./api-82fa8ce7.js";const N={setup(){const h=[{title:"名称",width:"200px",key:"name",customSlot:"name"},{title:"状态",width:"180px",key:"status",customSlot:"status"},{title:"运行时长",width:"120px",key:"runtime"},{title:"版本信息",width:"120px",key:"version"},{title:"进程",width:"120px",key:"pid"},{title:"操作系统内存",width:"180px",key:"memory",customSlot:"memory"},{title:"操作系统CPU负载",width:"180px",key:"cpu",customSlot:"cpu"}],c=m([{title:"基础配置",dynamic_config:[{label:"MaxPacketSize",prop:"MaxPacketSize",placeholder:"MQTT最大消息体字节数"},{label:"TopicLimit",prop:"TopicLimit",placeholder:"topic数量上限"}],restart_config:[{label:"Host",prop:"host",placeholder:"Broker服务IP地址"},{label:"Port",prop:"port",placeholder:"Broker服务端口号"}]},{title:"企业插件",dynamic_config:[{label:"Host",prop:"host",placeholder:"Broker服务IP地址"},{label:"Port",prop:"port",placeholder:"Broker服务端口号"}],restart_config:[{label:"Host",prop:"host",placeholder:"Broker服务IP地址"},{label:"Port",prop:"port",placeholder:"Broker服务端口号"}]}]),y=m([]),t=m(!1),k=m(0),f=B({host:"",port:"",bufferSize:"",maxPacketSize:"",topicLimit:"",maxInflight:""});let i;const a=o=>{t.value=!0};return g(()=>{const o=async()=>{const{data:p}=await M();console.log(p),y.value=p};o(),i=setInterval(()=>{o()},2e3)}),v(()=>{console.log("clear timer"),clearInterval(i)}),{columns2:h,dataSource2:y,modalVisible:t,brokerForm:f,currentTab:k,brokerConfig:c,editBroker:a}}},A=["onClick"],H={key:0},L={key:1},U={key:2};function Q(h,c,y,t,k,f){const i=F,a=z,o=$,p=I,x=E,b=T,w=P;return r(),u(D,null,[n(x,null,{default:l(()=>[n(p,{columns:t.columns2,"data-source":t.dataSource2,size:"md",skin:"nob"},{name:l(({data:e})=>[V("a",{onClick:j=>t.editBroker(e),href:"javascript:void(0);"},[d(C(e.name),1),n(i,{type:"layui-icon-edit",style:{position:"absolute",right:"10px"}})],8,A)]),status:l(({data:e})=>[e.status=="running"?(r(),u("div",H,[n(a,{type:"dot",theme:"blue",ripple:""}),d(" 运行中 ")])):s("",!0),e.status=="stopped"?(r(),u("div",L,[n(a,{type:"dot"}),d(" 已离线 ")])):s("",!0),e.status=="unknown"?(r(),u("div",U,[n(a,{type:"dot"}),d(" 未知 ")])):s("",!0)]),memory:l(({data:e})=>[e.memory<30?(r(),_(o,{key:0,percent:e.memory,"show-text":!0,style:{width:"100px"}},null,8,["percent"])):s("",!0),e.memory>=30?(r(),_(o,{key:1,theme:"orange",percent:e.memory,"show-text":!0,style:{width:"100px"}},null,8,["percent"])):s("",!0)]),cpu:l(({data:e})=>[e.cpu<60?(r(),_(o,{key:0,percent:e.cpu,"show-text":!0,style:{width:"100px"}},null,8,["percent"])):s("",!0),e.cpu>=60?(r(),_(o,{key:1,theme:"orange",percent:e.cpu,"show-text":!0,style:{width:"100px"}},null,8,["percent"])):s("",!0)]),_:1},8,["columns","data-source"])]),_:1}),n(w,{type:"drawer",modelValue:t.modalVisible,"onUpdate:modelValue":c[0]||(c[0]=e=>t.modalVisible=e),title:"MQTT Broker配置"},{default:l(()=>[n(b,{status:"failure",describe:"开发中...",title:"提示"})]),_:1},8,["modelValue"])],64)}const X=S(N,[["render",Q]]);export{X as default};
