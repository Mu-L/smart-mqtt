import{d as F,o as V,p as B,C as E,aj as b,a as I,b as C,e as M,l as P,h as q}from"./index-6826e0e2.js";const A={name:"LayForm"},w=F({...A,props:{model:{default:function(){return{}}},required:{type:Boolean},rules:null,pane:{type:Boolean,default:!1},initValidate:{type:Boolean,default:!1},requiredIcons:{default:""},labelPosition:{default:"right"},labelWidth:null,requiredErrorMessage:null,validateMessage:null,useCN:{type:Boolean,default:!0},size:null},emits:["submit"],setup(f,{expose:m,emit:h}){const a=f,n=[],r={};V(()=>{var e;a.initValidate&&((e=i())==null||e.catch(t=>{}))});const v=function(){let e=!1;return i((t,o,l)=>{e=t,h("submit",t,o,l)}),e},i=function(e,t){let o=n;typeof e=="function"?t=e:(typeof e=="string"||Array.isArray(e)&&e.length>0)&&(o=[],(e?[].concat(e):[]).forEach(s=>r[s]&&o.push(r[s])));let l=[];o.forEach(c=>{c.validate((s,u)=>{l=l.concat(s)})});const d=l.length===0;return typeof t=="function"?(d?t(!0,a.model,null):t(!1,a.model,l),null):new Promise((c,s)=>{const u={isValidate:d,model:a.model,errors:d?null:l};u.isValidate?c(u):s(u)})},p=function(e){const t=e?[].concat(e):[];t.length===0?n.forEach(o=>o.clearValidate()):t.forEach(o=>r[o]&&r[o].clearValidate())},y=function(){for(const e in a.model)a.model[e]=null;setTimeout(()=>{var e;return(e=i())==null?void 0:e.catch(t=>{})},0)},_=function(e){n.push(e),r[e.prop]=e},g=function(e){for(var t=0;t<n.length;t++)n[t].prop==e.prop&&n.splice(t,1);e.prop!=null&&Reflect.deleteProperty(r,e.prop)};return m({validate:i,clearValidate:p,reset:y}),B("LayForm",E({formItems:n,addField:_,removeField:g,clearValidate:p,validate:i,...b(a)})),(e,t)=>(I(),C("form",{class:P(["layui-form",{"layui-form-pane":f.pane}]),onsubmit:v},[M(e.$slots,"default")],2))}}),L=q(w);export{L as c};
