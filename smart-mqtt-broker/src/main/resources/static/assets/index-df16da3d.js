import{g as d,a1 as B,z as E,ab as M,_ as D,o as r,j as h,J as o,I as e,C as _,F as v,ai as T,au as j,K as i,G as H,c as x,H as b,D as J,am as S,a6 as q,av as z,aw as O,aj as U,an as A,a7 as G,a8 as K,a9 as L,ax as Q,N as P}from"./_plugin-vue_export-helper-a445210d.js";import{m as R}from"./mqtt.min-e399246d.js";/* empty css              *//* empty css              *//* empty css              */const W={setup(){const c=d(),p=d([]),n=d(),f=d();let a;const t="/im",y=async()=>{if(!n.value)M.notifiy({title:"Error",content:"无法发送空内容",icon:2});else{let s={clientId:a.options.clientId,message:n.value};a.publish(t,JSON.stringify(s),{retain:!0,qos:1})}};return B(()=>{a=R.connect("ws://82.157.162.230:1884"),a.on("connect",function(){f.value=a.options.clientId,a.subscribe(t,function(){}),console.log("aaaa")}),a.on("message",function(s,m){console.log("topic:"+s),console.log("payload:"+m),p.value.push(JSON.parse(m)),console.log(c.value.scrollHeight),c.value.scrollTo(0,c.value.scrollHeight)})}),E(()=>{}),{scrollContent:c,clientId:f,messages:p,message:n,sendMessage:y}}},X={ref:"scrollContent",style:{"overflow-y":"auto","overflow-x":"auto",height:"500px","background-color":"whitesmoke"}},Y={id:"scrollContent"},Z=_("span",{style:{color:"#2b2d42"}},"我",-1),oo={style:{width:"100%",height:"100px"}};function eo(c,u,p,n,f,a){const t=S,y=q,s=z,m=O,g=T,k=U,w=A,C=G,$=K,I=L,F=Q,N=P,V=j;return r(),h(v,null,[o(g,{space:"10"},{default:e(()=>[o(t,{sm:"1",md:"1"}),o(t,{sm:"22",md:"22"},{default:e(()=>[o(I,{class:"example"},{default:e(()=>[o(y),o(C,null,{default:e(()=>[o(w,null,{title:e(()=>[i(" ChatMQTT ")]),extra:e(()=>[i(" ... ")]),body:e(()=>[o(k,null,{default:e(()=>[o(g,null,{default:e(()=>[o(t,null,{default:e(()=>[_("div",X,[_("div",Y,[(r(!0),h(v,null,H(n.messages,(l,to)=>(r(),x(m,{key:l,style:{margin:"15px",padding:"15px"}},{default:e(()=>[l.clientId==n.clientId?(r(),x(s,{key:0},{default:e(()=>[Z]),_:1})):b("",!0),l.clientId!=n.clientId?(r(),x(s,{key:1,src:"https://portrait.gitee.com/uploads/avatars/user/117/351975_smartdms_1578921064.jpg!avatar60"})):b("",!0),i(" ： "+J(l.message),1)]),_:2},1024))),128))])],512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o($)]),_:1})]),_:1}),o(t,{sm:"1",md:"1"})]),_:1}),_("div",oo,[o(V,{style:{width:"100%",padding:"10px","box-sizing":"border-box"},offset:0,position:"bottom"},{default:e(()=>[o(g,{space:"10"},{default:e(()=>[o(t,{sm:"2",md:"2"}),o(t,{sm:"18",md:"18"},{default:e(()=>[o(F,{placeholder:"有什么想要对我说的",rows:2,cols:10,modelValue:n.message,"onUpdate:modelValue":u[0]||(u[0]=l=>n.message=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),o(t,{sm:"2",md:"2"},{default:e(()=>[o(N,{type:"normal",onClick:n.sendMessage},{default:e(()=>[i("发送消息")]),_:1},8,["onClick"])]),_:1}),o(t,{sm:"2",md:"2"})]),_:1})]),_:1})])],64)}const ro=D(W,[["render",eo]]);export{ro as default};
