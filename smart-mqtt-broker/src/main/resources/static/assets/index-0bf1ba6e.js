import{c as C}from"./index-93fa4fe7.js";import{r as _,C as D,_ as F,a as i,A as x,x as t,v as e,b as h,k as E,F as A,B as f,q as g,K as S,L,z,M as N,y as R}from"./index-6826e0e2.js";import{c as U}from"./index-b06d9b70.js";import{c as q}from"./index-986be69e.js";import{c as K}from"./index-90d70dca.js";import{c as M,a as P}from"./index-39c8dbb4.js";import{e as T,f as $}from"./api-82fa8ce7.js";import{c as j}from"./index-7b8ffa6c.js";const G={setup(){const c=_({total:0,limit:10,current:1,showRefresh:!0,showCount:!0}),a=D({username:"",clientId:"",brokerIps:[]}),y=_(null),o=_([]),b=[{title:"客户端ID",width:"120px",key:"clientId"},{title:"用户名",width:"120px",key:"username"},{title:"状态",width:"80px",key:"status",customSlot:"status"},{title:"客户端IP地址",width:"80px",key:"ip_address"},{title:"Broker地址",width:"80px",key:"broker_ip_address"},{title:"心跳",width:"40px",key:"keepalive"},{title:"Clean Start",width:"80px",key:"clean_start"},{title:"会话过期间隔",width:"80px",key:"expiry_interval"},{title:"连接时间",width:"180px",key:"connect_time"}],k=_([]),p=()=>{y.value.reset(),u(1,c.value.limit)},m=({current:s,limit:r})=>{u(s,r)};(async()=>{const{data:s}=await T();console.log(s);const r=[];s.map(n=>{r.push({label:n.name,value:n.ipAddress+":"+n.port})}),o.value=r})();const u=async(s,r)=>{const{data:n}=await $({pageSize:r,pageNo:s,clientId:a.clientId,username:a.username,brokers:a.brokerIps});console.log(n),k.value=n.list,c.value.total=n.total,c.value.limit=n.pageSize};return u(c.value.current,c.value.limit),{page:c,change:m,columns2:b,dataSource:k,brokerList:o,form:a,formRef:y,reset:p}}},H={key:0},J={key:1};function O(c,a,y,o,b,k){const p=S,m=L,d=z,u=P,s=M,r=N,n=R,B=j,w=K,v=q,I=U,V=C;return i(),x(V,{fluid:"true",style:{padding:"10px"}},{default:t(()=>[e(n,{space:"10"},{default:t(()=>[e(d,{md:24},{default:t(()=>[e(w,null,{default:t(()=>[e(B,{model:o.form,ref:"formRef"},{default:t(()=>[e(n,null,{default:t(()=>[e(d,{md:6},{default:t(()=>[e(m,{"label-width":"0"},{default:t(()=>[e(p,{modelValue:o.form.clientId,"onUpdate:modelValue":a[0]||(a[0]=l=>o.form.clientId=l),placeholder:"客户端ID"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{md:6},{default:t(()=>[e(m,{"label-width":"0"},{default:t(()=>[e(p,{modelValue:o.form.username,"onUpdate:modelValue":a[1]||(a[1]=l=>o.form.username=l),placeholder:"用户名"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{md:6},{default:t(()=>[e(m,{"label-width":"0"},{default:t(()=>[e(s,{modelValue:o.form.brokerIps,"onUpdate:modelValue":a[2]||(a[2]=l=>o.form.brokerIps=l),placeholder:"Broker节点",multiple:"","allow-clear":""},{default:t(()=>[(i(!0),h(A,null,E(o.brokerList,l=>(i(),x(u,{value:l.value,label:l.label},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{md:6},{default:t(()=>[e(m,{"label-width":"0"},{default:t(()=>[e(r,{type:"primary",onClick:a[3]||(a[3]=l=>o.change({current:1,limit:o.page.limit}))},{default:t(()=>[f("查询")]),_:1}),e(r,{onClick:o.reset},{default:t(()=>[f("重置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(d,{md:24},{default:t(()=>[e(w,null,{default:t(()=>[e(I,{columns:o.columns2,"data-source":o.dataSource,page:o.page,onChange:o.change,size:"md",skin:"nob"},{status:t(({data:l})=>[l.status=="connected"?(i(),h("div",H,[e(v,{type:"dot",theme:"green",ripple:""}),f(" 已连接 ")])):g("",!0),l.status=="disconnect"?(i(),h("div",J,[e(v,{type:"dot"}),f(" 已离线 ")])):g("",!0)]),_:1},8,["columns","data-source","page","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})}const ae=F(G,[["render",O]]);export{ae as default};
