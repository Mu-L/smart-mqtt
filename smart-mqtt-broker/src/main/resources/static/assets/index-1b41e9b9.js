import{g as _,a1 as B,z as D,ab as E,_ as M,o as m,j as h,J as o,I as e,C as r,F as b,ai as T,au as H,K as i,G as J,c as x,H as v,D as S,am as j,a6 as q,av as z,aw as O,aj as U,an as A,a7 as G,a8 as K,a9 as L,ax as Q,N as P}from"./_plugin-vue_export-helper-a445210d.js";import{m as R}from"./mqtt.min-e399246d.js";/* empty css              *//* empty css              *//* empty css              */const W={setup(){const c=_(),p=_([]),n=_(),f=_();let a;const t="/im",y=async()=>{if(!n.value)E.notifiy({title:"Error",content:"无法发送空内容",icon:2});else{let s={clientId:a.options.clientId,message:n.value};a.publish(t,JSON.stringify(s),{retain:!0,qos:1})}};return B(()=>{a=R.connect("ws://82.157.162.230:1884"),a.on("connect",function(){f.value=a.options.clientId,a.subscribe(t,function(){}),console.log("aaaa")}),a.on("message",function(s,d){console.log("topic:"+s),console.log("payload:"+d),p.value.push(JSON.parse(d)),console.log(c.value.scrollHeight),c.value.scrollTo(0,c.value.scrollHeight)})}),D(()=>{}),{scrollContent:c,clientId:f,messages:p,message:n,sendMessage:y}}},X={ref:"scrollContent",style:{"overflow-y":"auto","overflow-x":"auto",height:"500px","background-color":"whitesmoke"}},Y={id:"scrollContent"},Z=r("span",{style:{color:"#2b2d42"}},"我",-1),oo=r("span",{style:{color:"#2b2d42"}},"匿名",-1),eo={style:{width:"100%",height:"100px"}};function to(c,u,p,n,f,a){const t=j,y=q,s=z,d=O,g=T,k=U,w=A,C=G,$=K,F=L,I=Q,N=P,V=H;return m(),h(b,null,[o(g,{space:"10"},{default:e(()=>[o(t,{sm:"1",md:"1"}),o(t,{sm:"22",md:"22"},{default:e(()=>[o(F,{class:"example"},{default:e(()=>[o(y),o(C,null,{default:e(()=>[o(w,null,{title:e(()=>[i(" ChatMQTT ")]),extra:e(()=>[i(" ... ")]),body:e(()=>[o(k,null,{default:e(()=>[o(g,null,{default:e(()=>[o(t,null,{default:e(()=>[r("div",X,[r("div",Y,[(m(!0),h(b,null,J(n.messages,(l,no)=>(m(),x(d,{key:l,style:{margin:"15px",padding:"15px"}},{default:e(()=>[l.clientId==n.clientId?(m(),x(s,{key:0},{default:e(()=>[Z]),_:1})):v("",!0),l.clientId!=n.clientId?(m(),x(s,{key:1},{default:e(()=>[oo]),_:1})):v("",!0),i(" ： "+S(l.message),1)]),_:2},1024))),128))])],512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o($)]),_:1})]),_:1}),o(t,{sm:"1",md:"1"})]),_:1}),r("div",eo,[o(V,{style:{width:"100%",padding:"10px","box-sizing":"border-box"},offset:0,position:"bottom"},{default:e(()=>[o(g,{space:"10"},{default:e(()=>[o(t,{sm:"2",md:"2"}),o(t,{sm:"18",md:"18"},{default:e(()=>[o(I,{placeholder:"有什么想要对我说的",rows:2,cols:10,modelValue:n.message,"onUpdate:modelValue":u[0]||(u[0]=l=>n.message=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),o(t,{sm:"2",md:"2"},{default:e(()=>[o(N,{type:"normal",onClick:n.sendMessage},{default:e(()=>[i("发送消息")]),_:1},8,["onClick"])]),_:1}),o(t,{sm:"2",md:"2"})]),_:1})]),_:1})])],64)}const ro=M(W,[["render",to]]);export{ro as default};
