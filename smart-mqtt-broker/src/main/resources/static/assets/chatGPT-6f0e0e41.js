import{g as d,ab as E,_ as S,o as r,j as b,J as e,I as o,C as p,F as V,ai as M,as as T,K as _,G,c as h,H as w,D as j,al as A,a6 as H,M as J,ad as P,at as U,au as q,aj as O,am as z,a7 as K,a8 as L,a9 as Q,av as R,N as W}from"./_plugin-vue_export-helper-a79656f4.js";import{m as X}from"./mqtt.min-0c119494.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */const Y={setup(){const m=d(),f=d([]),n=d(),l=d(),y=d();let t;const i="/chatGPT";return{connectState:y,change:async()=>{y.value?t.close():(t=X.connect("ws://82.157.162.230:1884",{clientId:l.value}),t.on("connect",function(){l.value=t.options.clientId,t.subscribe(i+"/"+l.value,function(){})}),t.on("message",function(c,u){console.log("topic:"+c),console.log("payload:"+u),f.value.push(JSON.parse(u)),console.log(m.value.scrollHeight),m.value.scrollTo(0,m.value.scrollHeight)}))},scrollContent:m,clientId:l,messages:f,message:n,sendMessage:async()=>{if(!n.value)E.notifiy({title:"Error",content:"无法发送空内容",icon:2});else{let c={clientId:t.options.clientId,message:n.value};t.publish(i+"/"+l.value,JSON.stringify(c),{retain:!0,qos:1})}}}}},Z={ref:"scrollContent",style:{"overflow-y":"auto","overflow-x":"auto",height:"500px","background-color":"whitesmoke"}},ee={id:"scrollContent"},oe=p("span",{style:{color:"#2b2d42"}},"我",-1),te={style:{width:"100%",height:"100px"}};function ne(m,s,f,n,l,y){const t=A,i=H,x=J,v=P,c=U,u=q,g=M,C=O,I=z,F=K,k=L,D=Q,N=R,$=W,B=T;return r(),b(V,null,[e(g,{space:"10"},{default:o(()=>[e(t,{sm:"1",md:"1"}),e(t,{sm:"22",md:"22"},{default:o(()=>[e(D,{class:"example"},{default:o(()=>[e(i),e(F,null,{default:o(()=>[e(I,null,{title:o(()=>[_(" ChatGPT ")]),extra:o(()=>[e(v,{modelValue:n.clientId,"onUpdate:modelValue":s[1]||(s[1]=a=>n.clientId=a)},{prepend:o(()=>[_("账号")]),append:o(()=>[e(x,{"onswitch-text":"连接","unswitch-text":"断开",modelValue:n.connectState,"onUpdate:modelValue":s[0]||(s[0]=a=>n.connectState=a),onChange:n.change},null,8,["modelValue","onChange"])]),_:1},8,["modelValue"])]),body:o(()=>[e(C,null,{default:o(()=>[e(g,null,{default:o(()=>[e(t,null,{default:o(()=>[p("div",Z,[p("div",ee,[(r(!0),b(V,null,G(n.messages,(a,ae)=>(r(),h(u,{key:a,style:{margin:"15px",padding:"15px"}},{default:o(()=>[a.clientId==n.clientId?(r(),h(c,{key:0},{default:o(()=>[oe]),_:1})):w("",!0),a.clientId!=n.clientId?(r(),h(c,{key:1,src:"https://portrait.gitee.com/uploads/avatars/user/117/351975_smartdms_1578921064.jpg!avatar60"})):w("",!0),_(" ： "+j(a.message),1)]),_:2},1024))),128))])],512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(k)]),_:1})]),_:1}),e(t,{sm:"1",md:"1"})]),_:1}),p("div",te,[e(B,{style:{width:"100%",padding:"10px","box-sizing":"border-box"},offset:0,position:"bottom"},{default:o(()=>[e(g,{space:"10"},{default:o(()=>[e(t,{sm:"2",md:"2"}),e(t,{sm:"18",md:"18"},{default:o(()=>[e(N,{placeholder:"有什么想要对我说的",rows:2,cols:10,modelValue:n.message,"onUpdate:modelValue":s[2]||(s[2]=a=>n.message=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(t,{sm:"2",md:"2"},{default:o(()=>[e($,{type:"normal",onClick:n.sendMessage},{default:o(()=>[_("发送消息")]),_:1},8,["onClick"])]),_:1}),e(t,{sm:"2",md:"2"})]),_:1})]),_:1})])],64)}const ie=S(Y,[["render",ne]]);export{ie as default};
