import{r as m,v as g,o as B,k as v,_ as S,a as r,b as u,l as n,m as l,F as P,x as V,f as D,j as d,t as F,y as s,s as _,z as T}from"./index-9f8de993.js";import{c as C,a as I}from"./index-714d55cd.js";import{c as z}from"./index-99264f2b.js";import{c as E}from"./index-98c086d5.js";import{c as $}from"./index-de81c898.js";import{a as M}from"./api-aca9f388.js";const N={setup(){const h=[{title:"名称",width:"200px",key:"name",customSlot:"name"},{title:"状态",width:"180px",key:"status",customSlot:"status"},{title:"运行时长",width:"120px",key:"runtime"},{title:"版本信息",width:"120px",key:"version"},{title:"进程",width:"120px",key:"pid"},{title:"操作系统内存",width:"180px",key:"memory",customSlot:"memory"},{title:"操作系统CPU负载",width:"180px",key:"cpu",customSlot:"cpu"}],c=m([{title:"基础配置",dynamic_config:[{label:"MaxPacketSize",prop:"MaxPacketSize",placeholder:"MQTT最大消息体字节数"},{label:"TopicLimit",prop:"TopicLimit",placeholder:"topic数量上限"}],restart_config:[{label:"Host",prop:"host",placeholder:"Broker服务IP地址"},{label:"Port",prop:"port",placeholder:"Broker服务端口号"}]},{title:"企业插件",dynamic_config:[{label:"Host",prop:"host",placeholder:"Broker服务IP地址"},{label:"Port",prop:"port",placeholder:"Broker服务端口号"}],restart_config:[{label:"Host",prop:"host",placeholder:"Broker服务IP地址"},{label:"Port",prop:"port",placeholder:"Broker服务端口号"}]}]),y=m([]),t=m(!1),k=m(0),f=g({host:"",port:"",bufferSize:"",maxPacketSize:"",topicLimit:"",maxInflight:""});let i;const a=o=>{t.value=!0};return B(()=>{const o=async()=>{const{data:p}=await M();console.log(p),y.value=p};o(),i=setInterval(()=>{o()},2e3)}),v(()=>{console.log("clear timer"),clearInterval(i)}),{columns2:h,dataSource2:y,modalVisible:t,brokerForm:f,currentTab:k,brokerConfig:c,editBroker:a}}},H=["onClick"],L={key:0},U={key:1},j={key:2};function A(h,c,y,t,k,f){const i=T,a=$,o=C,p=E,x=z,b=I,w=V;return r(),u(P,null,[n(x,null,{default:l(()=>[n(p,{columns:t.columns2,"data-source":t.dataSource2,size:"md",skin:"nob"},{name:l(({data:e})=>[D("a",{onClick:Q=>t.editBroker(e),href:"javascript:void(0);"},[d(F(e.name),1),n(i,{type:"layui-icon-edit",style:{position:"absolute",right:"10px"}})],8,H)]),status:l(({data:e})=>[e.status=="running"?(r(),u("div",L,[n(a,{type:"dot",theme:"blue",ripple:""}),d(" 运行中 ")])):s("",!0),e.status=="stopped"?(r(),u("div",U,[n(a,{type:"dot"}),d(" 已离线 ")])):s("",!0),e.status=="unknown"?(r(),u("div",j,[n(a,{type:"dot"}),d(" 未知 ")])):s("",!0)]),memory:l(({data:e})=>[e.memory<30?(r(),_(o,{key:0,percent:e.memory,"show-text":!0,style:{width:"100px"}},null,8,["percent"])):s("",!0),e.memory>=30?(r(),_(o,{key:1,theme:"orange",percent:e.memory,"show-text":!0,style:{width:"100px"}},null,8,["percent"])):s("",!0)]),cpu:l(({data:e})=>[e.cpu<60?(r(),_(o,{key:0,percent:e.cpu,"show-text":!0,style:{width:"100px"}},null,8,["percent"])):s("",!0),e.cpu>=60?(r(),_(o,{key:1,theme:"orange",percent:e.cpu,"show-text":!0,style:{width:"100px"}},null,8,["percent"])):s("",!0)]),_:1},8,["columns","data-source"])]),_:1}),n(w,{type:"drawer",modelValue:t.modalVisible,"onUpdate:modelValue":c[0]||(c[0]=e=>t.modalVisible=e),title:"MQTT Broker配置"},{default:l(()=>[n(b,{status:"failure",describe:"开发中...",title:"提示"})]),_:1},8,["modelValue"])],64)}const R=S(N,[["render",A]]);export{R as default};
